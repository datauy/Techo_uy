window.VERSION = "0.0.2";var pmb_im={controllers:angular.module("pmb_im.controllers",[]),services:angular.module("pmb_im.services",[])};pmb_im.app=angular.module("pmb_im",["ionic","ionic.wizard","ion-autocomplete","leaflet-directive","pmb_im.controllers","pmb_im.services","ngCordova"]).constant("ApiImEndpoint",{url:"http://www.montevideo.gub.uy"}).constant("ApiDataEndpoint",{url:"http://tomamosuna.info"}).run(["$ionicPlatform","$rootScope","$cordovaKeyboard",function(e,t,n){t.VERSION=window.VERSION,e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),ionic.Platform.isFullScreen=!0,window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider","$urlRouterProvider","$compileProvider","$ionicConfigProvider",function(e,t,n,o){n.debugInfoEnabled(!1),e.state("app",{cache:!1,url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AbsController"}).state("app.map",{cache:!1,url:"/map",views:{menuContent:{templateUrl:"templates/map.html",controller:"MapController"}}}).state("app.intro",{cache:!1,url:"/intro",views:{menuContent:{templateUrl:"templates/intro.html",controller:"IntroCtrl"}}}),t.otherwise("/app/intro")}]),pmb_im.controllers.controller("AbsController",["$scope",function(e){}]),pmb_im.controllers.controller("IntroCtrl",["$scope","$state","$cordovaGeolocation","$stateParams","$ionicPlatform","$ionicPopup","LocationsService","DBService",function(e,t,n,o,a,i,r,s){var l=s.initDB();l.info().then(console.log.bind(console)),e.geolocate=function(){var e={timeout:3500,enableHighAccuracy:!0};n.getCurrentPosition(e).then(function(e){r.save_initial_position(e),t.go("app.map")},function(e){t.go("app.map")})},e.$on("$ionicView.enter",function(){null!=r.council_modal&&(r.council_modal.hide(),r.council_modal.remove()),e.geolocate()})}]),pmb_im.controllers.controller("MapController",["$scope","_","$cordovaCamera","$cordovaGeolocation","$compile","$ionicModal","$ionicPopup","leafletData","ConfigService","LocationsService","PinService","MessageService","DrinkService","AuthService","UserService","DBService","$timeout","$interval","$location","ErrorService","$ionicSlideBoxDelegate","$ionicScrollDelegate","PopUpService","ConnectivityService","$cordovaInAppBrowser","MapService","ModalService","SemaphoreService","ValidationService","NotificationService",function(e,t,n,o,a,i,r,s,l,c,u,d,p,m,_,g,f,h,v,y,b,w,k,I,A,E,D,R,S,M){e.online_user_geo={},e.online_user_geo_array=new Array,e.baseURL=l.baseURL,e.AppName=l.AppName,e.user_cached_image="./img/icon-user-anonymous.png",e.one_value_popup=null,e.myIntervals=new Array,e.$on("$ionicView.beforeEnter",function(){D.checkNoModalIsOpen(),g.initDB(),I.isOnline()?e.check_user_logged():e.set_offline_user(),document.getElementById("foot_bar").style.display="block",I.isOnline()&&(e.create_online_map(),e.myIntervals.userLocation=h(function(){e.sendUserLocation()},3e4))}),e.$on("$ionicView.afterEnter",function(){s.getMap();""!=c.initial_lat?E.centerMapOnCoords(c.initial_lat,c.initial_lng,16):E.centerMapOnCoords(-34.901113,-56.164531,14),e.checkNotifications()}),e.checkNotifications=function(){e.myIntervals.notifications&&h.cancel(e.myIntervals.notifications),e.myIntervals.notifications=h(function(){e.notifications=new Array,_.uid&&M.getUnrecivedNotifications(_.name,_.password).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.notifications=e.getObjectDataFromResponse(n).Notifications)})},3e3)},e.openNotification=function(t){e.dontShowNotificationAgain(t.nid),"nuevo_mensaje"==t.tipo?e.send_message_to(t.uid):"invitacion_a_trago"==t.tipo?e.openInvitationsModal(t.uid):"respuesta_a_invitacion"==t.tipo&&e.openInvitationsModal(t.uid)},e.dontShowNotificationAgain=function(e){_.uid&&M.dontShowNotificationAgain(_.name,_.password,e).then(function(e){})},e.closeNotification=function(t){e.dontShowNotificationAgain(t.nid)},e.openWebsite=function(e){var t={location:"no",clearcache:"yes",toolbar:"no"};A.open(e,"_blank",t).then(function(e){})["catch"](function(e){})},e.create_online_map=function(){e.map={defaults:{tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",minZoom:12,maxZoom:18,zoomControlPosition:"topleft"},markers:{},events:{map:{enable:["context"],logic:"emit"}},center:{}},e.loadPinsLayer(),e.map.center={lat:-34.901113,lng:-56.164531,zoom:16},s.getMap().then(function(t){t.on("moveend",e.hideOffScreenPins)})},e.next=function(){b.next()},e.previous=function(){b.previous()},e.back_to_map=function(e){e?(D.checkNoModalIsOpen(),document.getElementById("foot_bar").style.display="block",document.getElementById("spinner-inside-modal").style.display="none"):document.getElementById("spinner-inside-modal").style.display="none"},e.image=null,e.addImage=function(t,o,a,i){e.isUserPhoto=o,e.isCommentPhoto=a,e.isNewUserPhoto=i;var r=Camera.PictureSourceType.CAMERA,s=!0,l=!0;1==t&&(r=Camera.PictureSourceType.PHOTOLIBRARY,s=!1,l=!1);var c={quality:90,destinationType:Camera.DestinationType.FILE_URI,sourceType:r,allowEdit:!1,correctOrientation:s,encodingType:Camera.EncodingType.JPEG,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:l,targetWidth:500,targetHeight:500};n.getPicture(c).then(function(t){function n(t){window.FilePath.resolveNativePath(t,function(n){t="file://"+n,n.startsWith("file://")&&(t=n),1==e.isUserPhoto?e.profile.picture_url=t:1==e.isCommentPhoto?e.comment.file=t:1==e.isNewUserPhoto&&(e.newuser.picture_url=t),e.imgURI=t},function(e){alert("Error resolveNativePath"+e)})}n(t)},function(e){})},e.urlForImage=function(){var t="http://placehold.it/200x200";if(e.image){var n=e.image.substr(e.image.lastIndexOf("/")+1);t=cordova.file.dataDirectory+n}return t},e.scrollMe=function(e){v.hash(e);var t=w.$getByHandle("content");t.anchorScroll()},e.set_active_option=function(e){document.getElementById(e).className="option-active"},e.hide_special_divs=function(){document.getElementById("user-options-menu").style.display="none"},e.close_report_detail_modal=function(){D.checkNoModalIsOpen(),e.report_detail_id=null},e.locate=function(){o.getCurrentPosition().then(function(t){e.map.center.lat=t.coords.latitude,e.map.center.lng=t.coords.longitude,e.map.center.zoom=15,e.map.markers.now={lat:t.coords.latitude,lng:t.coords.longitude,message:"You Are Here",focus:!0,draggable:!1}},function(e){})},e.addMapControls=function(){document.getElementById("map_crosshair").style.display="block",document.getElementById("map_crosshair_button").style.display="block"},e.changeUserLocationPin=function(t,n,o){if(e.online_user_geo_array[o]){layer=e.online_user_geo_array[o];var a=new L.LatLng(t,n);layer.setLatLng(a)}},e.hideOffScreenPins=function(){s.getMap().then(function(t){var n=t.getBounds();e.usersVisible=[],e.online_user_geo_array.forEach(function(o,a){var i=n.contains(o.getLatLng());i?i&&(t.addLayer(o),e.usersVisible.push(o.feature)):t.removeLayer(o)})})},e.removeAllPins=function(){s.getMap().then(function(t){e.usersVisible=[],e.online_user_geo_array&&e.online_user_geo_array.forEach(function(e,n){t.removeLayer(e)})})},e.loadPinsLayer=function(){document.getElementById("spinner").style.display="block",s.getMap().then(function(t){u.getAll().then(function(n){if(null==u.lastPinsResponse||u.lastPinsResponse&&u.lastPinsResponse!=n){e.online_user_geo_array&&(e.usersVisible=[],e.online_user_geo_array.forEach(function(e,n){t.removeLayer(e)})),u.lastPinsResponse=n,e.reportsByState={};var o=n.data.features;e.online_users_geo=n.data.features,o.forEach(function(t){if(t.properties){var n=t.geometry.coordinates[0],o=t.geometry.coordinates[1];if(n&&o){var i=t.properties.Online_status,r=t.properties.Icon;"anon"==r&&(r="./img/icon-user-anonymous.png");var s="./img/generic_pin_red.png";"Online"==i&&(s="./img/generic_pin_green.png");var l=L.icon({shadowUrl:s,shadowSize:[100,138],shadowAnchor:[44,138],iconUrl:r,iconSize:[46,46],iconAnchor:[24,120],popupAnchor:[0,-138]}),c=L.marker([o,n],{icon:l});if(c.feature=t,e.online_user_geo_array[c.feature.properties.Uid]=c,t.properties){var u=t.properties.Uid,d=t.properties.Name,p=t.properties.InterestedIn,m=t.properties.Status,g=t.properties.Gender;_.uid&&_.uid==u&&(d="TÃº: "+d);var f=e.timeConverter(t.properties.LocationTimeStamp);html='<a class="name_inside_marker_popup"><p>'+d+"</p>",html=html+'<p class="gender_inside_marker_popup">'+g+"</p>",html=html+'<p><img class="img_inside_marker_popup" src="'+r+'"/></p>',html=html+'<p class="status_inside_marker_popup">"'+m+'"</p>',html=html+'<p class="interested_inside_marker_popup">Interesad@ en '+p+"</p>",html=html+'<p class="lastupdate_inside_marker_popup">'+i+"</p>",html=html+'<p class="lastupdate_inside_marker_popup">'+f+"</p>",_.uid&&_.uid==u||(html=html+'<p class="message_icon_inside_marker_popup"><img ng-click="send_message_to('+u+');" src="./img/message_icon.png" />',html=html+'<img ng-click="openInvitationsModal('+u+');" src="./img/drink_icon.png" /></p>'),html+="</a>";var h=a(html)(e);c.bindPopup(h[0])}}}}),document.getElementById("spinner").style.display="none",e.hideOffScreenPins()}e.checkTalkStatus()})})},e.checkTalkStatus=function(){R.takeIfAvailable("can_talk")&&d.checkWhoCanTalk(_.name,_.password).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(n.forEach(function(e){d.canTalkToUsers["uid-"+e]=1}),R.makeAvailableAgain("can_talk"))})},e.key_press=function(e,t){var n=e.keyCode;if("private_chat"==t&&13==n)try{null===cordova||cordova&&cordova.plugins.Keyboard&&cordova.plugins.Keyboard.close()}catch(o){}},e.send_message_to=function(t){if(R.takeIfAvailable("open-modal"))if(document.getElementById("spinner").style.display="block",_.uid)d.checkWhoCanTalk(_.name,_.password).then(function(n){var o=e.getObjectDataFromResponse(n);if(!o.Status||"error"!=o.Status)if(o.forEach(function(e){d.canTalkToUsers["uid-"+e]=1}),e.canTalkToUser(t))e.chat=new Array,e.chat.other_user=new Array,e.chat.other_user.uid=t,e.chat.messages=new Array,e.chat.new_text_message="",d.getUserInfo(t).then(function(n){e.getObjectDataFromResponse(n).Photo?e.chat.other_user.picture_url=e.getObjectDataFromResponse(n).Photo:e.chat.other_user.picture_url="./img/icon-user-anonymous.png",e.chat.other_user.username=e.getObjectDataFromResponse(n).Name;var o=_.uid;d.getAllMessagesToUser(_.name,_.password,t,o).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.chat.messages=e.getObjectDataFromResponse(t)),e.myIntervals.privateMessage&&h.cancel(e.myIntervals.privateMessage),e.myIntervals.privateMessage=h(function(){d.getAllMessagesToUser(_.name,_.password,e.chat.other_user.uid,_.uid).then(function(t){var n=e.getObjectDataFromResponse(t);if(!n.Status||"error"!=n.Status){e.chat.messages=e.getObjectDataFromResponse(n);var o=e.chat.messages[e.chat.messages.length-1].nid;e.scrollMe("message-"+o)}})},3e3),i.fromTemplateUrl("templates/private_chat.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){document.getElementById("spinner").style.display="none",document.getElementById("user-options-menu").style.display="none",D.checkNoModalIsOpen(),D.activeModal=t,document.getElementById("foot_bar").style.display="none",D.activeModal.show(),R.makeAvailableAgain("open-modal");var n=e.chat.messages[e.chat.messages.length-1].nid;e.scrollMe("message-"+n)})})});else{R.makeAvailableAgain("open-modal"),document.getElementById("spinner").style.display="none";var a=r.alert({title:"Invita algo de tomar",template:"Debe tener al menos una invitaciÃ³n a un trago aceptada entre usted y esta persona para poder hablar."});a.then(function(e){})}});else{document.getElementById("spinner").style.display="none",R.makeAvailableAgain("open-modal");var n=r.alert({title:"Inicie sesiÃ³n o cree una nueva cuenta",template:"Debe estar logueado para poder enviar y recibir mensajes."});n.then(function(e){})}},e.checkIfCanReplyInvitation=function(e){return!(!_.uid||_.uid==e.uid||"Enviada"!=e.status&&"Recibida"!=e.status)},e.checkIfWaitingReplyFromInvitation=function(e){return!(!_.uid||_.uid!=e.uid||"Enviada"!=e.status&&"Recibida"!=e.status)},e.getDrinkCostByNid=function(t){var n=0;return e.invitation.available_drinks&&e.invitation.available_drinks.forEach(function(e){e.Nid==t&&(n=e.Credits)}),n},e.acceptInvitation=function(t){e.send_invitation_response("Aceptada",t),e.invitation.other_user.talk=!0},e.refuseInvitation=function(t){e.send_invitation_response("Rechazada",t)},e.canTalkToUser=function(e){if(_.uid)return null!=d.canTalkToUsers["uid-"+e]&&1==d.canTalkToUsers["uid-"+e]},e.send_invitation_response=function(t,n){var o=document.getElementById("error_container");if(o.style.display="none",null==n)o.style.display="block",o.innerHTML="Hubo un error. No se encuentra el ID de invitaciÃ³n";else{e.getDrinkCostByNid(e.invitation.selected_drink),e.invitation.user_credits;R.takeIfAvailable("submit-form")&&(document.getElementById("spinner-inside-modal").style.display="block",p.sendDrinkInvitationResponse(t,_.name,_.password,n,_.uid).then(function(t){R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none";var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status&&(o.style.display="block",o.innerHTML=n.Message)}))}},e.send_invitation=function(){var t=document.getElementById("error_container");if(null==e.invitation.selected_drink)t.style.display="block",t.innerHTML="Debe seleccionar una bebida a invitar";else{var n=e.getDrinkCostByNid(e.invitation.selected_drink),o=e.invitation.user_credits;parseFloat(n)>parseFloat(o)?(t.style.display="block",t.innerHTML="CrÃ©ditos insuficientes. Para poder invitar esta bebida debe comprar mÃ¡s crÃ©ditos"):R.takeIfAvailable("submit-form")&&(document.getElementById("spinner-inside-modal").style.display="block",p.sendDrinkInvitationToUser(e.invitation.selected_drink,e.invitation.other_user.uid,_.uid,_.name,_.password).then(function(n){R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none";var o=e.getObjectDataFromResponse(n);o.Status&&"error"==o.Status?(t.style.display="block",t.innerHTML=o.Message):(e.invitation.user_credits=o.NewCredits,e.invitation.selected_drink=null,d.canTalkToUsers["uid-"+e.invitation.other_user.uid]=null)}))}},e.openInvitationsModal=function(t){if(R.takeIfAvailable("open-modal"))if(document.getElementById("spinner").style.display="block",_.uid)e.invitation=new Array,e.invitation.response=null,e.invitation.other_user=new Array,e.invitation.other_user.uid=t,e.invitation.invitations=new Array,e.invitation.available_drinks=new Array,e.invitation.selected_drink=null,d.getUserInfo(t).then(function(t){e.getObjectDataFromResponse(t).Photo?e.invitation.other_user.picture_url=e.getObjectDataFromResponse(t).Photo:e.invitation.other_user.picture_url="./img/icon-user-anonymous.png",e.invitation.other_user.username=e.getObjectDataFromResponse(t).Name,p.getAllDrinksAvailable(_.name,_.password).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.invitation.available_drinks=n.Drinks,e.invitation.user_credits=n.UserCredits),p.getAllInvitationsWithUser(_.name,_.password,e.invitation.other_user.uid,_.uid).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.invitation.invitations=n),d.checkWhoCanTalk(_.name,_.password).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||n.forEach(function(e){d.canTalkToUsers["uid-"+e]=1})}),e.myIntervals.drinkInvitation&&h.cancel(e.myIntervals.drinkInvitation),e.myIntervals.drinkInvitation=h(function(){p.getAllInvitationsWithUser(_.name,_.password,e.invitation.other_user.uid,_.uid).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.invitation.invitations=e.getObjectDataFromResponse(n)),d.checkWhoCanTalk(_.name,_.password).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||n.forEach(function(e){d.canTalkToUsers["uid-"+e]=1})})})},3e3),i.fromTemplateUrl("templates/drink_invitation.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){document.getElementById("spinner").style.display="none",document.getElementById("user-options-menu").style.display="none",D.checkNoModalIsOpen(),D.activeModal=e,document.getElementById("foot_bar").style.display="none",D.activeModal.show(),R.makeAvailableAgain("open-modal")})})})});else{document.getElementById("spinner").style.display="none",R.makeAvailableAgain("open-modal");var n=r.alert({title:"Inicie sesiÃ³n o cree una nueva cuenta",template:"Debe estar logueado para poder enviar y recibir invitaciones."});n.then(function(e){})}},e.close_message_modal=function(){e.myIntervals.privateMessage&&h.cancel(e.myIntervals.privateMessage),e.myIntervals.drinkInvitation&&h.cancel(e.myIntervals.drinkInvitation),document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.close_invitation_modal=function(){e.myIntervals.privateMessage&&h.cancel(e.myIntervals.privateMessage),e.myIntervals.drinkInvitation&&h.cancel(e.myIntervals.drinkInvitation),document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.send_message_ok=function(){R.takeIfAvailable("submit-form")&&(e.chat.new_text_message?d.sendTextMessageToUser(e.chat.new_text_message,e.chat.other_user.uid,_.uid,_.name,_.password).then(function(t){R.makeAvailableAgain("submit-form"),document.getElementById("message_text_area").innerHTML="",e.chat.new_text_message="",d.getAllMessagesToUser(_.name,_.password,e.chat.other_user.uid,_.uid).then(function(t){e.chat.messages=e.getObjectDataFromResponse(t)})}):R.makeAvailableAgain("submit-form"))},e.getNameFromUid=function(t){return _.uid==t?_.name:e.chat.other_user.uid==t?e.chat.other_user.username:void 0},e.getNameFromUidInvitation=function(t){return _.uid==t?_.name:e.invitation.other_user.uid==t?e.invitation.other_user.username:void 0},e.timeConverter=function(e){var t=new Date(1e3*e),n=t.getFullYear(),o=t.getMonth();o<10&&(o="0"+o);var a=t.getDate();a<10&&(a="0"+a);var i=t.getHours();i<10&&(i="0"+i);var r=t.getMinutes();r<10&&(r="0"+r);var s=(t.getSeconds(),a+"/"+o+"/"+n+" "+i+":"+r);return s},e.model=[],e.externalModel=[],e.selectedItems=[],e.preselectedSearchItems=[],e.clickedValueModel="",e.removedValueModel="",e.itemsRemoved=function(t){e.removedValueModel=t},e.user_options=function(){var t=document.getElementById("user-options-menu");if("block"==t.style.display)t.style.display="none";else{var n=_.name;null==n?e.show_anonymous_menu():e.show_user_menu()}},e.show_anonymous_menu=function(){var t=document.getElementById("user-options-menu"),n="<div id='auth_options'><div class='nonauth-link' ng-click='show_login_modal()'>Iniciar sesiÃ³n</div>";n+="<div class='nonauth-link' ng-click='show_sign_up_modal()'>Registrarse</div></div>",t.innerHTML=n,a(t)(e),t.style.height="120px",t.style.width="150px",t.style.display="block"},e.show_user_menu=function(){var t=document.getElementById("user-options-menu"),n=_.name+"<div id='auth_options'><div class='user-logged-link' ng-click='show_edit_profile_modal()'>Mi perfil</div>";n+="<div class='user-logged-link' ng-click='sign_out()'>Cerrar sesiÃ³n</div></div>",t.innerHTML=n,a(t)(e),t.style.height="220px",t.style.width="200px",t.style.display="block"},e.create_field_array=function(e,t,n){var o=new Array;return o.name=e,o.type=t,o.value=n,o},e.create_field_array_with_twoFields=function(e,t,n,o){var a=new Array;return a.name=e,a.type=t,a.value=n,a.secondValue=o,a},e.fix_fb_image_link=function(e){if(e.indexOf("http://graph.facebook.com")>=0){var t=e.split("http://graph.facebook.com"),n="http://graph.facebook.com"+t[1];return n}return e},e.log_in=function(t,n){if(R.takeIfAvailable("submit-form"))if(I.isOnline()){document.getElementById("spinner-inside-modal").style.display="block";var o=new Array;o.push(e.create_field_array("Usuario","notNull",t)),o.push(e.create_field_array("ContraseÃ±a","notNull",n)),y.check_fields(o,"error_container")?m.log_in(t,n).then(function(t){y.http_response_is_successful(t,"error_container")?(photo=e.fix_fb_image_link(e.getObjectDataFromResponse(t).Photo),"anon"==photo&&(photo="url(./img/icon-user-anonymous.png)"),_.save_user_data(e.getObjectDataFromResponse(t).Name,e.nonauth.password,photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),g.saveUser(e.getObjectDataFromResponse(t).Name,e.nonauth.password,photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),e.set_user_picture(1),document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form"),e.close_login_modal(),e.sendUserLocation()):(R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none")},function(e){document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form"),y.show_error_message("error_container",e.statusText)}):(document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form"))}else R.makeAvailableAgain("submit-form"),k.show_alert("Sin conexiÃ³n a internet","Para iniciar sesiÃ³n debe estar conectado a internet")},e.log_in_background=function(t,n){m.log_in(t,n).then(function(t){return y.http_response_is_successful_ajax(t)?(photo=e.fix_fb_image_link(e.getObjectDataFromResponse(t).Photo),"anon"==photo&&(photo="url(./img/icon-user-anonymous.png)"),_.save_user_data(e.getObjectDataFromResponse(t).Name,n,photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),g.saveUser(e.getObjectDataFromResponse(t).Name,n,photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),e.set_user_picture(1),e.sendUserLocation(),1):0},function(e){return 0})},e.sendUserLocation=function(){if(R.takeIfAvailable("submit-location"))if(1==_.show_location){var t={timeout:1e4,enableHighAccuracy:!0};o.getCurrentPosition(t).then(function(t){u.sendUserLocation(t.coords.latitude,t.coords.longitude,_.name,_.password,_.uid).then(function(n){return y.http_response_is_successful_ajax(n)?(c.save_last_user_position(t.coords.latitude,t.coords.longitude),e.loadPinsLayer(),R.makeAvailableAgain("submit-location"),1):(R.makeAvailableAgain("submit-location"),0)})},function(t){return R.makeAvailableAgain("submit-location"),e.loadPinsLayer(),0})}else R.makeAvailableAgain("submit-location"),e.loadPinsLayer()},e.sign_out=function(){_.erase_user_data(),g.eraseUser(),document.getElementById("spinner").style.display="none",e.set_user_picture(0),document.getElementById("user-options-menu").style.display="none"},e.show_edit_profile_modal=function(){R.takeIfAvailable("open-modal")&&(document.getElementById("spinner").style.display="block",e.newuser=new Array,e.newuser.email=_.email,e.newuser.gender=_.gender,e.newuser.username=_.name,e.newuser.interested=_.interested,e.newuser.status=_.status,e.newuser.show_location=_.show_location,e.actual_photo=_.picture_url,null!=e.actual_photo||(e.actual_photo="./img/icon-user-anonymous.png"),"url(./img/icon-user-anonymous.png)"==e.actual_photo&&(e.actual_photo="./img/icon-user-anonymous.png"),D.checkNoModalIsOpen(),S.isMobileDevice()?i.fromTemplateUrl("templates/edit_profile_with_photo.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){document.getElementById("spinner").style.display="none",document.getElementById("user-options-menu").style.display="none",D.activeModal=e,document.getElementById("foot_bar").style.display="none",D.activeModal.show(),R.makeAvailableAgain("open-modal")}):i.fromTemplateUrl("templates/edit_profile_with_photo_desktop.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){document.getElementById("spinner").style.display="none",document.getElementById("user-options-menu").style.display="none",D.activeModal=e,document.getElementById("foot_bar").style.display="none",D.activeModal.show(),R.makeAvailableAgain("open-modal")}))},e.readURL=function(t,n){if(t.files&&t.files[0]){1==n?e.newuser.picture_url=t.files[0]:2==n?e.comment.photo=t.files[0]:e.report.file=t.files[0];var o=new FileReader;o.onload=function(e){document.getElementById("myImage").src=e.target.result},o.readAsDataURL(t.files[0])}},e.close_edit_profile_modal=function(){document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.edit_profile_ok=function(){e.edit_profile()},e.getObjectDataFromResponse=function(e){return e.data?e.data:e},e.edit_profile=function(){if(R.takeIfAvailable("submit-form"))if(I.isOnline()){document.getElementById("spinner-inside-modal").style.display="block",e.newuser.password=_.password;var t=m.edit_user(e.newuser);null!=e.newuser.picture_url&&""!=e.newuser.picture_url&&S.isMobileDevice()?t.then(function(t){var n=JSON.parse(t.response);y.http_data_response_is_successful(n,"error_container")?(n=e.getObjectDataFromResponse(n),_.save_user_data(n.Name,e.newuser.password,n.Photo,n.ShowLocation,n.Uid,n.Estado,n.Gender,n.InterestedIn),g.saveUser(n.Name,e.newuser.password,n.Photo,n.ShowLocation,n.Uid,n.Estado,n.Gender,n.InterestedIn),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none",e.close_edit_profile_modal(),e.check_user_logged()):(R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none")},function(e){var t="CÃ³digo: "+e.code;t=t+" Origen: "+e.source,t=t+" Destino: "+e.target,t=t+" http_status: "+e.http_status,t=t+" Body: "+e.body,t=t+" Exception: "+e.exception,y.show_error_message("error_container","Hubo un error en el envÃ­o: "+t),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none"},function(t){f(function(){e.uploadProgress=t.loaded/t.total*100,document.getElementById("sent_label").innerHTML="Enviado: "+Math.round(e.uploadProgress)+"%"})}):t.success(function(t){document.getElementById("sent_label").innerHTML="Enviado: 100%",y.http_response_is_successful(t,"error_container")?(_.save_user_data(e.getObjectDataFromResponse(t).Name,e.newuser.password,e.getObjectDataFromResponse(t).Photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),g.saveUser(e.getObjectDataFromResponse(t).Name,e.newuser.password,e.getObjectDataFromResponse(t).Photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form"),e.close_edit_profile_modal(),e.check_user_logged()):(R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none")}).error(function(e,t,n,o){y.show_error_message("error_container",t),document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form")})}else R.makeAvailableAgain("submit-form"),k.show_alert("Sin conexiÃ³n a internet","Para editar su perfil debe estar conectado a internet")},e.show_login_modal=function(){R.takeIfAvailable("open-modal")&&(e.nonauth=new Array,e.nonauth.user="",e.nonauth.password="",D.checkNoModalIsOpen(),i.fromTemplateUrl("templates/log_in.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){e.hide_special_divs(),D.activeModal=t,R.makeAvailableAgain("open-modal"),document.getElementById("foot_bar").style.display="none",D.activeModal.show()}))},e.login_ok=function(){e.log_in(e.nonauth.user,e.nonauth.password)},e.close_login_modal=function(){document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.show_sign_up_modal=function(){R.takeIfAvailable("open-modal")&&(e.newuser=new Array,e.newuser.email="",e.newuser.password="",e.newuser.fullname="",e.newuser.id_doc="",e.newuser.telephone="",e.newuser.photo="",D.checkNoModalIsOpen(),S.isMobileDevice()?i.fromTemplateUrl("templates/sign_up.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){e.hide_special_divs(),D.activeModal=t,R.makeAvailableAgain("open-modal"),document.getElementById("foot_bar").style.display="none",D.activeModal.show()}):i.fromTemplateUrl("templates/sign_up_desktop.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){e.hide_special_divs(),D.activeModal=t,R.makeAvailableAgain("open-modal"),document.getElementById("foot_bar").style.display="none",D.activeModal.show()}))},e.close_sign_up_modal=function(){document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.sign_up=function(){if(R.takeIfAvailable("submit-form"))if(I.isOnline()){document.getElementById("spinner-inside-modal").style.display="block";new Array;null!=e.newuser.picture_url&&""!=e.newuser.picture_url&&S.isMobileDevice()?m.create_user(e.newuser).success(function(t,n,o,a){document.getElementById("sent_label").innerHTML="Enviado: 100%",y.http_data_response_is_successful(t,"error_container")?(t=e.getObjectDataFromResponse(t),_.save_user_data(t.name,t.email,e.newuser.password,t.identity_document,t.phone,t.picture_url),_.save_user_data(t.Name,e.newuser.password,t.Photo,t.ShowLocation,t.Uid,t.Estado,t.Gender,t.InterestedIn),g.saveUser(t.Name,password,t.Photo,t.ShowLocation,t.Uid,t.Estado,t.Gender,t.InterestedIn),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none",e.close_edit_profile_modal(),e.check_user_logged()):(R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none")}).error(function(e,t,n,o){y.show_error_message("error_container",t),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none"}):m.create_user(e.newuser).then(function(t){if(y.http_response_is_successful(t,"error_container")){_.save_user_data(e.getObjectDataFromResponse(t).Name,e.newuser.password,e.getObjectDataFromResponse(t).Photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),g.saveUser(e.getObjectDataFromResponse(t).Name,e.newuser.password,e.getObjectDataFromResponse(t).Photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none",e.close_sign_up_modal();var n=r.alert({title:"Usuario creado con Ã©xito",template:e.getObjectDataFromResponse(t).message});n.then(function(e){}),e.check_user_logged()}else R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none"},function(e){R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none",y.show_error_message("error_container",e.statusText)})}else R.makeAvailableAgain("submit-form"),k.show_alert("Sin conexiÃ³n a internet","Para iniciar registrarse debe estar conectado a internet")},e.sign_up_ok=function(){e.sign_up()},e.check_user_logged=function(){var t=_.name;if(null==t){var n=g.getUser();n.then(function(t){null!=t.name&&""!=t.name&&"undefined"!=t.name?e.log_in_background(t.name,t.password):e.set_user_picture(0)})["catch"](function(t){e.set_user_picture(0);
})}else null==_.picture_url||""==_.picture_url?e.set_user_picture(0):e.set_user_picture(1)},e.set_offline_user=function(){var t=_.name;if(null==t){var n=g.getUser();n.then(function(t){null!=t.name&&""!=t.name&&"undefined"!=t.name?_.save_user_data(t.name,t.password,t.picture_url,t.show_location):e.set_user_picture(0)})["catch"](function(t){e.set_user_picture(0)})}else null==_.picture_url||""==_.picture_url?e.set_user_picture(0):e.set_user_picture(1)},e.set_user_picture=function(t){document.getElementById("user_picture");0==t?e.user_cached_image="./img/icon-user-anonymous.png":null!=_.picture_url&&""!=_.picture_url?e.user_cached_image=_.picture_url:e.user_cached_image="./img/icon-user-anonymous.png"},e.find_me=function(){e.set_active_option("button-find-me"),e.hide_special_divs();var t={timeout:1e4,enableHighAccuracy:!0};o.getCurrentPosition(t).then(function(t){e.map.center.lat=t.coords.latitude,e.map.center.lng=t.coords.longitude,c.save_new_report_position(t.coords.latitude,t.coords.longitude),I.isOnline()?e.map.center.zoom=18:e.map.center.zoom=16,e.map.markers.now={lat:t.coords.latitude,lng:t.coords.longitude,message:"<p align='center'>Te encuentras aquÃ­ <br/> <a ng-click='new_report(1);'>Iniciar reporte en tu posiciÃ³n actual</a></p>",focus:!0,draggable:!1,getMessageScope:function(){return e}}},function(t){e.openCouncilSelector()})}}]),pmb_im.services.factory("AuthService",["$http","$cordovaFileTransfer","ConfigService","ValidationService",function(e,t,n,o){var a=n.baseURL+"/api/";return{log_in:function(t,n){var o="user="+t+"&password="+n;return e.post(a+"login",o,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sign_out:function(t,n){return e.get(a+"sign_out",{withCredentials:!0,params:{password_sign_in:t,email:n}})},create_user:function(n){if(n.picture_url&&o.isMobileDevice()){var i={fileKey:"photo",withCredentials:!0,params:{user:n.username,password:n.password,email:n.email,gender:n.gender,interested:n.interested,status:n.status,show_location:n.show_location}},r=!0;return t.upload(a+"create_user",n.picture_url,i,r)}if(n.picture_url){var s=new FormData;return s.append("photo",n.picture_url),s.append("user",n.username),s.append("password",n.password),s.append("email",n.email),s.append("gender",n.gender),s.append("interested",n.interested),s.append("status",n.status),s.append("show_location",n.show_location),e.post(a+"create_user",s,{headers:{"Content-Type":void 0},transformRequest:angular.identity})}var l="user="+n.username+"&password="+n.password+"&email="+n.email+"&gender="+n.gender;return l=l+"&interested="+n.interested+"&status="+n.status+"&show_location="+n.show_location,e.post(a+"create_user",l,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},password_recovery:function(t){return e.get(a+"forgot_password",{params:{login_email:t}})},password_change:function(t,n,o,i){var r="email="+t+"&password_sign_in="+n+"&new_password="+o+"&confirm="+i;return e.post(a+"change_password",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},edit_user:function(n){if(n.picture_url&&o.isMobileDevice()){var i={fileKey:"photo",withCredentials:!0,params:{user:n.username,password:n.password,email:n.email,gender:n.gender,interested:n.interested,status:n.status,show_location:n.show_location}},r=!0;return t.upload(a+"edit_profile",n.picture_url,i,r)}var s="user="+n.username+"&password="+n.password+"&email="+n.email+"&gender="+n.gender;if(s=s+"&interested="+n.interested+"&status="+n.status+"&show_location="+n.show_location,n.picture_url){var l=new FormData;return l.append("photo",n.picture_url),l.append("user",n.username),l.append("password",n.password),l.append("email",n.email),l.append("gender",n.gender),l.append("interested",n.interested),l.append("status",n.status),l.append("show_location",n.show_location),e.post(a+"edit_profile",l,{headers:{"Content-Type":void 0},transformRequest:angular.identity})}return e.post(a+"edit_profile",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),pmb_im.services.factory("ConfigService",["$http",function(e){var t={};return t.baseURL="http://tomamosuna.info",ionic.Platform.isWebView()?t.baseURL="http://tomamosuna.info":t.baseURL="/backend",t.AppName="Â¿Tomamos una?",t.baseCobrand="/cobrands/pormibarrio",t}]),pmb_im.services.factory("ConnectivityService",["$cordovaNetwork",function(e){return{isOnline:function(){return!0},isOffline:function(){return!1}}}]),pmb_im.services.factory("DBService",["$q",function(e){function t(e,t,o,a,i,r,s,l){var c={_id:"user-logged",name:e,password:t,picture_url:o,show_location:a,uid:i,status:r,gender:s,interested:l};n().then(function(e){return c._rev=e._rev,m.put(c)})["catch"](function(e){return m.put(c)})}function n(){return m.get("user-logged")}function o(){m.get("user-logged").then(function(e){return m.remove(e)})}function a(){return m=new PouchDB("tomamosuna_local_db")}function i(e){var t=new Date,n="report_"+t.getFullYear()+(t.getMonth()+1)+t.getDate()+t.getMilliseconds();return e._id=n,m.put(e)}function r(e){return m.put(e)}function s(){return m.get("categories-list")}function l(e){s().then(function(t){return e._rev=t._rev,m.put(e)})["catch"](function(t){return e._id="categories-list",m.put(e)})}function c(e){return m.get(e)}function u(){return m.allDocs({include_docs:!0,attachments:!1,startkey:"report_",endkey:"report_ï¿¿"})}function d(e){m.get(e).then(function(e){return m.remove(e)})}function p(e){return m.remove(e)}var m;return{initDB:a,saveUser:t,getUser:n,eraseUser:o,saveReport:i,getReport:c,getAllReports:u,updateReport:r,deleteReport:d,deleteGivenReport:p,getCategories:s,saveCategories:l}}]),pmb_im.services.factory("DrinkService",["$http","ConfigService",function(e,t){var n=t.baseURL+"/api/";return{getAllDrinksAvailable:function(t,o){var a="user="+t+"&password="+o+"&hash_id="+Math.random();return e.post(n+"get_possible_drinks",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getAllInvitationsWithUser:function(t,o,a,i){var r="user="+t+"&password="+o+"&hash_id="+Math.random();return r=r+"&uid="+a+"&author_uid="+i,e.post(n+"get_invitations_between_users",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sendDrinkInvitationToUser:function(t,o,a,i,r){var s="user="+i+"&password="+r+"&drink_nid="+t+"&destination_uid="+o+"&author_uid="+a+"&hash_id="+Math.random();return e.post(n+"send_drink_invitation",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sendDrinkInvitationResponse:function(t,o,a,i,r){var s="response="+t+"&user="+o+"&password="+a+"&invitation_nid="+i+"&destination_uid="+r+"&hash_id="+Math.random();return e.post(n+"invitation_response",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),pmb_im.services.factory("ErrorService",["$http","$ionicPopup","ValidationService",function(e,t,n){return{http_response_is_successful:function(e,t){var n=document.getElementById(t);return e.data&&"success"==e.data.Status||"success"==e.Status?(n.style.display="none",!0):(e.data?n.innerHTML="<h3>"+e.data.Message+"</h3>":n.innerHTML="<h3>"+e.Message+"</h3>",n.style.display="block",!1)},http_response_is_successful_ajax:function(e){return 0!=e.data.result},http_response_is_successful_popup:function(e){if(0==e.data.result){var n=t.alert({title:"Error",template:e.data.message});return n.then(function(e){return!1}),!1}return!0},http_data_response_is_successful:function(e,t){var n=document.getElementById(t);return"success"!=e.Status?(n.innerHTML="<h3>"+e.Message+"</h3>",n.style.display="block",!1):(n.style.display="none",!0)},http_data_response_is_successful_ajax:function(e){return 0!=e.result},show_error_message:function(e,t){var n=document.getElementById(e);return n.innerHTML="<h3>"+t+"</h3>",n.style.display="block",!1},show_error_message_popup:function(e){var n=t.alert({title:"Error",template:e});return n.then(function(e){return!1}),!1},check_fields:function(e,t){var o="";if(e.forEach(function(e){"notNull"==e.type&&(n.validate_not_empty(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no puede estar vacÃ­o.</h3>')),"email"==e.type&&(n.validate_email(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no es una direcciÃ³n de correo vÃ¡lida.</h3>')),"iddoc_uy"==e.type&&(n.validate_iddoc_uy(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no es una cÃ©dula uruguaya vÃ¡lida.</h3>')),"two_words"==e.type&&(n.validate_two_words(e.value)||(o=o+'<h3>- El campo "'+e.name+'" debe contener al menos dos palabras.</h3>')),"equalsTo"==e.type&&(n.validate_equalsTo(e.value,e.secondValue)||(o=o+'<h3>- Los campos "'+e.name+'" no coinciden.</h3>'))}),""==o)return!0;var a=document.getElementById(t);return a.innerHTML=o,a.style.display="block",!1}}}]),pmb_im.services.factory("Loader",["$ionicLoading","$timeout","$ionicPopup",function(e,t,n){var o={showLoading:function(t){t=t||"Loading...",e.show({template:t})},hideLoading:function(){e.hide()},toggleLoadingWithMessage:function(e,n){var o=this;o.showLoading(e),t(function(){o.hideLoading()},n||3e3)},confirmPopup:function(e,t){var o=n.confirm({title:e,template:t});return o},showAlert:function(e,t){var o=n.alert({title:e,template:t});return o}};return o}]),pmb_im.services.factory("LocationsService",[function(){var e={};return e.initial_lat="",e.initial_lng="",e.last_user_lat="",e.last_user_lng="",e.council_modal=null,e.selected_council=null,e.selectCouncil=function(t){e.selected_council=t},e.save_initial_position=function(t){e.initial_lat=t.coords.latitude,e.initial_lng=t.coords.longitude},e.save_last_user_position=function(t,n){e.last_user_lat=t,e.last_user_lng=n},e.savedLocations=[],e}]),pmb_im.services.factory("MapService",["leafletData","$compile",function(e,t){proj4.defs("EPSG:32721","+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs");var n={};return n.goToPlace=function(n,o,a,i){var r={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::32721"}},features:[{type:"Feature",geometry:{type:"Point",coordinates:[o,a]},properties:{nombre:n}}]};e.getMap().then(function(e){var n,o=L.Proj.geoJson(r,{pointToLayer:function(e,o){n=o;var a="<p align='center'>"+e.properties.nombre+" <br/> <a ng-click='new_report_from_latlon("+n.lat+","+n.lng+");'>Iniciar reporte aquÃ­</a></p>",r=t(a)(i);return L.marker(o).bindPopup(r[0])}});o.addTo(e),e.setView(n,18),o.openPopup()})},n.centerMapOnCoords=function(t,n,o){e.getMap().then(function(e){e.setView(new L.LatLng(t,n),o)})},n}]),pmb_im.services.factory("MessageService",["$http","leafletData","ConfigService",function(e,t,n){function o(e){angular.extend(this,e)}var a=(n.baseURL+"/sites/tomamos_una/files/json/online_users_geo.json",n.baseURL+"/api/");return o.getAllMessagesToUser=function(t,n,o,i){var r="user="+t+"&password="+n+"&author_uid="+i+"&uid="+o+"&hash_id="+Math.random();return e.post(a+"get_all_messages_to_user",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.getUserInfo=function(t){return e.get(a+"get_user_info",{cache:!1,params:{uid:t,hash_id:Math.random()}})},o.sendTextMessageToUser=function(t,n,o,i,r){var s="user="+i+"&password="+r+"&text="+t+"&destination_uid="+n+"&author_uid="+o;return e.post(a+"send_text_message",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.checkWhoCanTalk=function(t,n){var o="user="+t+"&password="+n;return e.post(a+"check_user_talk",o,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.canTalkToUsers=new Array,o.current={},o.build=function(e){return new o(e)},o}]),pmb_im.services.factory("ModalService",[function(){var e={};return e.activeModal=null,e.checkNoModalIsOpen=function(){e.activeModal&&(e.activeModal.hide(),e.activeModal.remove())},e}]),pmb_im.services.factory("NotificationService",["$http","ConfigService",function(e,t){var n=t.baseURL+"/api/";return{getUnrecivedNotifications:function(t,o){var a="user="+t+"&password="+o+"&hash_id="+Math.random();return e.post(n+"get_unrecived_notifications",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},dontShowNotificationAgain:function(t,o,a){var i="user="+t+"&password="+o+"&nid="+a+"&hash_id="+Math.random();return e.post(n+"dont_show_notification_again",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),pmb_im.services.factory("PinService",["$http","leafletData","ConfigService",function(e,t,n){function o(e){angular.extend(this,e)}var a=n.baseURL+"/sites/tomamos_una/files/json/users_geo.json",i=n.baseURL+"/api/";return o.getAll=function(){return e.get(a,{cache:!1,params:{hash_id:Math.random()}})},o.sendUserLocation=function(t,n,o,a,r){var s="user="+o+"&password="+a+"&lat="+t+"&lon="+n+"&uid="+r;return e.post(i+"send_user_position",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o._all=[],o.current={},o.lastPinsResponse=null,o.build=function(e){return new o(e)},o.prototype.setLatLng=function(e){this.lat=e.lat,this.lon=e.lng},o}]),pmb_im.services.factory("PopUpService",["$ionicPopup","ValidationService",function(e,t){return{show_alert:function(t,n){var o=e.alert({title:t,template:n});return o.then(function(e){return!0}),!0},confirmPopup:function(t,n){var o=e.confirm({title:t,template:n});return o},askForOneValuePopUp:function(n,o,a,i,r){$scope=n;var s=e.show({template:i+': <input type="text" id="one_value_popup"><div id="error_container_inside"></div>',title:o,subTitle:a,scope:$scope,buttons:[{text:"Cancelar"},{text:"<b>Enviar</b>",type:"button-positive",onTap:function(e){var n="",o=document.getElementById("one_value_popup").value;if("notNull"==r&&(t.validate_not_empty(o)||(n=n+'<h3>- El campo "'+i+'" no puede estar vacÃ­o.</h3>')),"email"==r&&(t.validate_email(o)||(n=n+'<h3>- El campo "'+i+'" no es una direcciÃ³n de correo vÃ¡lida.</h3>')),"iddoc_uy"==r&&(t.validate_iddoc_uy(o)||(n=n+'<h3>- El campo "'+i+'" no es una cÃ©dula uruguaya vÃ¡lida.</h3>')),"two_words"==r&&(t.validate_two_words(o)||(n=n+'<h3>- El campo "'+i+'" debe contener al menos dos palabras.</h3>')),""==n)return o;var a=document.getElementById("error_container_inside");a.innerHTML=n,a.style.display="block",e.preventDefault()}}]});return s}}}]),pmb_im.services.factory("SemaphoreService",[function(){var e={};return e.semaphores=new Array,e.semaphores["open-modal"]="available",e.semaphores["submit-form"]="available",e.semaphores["submit-location"]="available",e.semaphores.can_talk="available",e.takeIfAvailable=function(t){return"available"==e.semaphores[t]&&(e.semaphores[t]="occupied",!0)},e.makeAvailableAgain=function(t){return"occupied"==e.semaphores[t]&&(e.semaphores[t]="available",!0)},e}]),pmb_im.services.factory("locationAPI",["$http","$q","ApiImEndpoint","ApiDataEndpoint","ConfigService","LocationsService",function(e,t,n,o,a,i){var r="ubicacionesRestProd",s={};return s.searchLocationByStr=function(t){var n=a.baseURL+"/ajax/geocode?term="+i.selected_council+","+t;return e.get(n,{method:"GET",params:{}})},s.searchEsquinaByStr=function(t){var n=a.baseURL+"/ajax/geocode?term="+i.selected_council+","+t.calle+","+t.esquina;return e.get(n,{method:"GET",params:{}})},s.getLocationGeom=function(t){for(var o=n.url+"/"+r+s.getParamPathByTipo(t.tipo),a=0;a<t.pathParams.length;a++)o+="/"+t.pathParams[a];return e.get(baseURL).then(function(e){return e.data})},s.getLocationGeomPMB=function(t,n,o){var r=a.baseURL+"/ajax/geocode?term="+i.selected_council+","+t+","+n+","+o;return e.get(r)},s.getParamPathByTipo=function(e){var t={ESQUINA:"/esquina",DIRECCION:"/direccion"};return t[e]},s}]),pmb_im.services.factory("_",[function(){return window._}]),pmb_im.services.factory("UserService",["$http",function(e){var t={};return t.uid=null,t.name=null,t.email=null,t.password=null,t.picture_url="url(./img/icon-user-anonymous.png)",t.show_location=null,t.save_user_data=function(e,n,o,a,i,r,s,l){t.uid=i,t.name=e,t.password=n,t.picture_url=o,t.show_location=a,t.status=r,t.gender=s,t.interested=l},t.erase_user_data=function(){t.name=null,t.email=null,t.password=null,t.identity_document=null,t.phone=null,t.picture_url=null},t.get_user_data=function(){},t.add_photo=function(e){t.picture_url=e},t.isLogged=function(){return null!=t.name&&""!=t.name},t}]),pmb_im.services.factory("ValidationService",["$http","$ionicPopup",function(e,t){return{isMobileDevice:function(){return!!window.cordova},validate_not_empty:function(e){return null!=e&&"undefined"!=e&&""!=e},validate_two_words:function(e){if(null!=e&&"undefined"!=e&&""!=e){var t=e.split(" ").filter(function(e){return""!==e});return t.length>1}return!1},validate_equalsTo:function(e,t){return e==t},validate_email:function(e){if(null!=e&&"undefined"!=e&&""!=e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}return!1},validate_iddoc_uy:function(e){if(null!=e&&"undefined"!=e&&""!=e){e=e.replace(/\D/g,"");var t=e[e.length-1],n=0,o=0;if(e.length<=6)for(o=e.length;o<7;o++)e="0"+e;for(o=0;o<7;o++)n+=parseInt("2987634"[o])*parseInt(e[o])%10;var a;return a=n%10===0?0:10-n%10,t==a}return!1}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL2Ficy5jdHJsLmpzIiwiY29udHJvbGxlcnMvaW50cm8uY3RybC5qcyIsImNvbnRyb2xsZXJzL21hcC5jdHJsLmpzIiwic2VydmljZXMvYXV0aC5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2NvbmZpZy5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2Nvbm5lY3Rpdml0eS5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2RiLnNlcnZpY2VzLmpzIiwic2VydmljZXMvZHJpbmsuc2VydmljZXMuanMiLCJzZXJ2aWNlcy9lcnJvci5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2xvYWRlci5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2xvY2F0aW9uc1NlcnZpY2UuanMiLCJzZXJ2aWNlcy9tYXAuc2VydmljZXMuanMiLCJzZXJ2aWNlcy9tZXNzYWdlLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy9tb2RhbFNlcnZpY2UuanMiLCJzZXJ2aWNlcy9ub3RpZmljYXRpb24uc2VydmljZXMuanMiLCJzZXJ2aWNlcy9waW4uc2VydmljZS5qcyIsInNlcnZpY2VzL3BvcHVwLnNlcnZpY2VzLmpzIiwic2VydmljZXMvc2VtYXBob3JlLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy91YmljYWNpb25lcy5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL3VuZGVyc2NvcmUuc2VydmljZS5qcyIsInNlcnZpY2VzL3VzZXIuc2VydmljZXMuanMiLCJzZXJ2aWNlcy92YWxpZGF0aW9uLnNlcnZpY2VzLmpzIl0sIm5hbWVzIjpbInBtYl9pbSIsImNvbnRyb2xsZXJzIiwiYW5ndWxhciIsIm1vZHVsZSIsInNlcnZpY2VzIiwiYXBwIiwiY29uc3RhbnQiLCJ1cmwiLCJydW4iLCIkaW9uaWNQbGF0Zm9ybSIsIiRyb290U2NvcGUiLCIkY29yZG92YUtleWJvYXJkIiwiVkVSU0lPTiIsIndpbmRvdyIsInJlYWR5IiwiY29yZG92YSIsInBsdWdpbnMiLCJLZXlib2FyZCIsImhpZGVLZXlib2FyZEFjY2Vzc29yeUJhciIsImlvbmljIiwiUGxhdGZvcm0iLCJpc0Z1bGxTY3JlZW4iLCJTdGF0dXNCYXIiLCJzdHlsZURlZmF1bHQiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRjb21waWxlUHJvdmlkZXIiLCIkaW9uaWNDb25maWdQcm92aWRlciIsImRlYnVnSW5mb0VuYWJsZWQiLCJzdGF0ZSIsImNhY2hlIiwiYWJzdHJhY3QiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJ2aWV3cyIsIm1lbnVDb250ZW50Iiwib3RoZXJ3aXNlIiwiJHNjb3BlIiwiJHN0YXRlIiwiJGNvcmRvdmFHZW9sb2NhdGlvbiIsIiRzdGF0ZVBhcmFtcyIsIiRpb25pY1BvcHVwIiwiTG9jYXRpb25zU2VydmljZSIsIkRCU2VydmljZSIsImRiIiwiaW5pdERCIiwiaW5mbyIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiYmluZCIsImdlb2xvY2F0ZSIsInBvc09wdGlvbnMiLCJ0aW1lb3V0IiwiZW5hYmxlSGlnaEFjY3VyYWN5IiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwicG9zaXRpb24iLCJzYXZlX2luaXRpYWxfcG9zaXRpb24iLCJnbyIsImVyciIsIiRvbiIsImNvdW5jaWxfbW9kYWwiLCJoaWRlIiwicmVtb3ZlIiwiXyIsIiRjb3Jkb3ZhQ2FtZXJhIiwiJGNvbXBpbGUiLCIkaW9uaWNNb2RhbCIsImxlYWZsZXREYXRhIiwiQ29uZmlnU2VydmljZSIsIlBpblNlcnZpY2UiLCJNZXNzYWdlU2VydmljZSIsIkRyaW5rU2VydmljZSIsIkF1dGhTZXJ2aWNlIiwiVXNlclNlcnZpY2UiLCIkdGltZW91dCIsIiRpbnRlcnZhbCIsIiRsb2NhdGlvbiIsIkVycm9yU2VydmljZSIsIiRpb25pY1NsaWRlQm94RGVsZWdhdGUiLCIkaW9uaWNTY3JvbGxEZWxlZ2F0ZSIsIlBvcFVwU2VydmljZSIsIkNvbm5lY3Rpdml0eVNlcnZpY2UiLCIkY29yZG92YUluQXBwQnJvd3NlciIsIk1hcFNlcnZpY2UiLCJNb2RhbFNlcnZpY2UiLCJTZW1hcGhvcmVTZXJ2aWNlIiwiVmFsaWRhdGlvblNlcnZpY2UiLCJOb3RpZmljYXRpb25TZXJ2aWNlIiwib25saW5lX3VzZXJfZ2VvIiwib25saW5lX3VzZXJfZ2VvX2FycmF5IiwiQXJyYXkiLCJiYXNlVVJMIiwiQXBwTmFtZSIsInVzZXJfY2FjaGVkX2ltYWdlIiwib25lX3ZhbHVlX3BvcHVwIiwibXlJbnRlcnZhbHMiLCJjaGVja05vTW9kYWxJc09wZW4iLCJpc09ubGluZSIsImNoZWNrX3VzZXJfbG9nZ2VkIiwic2V0X29mZmxpbmVfdXNlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImRpc3BsYXkiLCJjcmVhdGVfb25saW5lX21hcCIsInNlbmRVc2VyTG9jYXRpb24iLCJnZXRNYXAiLCJpbml0aWFsX2xhdCIsImNlbnRlck1hcE9uQ29vcmRzIiwiaW5pdGlhbF9sbmciLCJjaGVja05vdGlmaWNhdGlvbnMiLCJjYW5jZWwiLCJub3RpZmljYXRpb25zIiwidWlkIiwiZ2V0VW5yZWNpdmVkTm90aWZpY2F0aW9ucyIsIm5hbWUiLCJwYXNzd29yZCIsInJlc3AiLCJkYXRhIiwiZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZSIsIlN0YXR1cyIsIk5vdGlmaWNhdGlvbnMiLCJvcGVuTm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9uIiwiZG9udFNob3dOb3RpZmljYXRpb25BZ2FpbiIsIm5pZCIsInRpcG8iLCJzZW5kX21lc3NhZ2VfdG8iLCJvcGVuSW52aXRhdGlvbnNNb2RhbCIsImNsb3NlTm90aWZpY2F0aW9uIiwib3BlbldlYnNpdGUiLCJvcHRpb25zIiwibG9jYXRpb24iLCJjbGVhcmNhY2hlIiwidG9vbGJhciIsIm9wZW4iLCJldmVudCIsIm1hcCIsImRlZmF1bHRzIiwidGlsZUxheWVyIiwibWluWm9vbSIsIm1heFpvb20iLCJ6b29tQ29udHJvbFBvc2l0aW9uIiwibWFya2VycyIsImV2ZW50cyIsImVuYWJsZSIsImxvZ2ljIiwiY2VudGVyIiwibG9hZFBpbnNMYXllciIsImxhdCIsImxuZyIsInpvb20iLCJvbiIsImhpZGVPZmZTY3JlZW5QaW5zIiwibmV4dCIsInByZXZpb3VzIiwiYmFja190b19tYXAiLCJpbWFnZSIsImFkZEltYWdlIiwiaXNGcm9tQWxidW0iLCJpc1VzZXJQaG90byIsImlzQ29tbWVudFBob3RvIiwiaXNOZXdVc2VyUGhvdG8iLCJzb3VyY2UiLCJDYW1lcmEiLCJQaWN0dXJlU291cmNlVHlwZSIsIkNBTUVSQSIsImZpeF9vcmllbnRhdGlvbiIsInNhdmVfdG9fZ2FsbGVyeSIsIlBIT1RPTElCUkFSWSIsInF1YWxpdHkiLCJkZXN0aW5hdGlvblR5cGUiLCJEZXN0aW5hdGlvblR5cGUiLCJGSUxFX1VSSSIsInNvdXJjZVR5cGUiLCJhbGxvd0VkaXQiLCJjb3JyZWN0T3JpZW50YXRpb24iLCJlbmNvZGluZ1R5cGUiLCJFbmNvZGluZ1R5cGUiLCJKUEVHIiwicG9wb3Zlck9wdGlvbnMiLCJDYW1lcmFQb3BvdmVyT3B0aW9ucyIsInNhdmVUb1Bob3RvQWxidW0iLCJ0YXJnZXRXaWR0aCIsInRhcmdldEhlaWdodCIsImdldFBpY3R1cmUiLCJpbWFnZURhdGEiLCJvbkltYWdlU3VjY2VzcyIsImZpbGVVUkkiLCJGaWxlUGF0aCIsInJlc29sdmVOYXRpdmVQYXRoIiwicmVzdWx0Iiwic3RhcnRzV2l0aCIsInByb2ZpbGUiLCJwaWN0dXJlX3VybCIsImNvbW1lbnQiLCJmaWxlIiwibmV3dXNlciIsImltZ1VSSSIsImVycm9yIiwiYWxlcnQiLCJ1cmxGb3JJbWFnZSIsImltYWdlVVJMIiwic3Vic3RyIiwibGFzdEluZGV4T2YiLCJkYXRhRGlyZWN0b3J5Iiwic2Nyb2xsTWUiLCJhbmNob3JfaWQiLCJoYXNoIiwiaGFuZGxlIiwiJGdldEJ5SGFuZGxlIiwiYW5jaG9yU2Nyb2xsIiwic2V0X2FjdGl2ZV9vcHRpb24iLCJidXR0b25pZCIsImNsYXNzTmFtZSIsImhpZGVfc3BlY2lhbF9kaXZzIiwiY2xvc2VfcmVwb3J0X2RldGFpbF9tb2RhbCIsInJlcG9ydF9kZXRhaWxfaWQiLCJsb2NhdGUiLCJjb29yZHMiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsIm5vdyIsIm1lc3NhZ2UiLCJmb2N1cyIsImRyYWdnYWJsZSIsImFkZE1hcENvbnRyb2xzIiwiY2hhbmdlVXNlckxvY2F0aW9uUGluIiwibG9uIiwibGF5ZXIiLCJuZXdMYXRMbmciLCJMIiwiTGF0TG5nIiwic2V0TGF0TG5nIiwibWFwQm91bmRzIiwiZ2V0Qm91bmRzIiwidXNlcnNWaXNpYmxlIiwiZm9yRWFjaCIsImtleSIsInNob3VsZEJlVmlzaWJsZSIsImNvbnRhaW5zIiwiZ2V0TGF0TG5nIiwiYWRkTGF5ZXIiLCJwdXNoIiwiZmVhdHVyZSIsInJlbW92ZUxheWVyIiwicmVtb3ZlQWxsUGlucyIsImdldEFsbCIsInJlc3BvbnNlIiwibGFzdFBpbnNSZXNwb25zZSIsInJlcG9ydHNCeVN0YXRlIiwicGluc0FycmF5IiwiZmVhdHVyZXMiLCJvbmxpbmVfdXNlcnNfZ2VvIiwicHJvcGVydGllcyIsImdlb21ldHJ5IiwiY29vcmRpbmF0ZXMiLCJvbmxpbmVTdGF0dXMiLCJPbmxpbmVfc3RhdHVzIiwiaWNvbiIsIkljb24iLCJpY29uX3NoYWRvdyIsIm1hcmtlckljb24iLCJzaGFkb3dVcmwiLCJzaGFkb3dTaXplIiwic2hhZG93QW5jaG9yIiwiaWNvblVybCIsImljb25TaXplIiwiaWNvbkFuY2hvciIsInBvcHVwQW5jaG9yIiwibWFya2VyIiwiVWlkIiwiTmFtZSIsImludGVyZXN0ZWQiLCJJbnRlcmVzdGVkSW4iLCJzdGF0dXMiLCJnZW5kZXIiLCJHZW5kZXIiLCJsYXN0VXBkYXRlIiwidGltZUNvbnZlcnRlciIsIkxvY2F0aW9uVGltZVN0YW1wIiwiaHRtbCIsImNvbXBpbGVkIiwiYmluZFBvcHVwIiwiY2hlY2tUYWxrU3RhdHVzIiwidGFrZUlmQXZhaWxhYmxlIiwiY2hlY2tXaG9DYW5UYWxrIiwiY2FuVGFsa1RvVXNlcnMiLCJtYWtlQXZhaWxhYmxlQWdhaW4iLCJrZXlfcHJlc3MiLCJzdGFnZSIsImtleUNvZGUiLCJjbG9zZSIsImNhblRhbGtUb1VzZXIiLCJjaGF0Iiwib3RoZXJfdXNlciIsIm1lc3NhZ2VzIiwibmV3X3RleHRfbWVzc2FnZSIsImdldFVzZXJJbmZvIiwiUGhvdG8iLCJ1c2VybmFtZSIsImF1dGhvcl91aWQiLCJnZXRBbGxNZXNzYWdlc1RvVXNlciIsInJlc3AyIiwicmVzcDMiLCJkYXRhMiIsIm1uaWQiLCJsZW5ndGgiLCJmcm9tVGVtcGxhdGVVcmwiLCJzY29wZSIsImhhcmR3YXJlQmFja0J1dHRvbkNsb3NlIiwiYW5pbWF0aW9uIiwibW9kYWwiLCJhY3RpdmVNb2RhbCIsInNob3ciLCJhbGVydFBvcHVwIiwidGl0bGUiLCJ0ZW1wbGF0ZSIsInJlcyIsImNoZWNrSWZDYW5SZXBseUludml0YXRpb24iLCJpbnZpdGF0aW9uIiwiY2hlY2tJZldhaXRpbmdSZXBseUZyb21JbnZpdGF0aW9uIiwiZ2V0RHJpbmtDb3N0QnlOaWQiLCJhdmFpbGFibGVfZHJpbmtzIiwiZHJpbmsiLCJOaWQiLCJDcmVkaXRzIiwiYWNjZXB0SW52aXRhdGlvbiIsInNlbmRfaW52aXRhdGlvbl9yZXNwb25zZSIsInRhbGsiLCJyZWZ1c2VJbnZpdGF0aW9uIiwiaW5uZXJIVE1MIiwic2VsZWN0ZWRfZHJpbmsiLCJ1c2VyX2NyZWRpdHMiLCJzZW5kRHJpbmtJbnZpdGF0aW9uUmVzcG9uc2UiLCJNZXNzYWdlIiwic2VuZF9pbnZpdGF0aW9uIiwiY29zdCIsImNyZWRpdHMiLCJwYXJzZUZsb2F0Iiwic2VuZERyaW5rSW52aXRhdGlvblRvVXNlciIsIk5ld0NyZWRpdHMiLCJpbnZpdGF0aW9ucyIsImRhdGFfcmVzcCIsImdldEFsbERyaW5rc0F2YWlsYWJsZSIsIkRyaW5rcyIsIlVzZXJDcmVkaXRzIiwiZ2V0QWxsSW52aXRhdGlvbnNXaXRoVXNlciIsImRhdGEzIiwiY2xvc2VfbWVzc2FnZV9tb2RhbCIsImNsb3NlX2ludml0YXRpb25fbW9kYWwiLCJzZW5kX21lc3NhZ2Vfb2siLCJzZW5kVGV4dE1lc3NhZ2VUb1VzZXIiLCJnZXROYW1lRnJvbVVpZCIsImdldE5hbWVGcm9tVWlkSW52aXRhdGlvbiIsIlVOSVhfdGltZXN0YW1wIiwiYSIsIkRhdGUiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJtb250aCIsImdldE1vbnRoIiwiZGF5IiwiZ2V0RGF0ZSIsImhvdXIiLCJnZXRIb3VycyIsIm1pbiIsImdldE1pbnV0ZXMiLCJ0aW1lIiwiZ2V0U2Vjb25kcyIsIm1vZGVsIiwiZXh0ZXJuYWxNb2RlbCIsInNlbGVjdGVkSXRlbXMiLCJwcmVzZWxlY3RlZFNlYXJjaEl0ZW1zIiwiY2xpY2tlZFZhbHVlTW9kZWwiLCJyZW1vdmVkVmFsdWVNb2RlbCIsIml0ZW1zUmVtb3ZlZCIsImNhbGxiYWNrIiwidXNlcl9vcHRpb25zIiwibWVudSIsInNob3dfYW5vbnltb3VzX21lbnUiLCJzaG93X3VzZXJfbWVudSIsImhlaWdodCIsIndpZHRoIiwiY3JlYXRlX2ZpZWxkX2FycmF5IiwidHlwZSIsInZhbHVlIiwiZmllbGQiLCJjcmVhdGVfZmllbGRfYXJyYXlfd2l0aF90d29GaWVsZHMiLCJzZWNvbmRWYWx1ZSIsImZpeF9mYl9pbWFnZV9saW5rIiwiaW5kZXhPZiIsInBhcnRzIiwic3BsaXQiLCJuZXdVcmwiLCJsb2dfaW4iLCJ1c2VyIiwiZmllbGRzIiwiY2hlY2tfZmllbGRzIiwiaHR0cF9yZXNwb25zZV9pc19zdWNjZXNzZnVsIiwicGhvdG8iLCJzYXZlX3VzZXJfZGF0YSIsIm5vbmF1dGgiLCJTaG93TG9jYXRpb24iLCJFc3RhZG8iLCJzYXZlVXNlciIsInNldF91c2VyX3BpY3R1cmUiLCJjbG9zZV9sb2dpbl9tb2RhbCIsInNob3dfZXJyb3JfbWVzc2FnZSIsInN0YXR1c1RleHQiLCJzaG93X2FsZXJ0IiwibG9nX2luX2JhY2tncm91bmQiLCJodHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfYWpheCIsInNob3dfbG9jYXRpb24iLCJzYXZlX2xhc3RfdXNlcl9wb3NpdGlvbiIsInNpZ25fb3V0IiwiZXJhc2VfdXNlcl9kYXRhIiwiZXJhc2VVc2VyIiwic2hvd19lZGl0X3Byb2ZpbGVfbW9kYWwiLCJlbWFpbCIsImFjdHVhbF9waG90byIsImlzTW9iaWxlRGV2aWNlIiwicmVhZFVSTCIsImlucHV0IiwiZmlsZXMiLCJyZXBvcnQiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiZSIsInNyYyIsInRhcmdldCIsInJlYWRBc0RhdGFVUkwiLCJjbG9zZV9lZGl0X3Byb2ZpbGVfbW9kYWwiLCJlZGl0X3Byb2ZpbGVfb2siLCJlZGl0X3Byb2ZpbGUiLCJlZGl0X3JlcXVlc3QiLCJlZGl0X3VzZXIiLCJKU09OIiwicGFyc2UiLCJodHRwX2RhdGFfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bCIsImNvZGUiLCJodHRwX3N0YXR1cyIsImJvZHkiLCJleGNlcHRpb24iLCJwcm9ncmVzcyIsInVwbG9hZFByb2dyZXNzIiwibG9hZGVkIiwidG90YWwiLCJNYXRoIiwicm91bmQiLCJzdWNjZXNzIiwiaGVhZGVycyIsInNob3dfbG9naW5fbW9kYWwiLCJsb2dpbl9vayIsInNob3dfc2lnbl91cF9tb2RhbCIsImZ1bGxuYW1lIiwiaWRfZG9jIiwidGVsZXBob25lIiwiY2xvc2Vfc2lnbl91cF9tb2RhbCIsInNpZ25fdXAiLCJjcmVhdGVfdXNlciIsImlkZW50aXR5X2RvY3VtZW50IiwicGhvbmUiLCJzaWduX3VwX29rIiwiZ2V0VXNlciIsImRvYyIsImhhc1Bob3RvIiwiZmluZF9tZSIsInNhdmVfbmV3X3JlcG9ydF9wb3NpdGlvbiIsImdldE1lc3NhZ2VTY29wZSIsIm9wZW5Db3VuY2lsU2VsZWN0b3IiLCJmYWN0b3J5IiwiJGh0dHAiLCIkY29yZG92YUZpbGVUcmFuc2ZlciIsInBvc3QiLCJ3aXRoQ3JlZGVudGlhbHMiLCJDb250ZW50LVR5cGUiLCJnZXQiLCJwYXJhbXMiLCJwYXNzd29yZF9zaWduX2luIiwidXNlck9iaiIsImZpbGVLZXkiLCJ0cnVzdEFsbEhvc3RzIiwidXBsb2FkIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInVuZGVmaW5lZCIsInRyYW5zZm9ybVJlcXVlc3QiLCJpZGVudGl0eSIsInBhc3N3b3JkX3JlY292ZXJ5IiwibG9naW5fZW1haWwiLCJwYXNzd29yZF9jaGFuZ2UiLCJvbGRQYXNzd29yZCIsIm5ld1Bhc3N3b3JkIiwiY29uZmlybVBhc3N3b3JkIiwiQ29uZmlnT2JqIiwiaXNXZWJWaWV3IiwiYmFzZUNvYnJhbmQiLCIkY29yZG92YU5ldHdvcmsiLCJpc09mZmxpbmUiLCIkcSIsInVzZXJfbmFtZSIsInVzZXJfcGFzc3dvcmQiLCJ1c2VyX3BpY3R1cmVfdXJsIiwiX2lkIiwiX3JldiIsIl9kYiIsInB1dCIsIlBvdWNoREIiLCJzYXZlUmVwb3J0IiwiZGF0ZSIsIm5ld19yZXBvcnRfaWQiLCJnZXRNaWxsaXNlY29uZHMiLCJ1cGRhdGVSZXBvcnQiLCJnZXRDYXRlZ29yaWVzIiwic2F2ZUNhdGVnb3JpZXMiLCJjYXRlZ29yaWVzIiwiZ2V0UmVwb3J0IiwicmVwb3J0SWQiLCJnZXRBbGxSZXBvcnRzIiwiYWxsRG9jcyIsImluY2x1ZGVfZG9jcyIsImF0dGFjaG1lbnRzIiwic3RhcnRrZXkiLCJlbmRrZXkiLCJkZWxldGVSZXBvcnQiLCJyZXBvcnRfaWQiLCJkZWxldGVHaXZlblJlcG9ydCIsInJhbmRvbSIsImRlc3RpbmF0aW9uX3VpZCIsImRyaW5rX25pZCIsImludml0YXRpb25fbmlkIiwianNvblJlc3VsdCIsImVycm9yQ29udGFpbmVySWQiLCJlcnJvckRpdiIsImh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bF9wb3B1cCIsImh0dHBfZGF0YV9yZXNwb25zZV9pc19zdWNjZXNzZnVsX2FqYXgiLCJzaG93X2Vycm9yX21lc3NhZ2VfcG9wdXAiLCJlcnJvcnMiLCJ2YWxpZGF0ZV9ub3RfZW1wdHkiLCJ2YWxpZGF0ZV9lbWFpbCIsInZhbGlkYXRlX2lkZG9jX3V5IiwidmFsaWRhdGVfdHdvX3dvcmRzIiwidmFsaWRhdGVfZXF1YWxzVG8iLCIkaW9uaWNMb2FkaW5nIiwiTE9BREVSQVBJIiwic2hvd0xvYWRpbmciLCJ0ZXh0IiwiaGlkZUxvYWRpbmciLCJ0b2dnbGVMb2FkaW5nV2l0aE1lc3NhZ2UiLCJzZWxmIiwidGhpcyIsImNvbmZpcm1Qb3B1cCIsImNvbmZpcm0iLCJzaG93QWxlcnQiLCJfdGl0bGUiLCJfdGVtcGxhdGUiLCJsb2NhdGlvbnNPYmoiLCJsYXN0X3VzZXJfbGF0IiwibGFzdF91c2VyX2xuZyIsInNlbGVjdGVkX2NvdW5jaWwiLCJzZWxlY3RDb3VuY2lsIiwiY291bmNpbE5hbWUiLCJzYXZlZExvY2F0aW9ucyIsInByb2o0IiwiZGVmcyIsIm1hcFNlcnZpY2UiLCJnb1RvUGxhY2UiLCJfZ2VvSnNvbiIsImNycyIsIm5vbWJyZSIsIl9sYXRsbmciLCJQcm9qIiwiZ2VvSnNvbiIsInBvaW50VG9MYXllciIsImxhdGxuZyIsImh0bWxQb3BVcCIsImFkZFRvIiwic2V0VmlldyIsIm9wZW5Qb3B1cCIsIl9kYXRhIiwiZXh0ZW5kIiwiYXBpVVJMIiwiaGFzaF9pZCIsImN1cnJlbnQiLCJidWlsZCIsIm1vZGFsT0JKIiwiUGluIiwicGluc1VSTCIsIl9hbGwiLCJwcm90b3R5cGUiLCJhbGVydF90aXRsZSIsImFsZXJ0X21lc3NhZ2UiLCJhc2tGb3JPbmVWYWx1ZVBvcFVwIiwiZmllbGRfbmFtZSIsInZhbGlkYXRpb25UeXBlIiwibXlQb3B1cCIsInN1YlRpdGxlIiwiYnV0dG9ucyIsIm9uVGFwIiwicHJldmVudERlZmF1bHQiLCJzZW1hcGhvcmVPYmoiLCJzZW1hcGhvcmVzIiwic2VtYXBob3JlSWQiLCJBcGlJbUVuZHBvaW50IiwiQXBpRGF0YUVuZHBvaW50IiwicmVzdFByZWZmaXgiLCJsb2NhdGlvbkFQSSIsInNlYXJjaExvY2F0aW9uQnlTdHIiLCJfbG9jYXRpb24iLCJtZXRob2QiLCJzZWFyY2hFc3F1aW5hQnlTdHIiLCJjYWxsZSIsImVzcXVpbmEiLCJnZXRMb2NhdGlvbkdlb20iLCJnZXRQYXJhbVBhdGhCeVRpcG8iLCJpIiwicGF0aFBhcmFtcyIsImdldExvY2F0aW9uR2VvbVBNQiIsImVzcXVpbmFfbnVtZXJvIiwiX3RpcG8iLCJyZXN0R2VvRGF0YVNlcnZpY2VQYXRoIiwiRVNRVUlOQSIsIkRJUkVDQ0lPTiIsIlVzZXJPYmoiLCJnZXRfdXNlcl9kYXRhIiwiYWRkX3Bob3RvIiwiaXNMb2dnZWQiLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJ2IiwicmUiLCJ0ZXN0IiwicmVwbGFjZSIsImRpZyIsInBhcnNlSW50Il0sIm1hcHBpbmdzIjoiQUFPQSxHQUFJQSxTQUNGQyxZQUFhQyxRQUFRQyxPQUFPLHlCQUM1QkMsU0FBVUYsUUFBUUMsT0FBTyxzQkFHM0JILFFBQU9LLElBQU1ILFFBQVFDLE9BQU8sVUFBVyxRQUFRLGVBQWUsbUJBQW1CLG9CQUFxQixxQkFBc0Isa0JBQW1CLGNBRTlJRyxTQUFTLGlCQUNSQyxJQUFLLGlDQUdORCxTQUFTLG1CQUNSQyxJQUFLLDJCQUlOQyxLQUFBLGlCQUFBLGFBQUEsbUJBQUksU0FBU0MsRUFBZ0JDLEVBQVlDLEdBQ3hDRCxFQUFXRSxRQUFVQyxPQUFPRCxRQUM1QkgsRUFBZUssTUFBTSxXQUdmRCxPQUFPRSxTQUFXRixPQUFPRSxRQUFRQyxRQUFRQyxVQUMzQ0YsUUFBUUMsUUFBUUMsU0FBU0MsMEJBQXlCLEdBS3BEQyxNQUFNQyxTQUFTQyxjQUFlLEVBQzFCUixPQUFPUyxXQUVUQSxVQUFVQyxvQkFLZkMsUUFBQSxpQkFBQSxxQkFBQSxtQkFBQSx1QkFBTyxTQUFTQyxFQUFnQkMsRUFBb0JDLEVBQWtCQyxHQUNyRUQsRUFBaUJFLGtCQUFpQixHQU9sQ0osRUFFREssTUFBTSxPQUNIQyxPQUFPLEVBQ1B4QixJQUFLLE9BQ0x5QixZQUFVLEVBQ1ZDLFlBQWEsc0JBQ2JDLFdBQVksa0JBR2ZKLE1BQU0sV0FDSEMsT0FBTyxFQUNQeEIsSUFBSyxPQUNMNEIsT0FDRUMsYUFDRUgsWUFBYSxxQkFDYkMsV0FBYSxvQkFLcEJKLE1BQU0sYUFDTEMsT0FBTyxFQUNQeEIsSUFBSyxTQUNMNEIsT0FDRUMsYUFDRUgsWUFBYSx1QkFDYkMs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LEVBQVUsQ0FDaEQsR0FBSW9QLEdBQVNwUCxFQUFNTyxNQUFNLEtBQUs4TyxPQUFPLFNBQVNDLEdBQUcsTUFBVyxLQUFKQSxHQUN4RCxPQUFJRixHQUFPblUsT0FBUyxFQVFwQixPQUFPLEdBSWI4TyxrQkFBbUIsU0FBVS9KLEVBQU1HLEdBQ2pDLE1BQUdILElBQU9HLEdBT1p5SixlQUFnQixTQUFVNUosR0FDdEIsR0FBVSxNQUFQQSxHQUFzQixhQUFQQSxHQUE2QixJQUFQQSxFQUFVLENBQ2hELEdBQUl1UCxHQUFLLHdKQUNULE9BQU9BLEdBQUdDLEtBQUt4UCxHQUVmLE9BQU8sR0FJYjZKLGtCQUFtQixTQUFVN0osR0FDM0IsR0FBVSxNQUFQQSxHQUFzQixhQUFQQSxHQUE2QixJQUFQQSxFQUFVLENBQzlDQSxFQUFRQSxFQUFNeVAsUUFBUSxNQUFPLEdBQzdCLElBQUlDLEdBQU0xUCxFQUFNQSxFQUFNL0UsT0FBUyxHQUMzQmlELEVBQUksRUFBT3NRLEVBQUksQ0FDbkIsSUFBR3hPLEVBQU0vRSxRQUFVLEVBQ2pCLElBQUl1VCxFQUFJeE8sRUFBTS9FLE9BQVF1VCxFQUFJLEVBQUdBLElBQzNCeE8sRUFBUSxJQUFNQSxDQUdsQixLQUFJd08sRUFBSSxFQUFHQSxFQUFJLEVBQUdBLElBQ2hCdFEsR0FBTXlSLFNBQVMsVUFBVW5CLElBQU1tQixTQUFTM1AsRUFBTXdPLElBQU8sRUFFdkQsSUFBSTNhLEVBTUosT0FKRUEsR0FEQ3FLLEVBQUUsS0FBTyxFQUNELEVBRUEsR0FBS0EsRUFBSSxHQUVqQndSLEdBQU83YixFQU1aLE9BQU8iLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSW9uaWMgU3RhcnRlciBBcHBcblxuLy8gYW5ndWxhci5tb2R1bGUgaXMgYSBnbG9iYWwgcGxhY2UgZm9yIGNyZWF0aW5nLCByZWdpc3RlcmluZyBhbmQgcmV0cmlldmluZyBBbmd1bGFyIG1vZHVsZXNcbi8vICdwbWJfaW0nIGlzIHRoZSBuYW1lIG9mIHRoaXMgYW5ndWxhciBtb2R1bGUgZXhhbXBsZSAoYWxzbyBzZXQgaW4gYSA8Ym9keT4gYXR0cmlidXRlIGluIGluZGV4Lmh0bWwpXG4vLyB0aGUgMm5kIHBhcmFtZXRlciBpcyBhbiBhcnJheSBvZiAncmVxdWlyZXMnXG4vLyAnc3RhcnRlci5zZXJ2aWNlcycgaXMgZm91bmQgaW4gc2VydmljZXMuanNcbi8vICdzdGFydGVyLmNvbnRyb2xsZXJzJyBpcyBmb3VuZCBpbiBjb250cm9sbGVycy5qc1xudmFyIHBtYl9pbSA9IHtcbiAgY29udHJvbGxlcnM6IGFuZ3VsYXIubW9kdWxlKCdwbWJfaW0uY29udHJvbGxlcnMnLCBbXSksXG4gIHNlcnZpY2VzOiBhbmd1bGFyLm1vZHVsZSgncG1iX2ltLnNlcnZpY2VzJywgW10pXG59O1xuXG5wbWJfaW0uYXBwID0gYW5ndWxhci5tb2R1bGUoJ3BtYl9pbScsIFsnaW9uaWMnLCdpb25pYy53aXphcmQnLCdpb24tYXV0b2NvbXBsZXRlJywnbGVhZmxldC1kaXJlY3RpdmUnLCAncG1iX2ltLmNvbnRyb2xsZXJzJywgJ3BtYl9pbS5zZXJ2aWNlcycsICduZ0NvcmRvdmEnXSlcblxuLmNvbnN0YW50KCdBcGlJbUVuZHBvaW50Jywge1xuICB1cmw6ICdodHRwOi8vd3d3Lm1vbnRldmlkZW8uZ3ViLnV5J1xufSlcblxuLmNvbnN0YW50KCdBcGlEYXRhRW5kcG9pbnQnLCB7XG4gIHVybDogJ2h0dHA6Ly90b21hbW9zdW5hLmluZm8nXG59KVxuXG5cbi5ydW4oZnVuY3Rpb24oJGlvbmljUGxhdGZvcm0sICRyb290U2NvcGUsICRjb3Jkb3ZhS2V5Ym9hcmQpIHtcbiAgJHJvb3RTY29wZS5WRVJTSU9OID0gd2luZG93LlZFUlNJT047XG4gICRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIC8vIEhpZGUgdGhlIGFjY2Vzc29yeSBiYXIgYnkgZGVmYXVsdCAocmVtb3ZlIHRoaXMgdG8gc2hvdyB0aGUgYWNjZXNzb3J5IGJhciBhYm92ZSB0aGUga2V5Ym9hcmRcbiAgICAvLyBmb3IgZm9ybSBpbnB1dHMpXG4gICAgaWYgKHdpbmRvdy5jb3Jkb3ZhICYmIHdpbmRvdy5jb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQpIHtcbiAgICAgIGNvcmRvdmEucGx1Z2lucy5LZXlib2FyZC5oaWRlS2V5Ym9hcmRBY2Nlc3NvcnlCYXIoZmFsc2UpO1xuICAgICAgLy9jb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuZGlzYWJsZVNjcm9sbChmYWxzZSk7XG4gICAgfVxuICAgIC8vJGNvcmRvdmFLZXlib2FyZC5oaWRlQWNjZXNzb3J5QmFyKGZhbHNlKVxuICAgIC8vJGNvcmRvdmFLZXlib2FyZC5kaXNhYmxlU2Nyb2xsKGZhbHNlKVxuICAgIGlvbmljLlBsYXRmb3JtLmlzRnVsbFNjcmVlbiA9IHRydWU7XG4gICAgaWYgKHdpbmRvdy5TdGF0dXNCYXIpIHtcbiAgICAgIC8vIG9yZy5hcGFjaGUuY29yZG92YS5zdGF0dXNiYXIgcmVxdWlyZWRcbiAgICAgIFN0YXR1c0Jhci5zdHlsZURlZmF1bHQoKTtcbiAgICB9XG4gIH0pO1xufSlcblxuLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkY29tcGlsZVByb3ZpZGVyLCAkaW9uaWNDb25maWdQcm92aWRlcikge1xuICAkY29tcGlsZVByb3ZpZGVyLmRlYnVnSW5mb0VuYWJsZWQoZmFsc2UpO1xuICAvLyRpb25pY0NvbmZpZ1Byb3ZpZGVyLnNjcm9sbGluZy5qc1Njcm9sbGluZyh0cnVlKTtcblxuICAvLyBJb25pYyB1c2VzIEFuZ3VsYXJVSSBSb3V0ZXIgd2hpY2ggdXNlcyB0aGUgY29uY2VwdCBvZiBzdGF0ZXNcbiAgLy8gTGVhcm4gbW9yZSBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1yb3V0ZXJcbiAgLy8gU2V0IHVwIHRoZSB2YXJpb3VzIHN0YXRlcyB3aGljaCB0aGUgYXBwIGNhbiBiZSBpbi5cbiAgLy8gRWFjaCBzdGF0ZSdzIGNvbnRyb2xsZXIgY2FuIGJlIGZvdW5kIGluIGNvbnRyb2xsZXJzLmpzXG4gICRzdGF0ZVByb3ZpZGVyXG5cbi5zdGF0ZSgnYXBwJywge1xuICAgIGNhY2hlOiBmYWxzZSxcbiAgICB1cmw6IFwiL2FwcFwiLFxuICAgIGFic3RyYWN0OiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9tZW51Lmh0bWxcIixcbiAgICBjb250cm9sbGVyOiAnQWJzQ29udHJvbGxlcidcbiAgfSlcblxuLnN0YXRlKCdhcHAubWFwJywge1xuICAgIGNhY2hlOiBmYWxzZSxcbiAgICB1cmw6IFwiL21hcFwiLFxuICAgIHZpZXdzOiB7XG4gICAgICAnbWVudUNvbnRlbnQnIDp7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9tYXAuaHRtbFwiLFxuICAgICAgICBjb250cm9sbGVyIDogXCJNYXBDb250cm9sbGVyXCJcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbi5zdGF0ZSgnYXBwLmludHJvJywge1xuICBjYWNoZTogZmFsc2UsXG4gIHVybDogXCIvaW50cm9cIixcbiAgdmlld3M6IHtcbiAgICAnbWVudUNvbnRlbnQnIDp7XG4gICAgICB0ZW1wbGF0ZVVybDogXCJ0ZW1wbGF0ZXMvaW50cm8uaHRtbFwiLFxuICAgICAgY29udHJvbGxlciA6IFwiSW50cm9DdHJsXCJcbiAgICB9XG4gIH1cbn0pXG5cbi8vIGlmIG5vbmUgb2YgdGhlIGFib3ZlIHN0YXRlcyBhcmUgbWF0Y2hlZCwgdXNlIHRoaXMgYXMgdGhlIGZhbGxiYWNrXG4kdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvYXBwL2ludHJvJyk7XG5cbn0pO1xuIiwicG1iX2ltLmNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoJ0Fic0NvbnRyb2xsZXInLFxuWyckc2NvcGUnLFxuZnVuY3Rpb24oJHNjb3BlKSB7XG5cbn1dKTtcbiIsInBtYl9pbS5jb250cm9sbGVycy5jb250cm9sbGVyKCdJbnRyb0N0cmwnLCBbJyRzY29wZScsICckc3RhdGUnLFxuICAnJGNvcmRvdmFHZW9sb2NhdGlvbicsXG4gICckc3RhdGVQYXJhbXMnLFxuICAnJGlvbmljUGxhdGZvcm0nLFxuICAnJGlvbmljUG9wdXAnLFxuICAnTG9jYXRpb25zU2VydmljZScsXG4gICdEQlNlcnZpY2UnLFxuICBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgJGNvcmRvdmFHZW9sb2NhdGlvbiwgJHN0YXRlUGFyYW1zLCAkaW9uaWNQbGF0Zm9ybSwgJGlvbmljUG9wdXAsIExvY2F0aW9uc1NlcnZpY2UsIERCU2VydmljZSkge1xuXG4gIHZhciBkYiA9IERCU2VydmljZS5pbml0REIoKTtcbiAgZGIuaW5mbygpLnRoZW4oY29uc29sZS5sb2cuYmluZChjb25zb2xlKSk7XG5cbiAgJHNjb3BlLmdlb2xvY2F0ZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICB2YXIgcG9zT3B0aW9ucyA9IHt0aW1lb3V0OiAzNTAwLCBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWV9O1xuICAgICAgJGNvcmRvdmFHZW9sb2NhdGlvblxuICAgICAgICAuZ2V0Q3VycmVudFBvc2l0aW9uKHBvc09wdGlvbnMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgICAgTG9jYXRpb25zU2VydmljZS5zYXZlX2luaXRpYWxfcG9zaXRpb24ocG9zaXRpb24pO1xuICAgICAgICAgICRzdGF0ZS5nbyhcImFwcC5tYXBcIik7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICRzdGF0ZS5nbyhcImFwcC5tYXBcIik7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICRzY29wZS4kb24oJyRpb25pY1ZpZXcuZW50ZXInLCBmdW5jdGlvbigpeyAvL1RoaXMgaXMgZmlyZWQgdHdpY2UgaW4gYSByb3dcbiAgICAgIGlmKExvY2F0aW9uc1NlcnZpY2UuY291bmNpbF9tb2RhbCE9bnVsbCl7XG4gICAgICAgIExvY2F0aW9uc1NlcnZpY2UuY291bmNpbF9tb2RhbC5oaWRlKCk7XG4gICAgICAgIExvY2F0aW9uc1NlcnZpY2UuY291bmNpbF9tb2RhbC5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgICAkc2NvcGUuZ2VvbG9jYXRlKCk7XG4gICB9KTtcblxuICB9XG5dKTtcbiIsInBtYl9pbS5jb250cm9sbGVycy5jb250cm9sbGVyKCdNYXBDb250cm9sbGVyJywgWyckc2NvcGUnLCAnXycsXG4gICckY29yZG92YUNhbWVyYScsXG4gICckY29yZG92YUdlb2xvY2F0aW9uJyxcbiAgJyRjb21waWxlJyxcbiAgJyRpb25pY01vZGFsJyxcbiAgJyRpb25pY1BvcHVwJyxcbiAgJ2xlYWZsZXREYXRhJyxcbiAgJ0NvbmZpZ1NlcnZpY2UnLFxuICAnTG9jYXRpb25zU2VydmljZScsXG4gICdQaW5TZXJ2aWNlJyxcbiAgJ01lc3NhZ2VTZXJ2aWNlJyxcbiAgJ0RyaW5rU2VydmljZScsXG4gICdBdXRoU2VydmljZScsXG4gICdVc2VyU2VydmljZScsXG4gICdEQlNlcnZpY2UnLFxuICAnJHRpbWVvdXQnLFxuICAnJGludGVydmFsJyxcbiAgJyRsb2NhdGlvbicsXG4gICdFcnJvclNlcnZpY2UnLFxuICAnJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZScsXG4gICckaW9uaWNTY3JvbGxEZWxlZ2F0ZScsXG4gICdQb3BVcFNlcnZpY2UnLFxuICAnQ29ubmVjdGl2aXR5U2VydmljZScsXG4gICckY29yZG92YUluQXBwQnJvd3NlcicsXG4gICdNYXBTZXJ2aWNlJyxcbiAgJ01vZGFsU2VydmljZScsXG4gICdTZW1hcGhvcmVTZXJ2aWNlJyxcbiAgJ1ZhbGlkYXRpb25TZXJ2aWNlJyxcbiAgJ05vdGlmaWNhdGlvblNlcnZpY2UnLFxuICBmdW5jdGlvbihcbiAgICAkc2NvcGUsXG4gICAgXyxcbiAgICAkY29yZG92YUNhbWVyYSxcbiAgICAkY29yZG92YUdlb2xvY2F0aW9uLFxuICAgICRjb21waWxlLFxuICAgICRpb25pY01vZGFsLFxuICAgICRpb25pY1BvcHVwLFxuICAgIGxlYWZsZXREYXRhLFxuICAgIENvbmZpZ1NlcnZpY2UsXG4gICAgTG9jYXRpb25zU2VydmljZSxcbiAgICBQaW5TZXJ2aWNlLFxuICAgIE1lc3NhZ2VTZXJ2aWNlLFxuICAgIERyaW5rU2VydmljZSxcbiAgICBBdXRoU2VydmljZSxcbiAgICBVc2VyU2VydmljZSxcbiAgICBEQlNlcnZpY2UsXG4gICAgJHRpbWVvdXQsXG4gICAgJGludGVydmFsLFxuICAgICRsb2NhdGlvbixcbiAgICBFcnJvclNlcnZpY2UsXG4gICAgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZSxcbiAgICAkaW9uaWNTY3JvbGxEZWxlZ2F0ZSxcbiAgICBQb3BVcFNlcnZpY2UsXG4gICAgQ29ubmVjdGl2aXR5U2VydmljZSxcbiAgICAkY29yZG92YUluQXBwQnJvd3NlcixcbiAgICBNYXBTZXJ2aWNlLFxuICAgIE1vZGFsU2VydmljZSxcbiAgICBTZW1hcGhvcmVTZXJ2aWNlLFxuICAgIFZhbGlkYXRpb25TZXJ2aWNlLFxuICAgIE5vdGlmaWNhdGlvblNlcnZpY2VcbiAgKSB7XG5cbiAgICAvKipcbiAgICAgKiBPbmNlIHN0YXRlIGxvYWRlZCwgZ2V0IHB1dCBtYXAgb24gc2NvcGUuXG4gICAgICovXG4gICAgJHNjb3BlLm9ubGluZV91c2VyX2dlbyA9IHt9O1xuICAgICRzY29wZS5vbmxpbmVfdXNlcl9nZW9fYXJyYXkgPSBuZXcgQXJyYXkoKTtcbiAgICAkc2NvcGUuYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTDtcbiAgICAkc2NvcGUuQXBwTmFtZSA9IENvbmZpZ1NlcnZpY2UuQXBwTmFtZTtcbiAgICAkc2NvcGUudXNlcl9jYWNoZWRfaW1hZ2UgPSBcIi4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nXCI7XG4gICAgJHNjb3BlLm9uZV92YWx1ZV9wb3B1cCA9IG51bGw7XG4gICAgJHNjb3BlLm15SW50ZXJ2YWxzID0gbmV3IEFycmF5KCk7XG5cbiAgICAkc2NvcGUuJG9uKFwiJGlvbmljVmlldy5iZWZvcmVFbnRlclwiLCBmdW5jdGlvbigpIHtcbiAgICAgIE1vZGFsU2VydmljZS5jaGVja05vTW9kYWxJc09wZW4oKTtcbiAgICAgIERCU2VydmljZS5pbml0REIoKTtcbiAgICAgIGlmKENvbm5lY3Rpdml0eVNlcnZpY2UuaXNPbmxpbmUoKSl7XG4gICAgICAgICRzY29wZS5jaGVja191c2VyX2xvZ2dlZCgpO1xuICAgICAgfWVsc2V7XG4gICAgICAgICRzY29wZS5zZXRfb2ZmbGluZV91c2VyKCk7XG4gICAgICB9XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBpZihDb25uZWN0aXZpdHlTZXJ2aWNlLmlzT25saW5lKCkpe1xuICAgICAgICAkc2NvcGUuY3JlYXRlX29ubGluZV9tYXAoKTtcbiAgICAgICAgJHNjb3BlLm15SW50ZXJ2YWxzWyd1c2VyTG9jYXRpb24nXT0gJGludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAkc2NvcGUuc2VuZFVzZXJMb2NhdGlvbigpXG4gICAgICAgICAgfSwgMzAwMDApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHNjb3BlLiRvbihcIiRpb25pY1ZpZXcuYWZ0ZXJFbnRlclwiLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtYXAgPSBsZWFmbGV0RGF0YS5nZXRNYXAoKTtcbiAgICAgIGlmKExvY2F0aW9uc1NlcnZpY2UuaW5pdGlhbF9sYXQhPVwiXCIpe1xuICAgICAgICBNYXBTZXJ2aWNlLmNlbnRlck1hcE9uQ29vcmRzKExvY2F0aW9uc1NlcnZpY2UuaW5pdGlhbF9sYXQsIExvY2F0aW9uc1NlcnZpY2UuaW5pdGlhbF9sbmcsIDE2KTtcbiAgICAgIH1lbHNle1xuICAgICAgICBNYXBTZXJ2aWNlLmNlbnRlck1hcE9uQ29vcmRzKC0zNC45MDExMTMsIC01Ni4xNjQ1MzEsIDE0KTtcbiAgICAgIH1cbiAgICAgICRzY29wZS5jaGVja05vdGlmaWNhdGlvbnMoKTtcbiAgICB9KTtcblxuICAgICRzY29wZS5jaGVja05vdGlmaWNhdGlvbnMgPSBmdW5jdGlvbigpe1xuICAgICAgaWYoJHNjb3BlLm15SW50ZXJ2YWxzWydub3RpZmljYXRpb25zJ10pe1xuICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKCRzY29wZS5teUludGVydmFsc1snbm90aWZpY2F0aW9ucyddKTtcbiAgICAgIH1cbiAgICAgICRzY29wZS5teUludGVydmFsc1snbm90aWZpY2F0aW9ucyddPSAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5ub3RpZmljYXRpb25zID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGlmKFVzZXJTZXJ2aWNlLnVpZCl7XG4gICAgICAgICAgTm90aWZpY2F0aW9uU2VydmljZS5nZXRVbnJlY2l2ZWROb3RpZmljYXRpb25zKFVzZXJTZXJ2aWNlLm5hbWUsIFVzZXJTZXJ2aWNlLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgICAgdmFyIGRhdGEgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKTtcbiAgICAgICAgICAgIGlmKCEoZGF0YS5TdGF0dXMgJiYgZGF0YS5TdGF0dXM9PVwiZXJyb3JcIikpe1xuICAgICAgICAgICAgICAkc2NvcGUubm90aWZpY2F0aW9ucyA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKGRhdGEpLk5vdGlmaWNhdGlvbnM7XG4gICAgICAgICAgICAgIC8qdmFyIG5ld05vdGlmaWNhdGlvbkFycmF5ID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICAgICRzY29wZS5ub3RpZmljYXRpb25zLmZvckVhY2goZnVuY3Rpb24obm90aWZpY2F0aW9uX2l0ZW0sa2V5KXtcbiAgICAgICAgICAgICAgICBpZighKG5vdGlmaWNhdGlvbl9pdGVtLnRpcG8gaW4gbmV3Tm90aWZpY2F0aW9uQXJyYXkpKXtcbiAgICAgICAgICAgICAgICAgIG5ld05vdGlmaWNhdGlvbkFycmF5W25vdGlmaWNhdGlvbl9pdGVtLnRpcG9dID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKCEobm90aWZpY2F0aW9uX2l0ZW0udWlkIGluIG5ld05vdGlmaWNhdGlvbkFycmF5W25vdGlmaWNhdGlvbl9pdGVtLnRpcG9dKSl7XG4gICAgICAgICAgICAgICAgICBuZXdOb3RpZmljYXRpb25BcnJheVtub3RpZmljYXRpb25faXRlbS50aXBvXVtub3RpZmljYXRpb25faXRlbS51aWRdID0gMTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgIG5ld05vdGlmaWNhdGlvbkFycmF5W25vdGlmaWNhdGlvbl9pdGVtLnRpcG9dW25vdGlmaWNhdGlvbl9pdGVtLnVpZF0gKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pOyovXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sIDMwMDApO1xuICAgIH07XG5cbiAgICAkc2NvcGUub3Blbk5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uKG5vdGlmaWNhdGlvbil7XG4gICAgICAkc2NvcGUuZG9udFNob3dOb3RpZmljYXRpb25BZ2Fpbihub3RpZmljYXRpb24ubmlkKTtcbiAgICAgIGlmKG5vdGlmaWNhdGlvbi50aXBvPT1cIm51ZXZvX21lbnNhamVcIil7XG4gICAgICAgICRzY29wZS5zZW5kX21lc3NhZ2VfdG8obm90aWZpY2F0aW9uLnVpZCk7XG4gICAgICB9ZWxzZSBpZihub3RpZmljYXRpb24udGlwbz09XCJpbnZpdGFjaW9uX2FfdHJhZ29cIil7XG4gICAgICAgICRzY29wZS5vcGVuSW52aXRhdGlvbnNNb2RhbChub3RpZmljYXRpb24udWlkKTtcbiAgICAgIH1lbHNlIGlmKG5vdGlmaWNhdGlvbi50aXBvPT1cInJlc3B1ZXN0YV9hX2ludml0YWNpb25cIil7XG4gICAgICAgICRzY29wZS5vcGVuSW52aXRhdGlvbnNNb2RhbChub3RpZmljYXRpb24udWlkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuZG9udFNob3dOb3RpZmljYXRpb25BZ2FpbiA9IGZ1bmN0aW9uKG5pZCl7XG4gICAgICBpZihVc2VyU2VydmljZS51aWQpe1xuICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLmRvbnRTaG93Tm90aWZpY2F0aW9uQWdhaW4oVXNlclNlcnZpY2UubmFtZSxVc2VyU2VydmljZS5wYXNzd29yZCxuaWQpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgLy9BRlRFUiBTRU5ESU5HIE5PVCBTSE9XIE9SREVSIERPIE5PVEhJTkdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmNsb3NlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24obm90aWZpY2F0aW9uKXtcbiAgICAgICRzY29wZS5kb250U2hvd05vdGlmaWNhdGlvbkFnYWluKG5vdGlmaWNhdGlvbi5uaWQpO1xuICAgIH1cblxuICAgICRzY29wZS5vcGVuV2Vic2l0ZSA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgbG9jYXRpb246ICdubycsXG4gICAgICAgICAgICAgICAgY2xlYXJjYWNoZTogJ3llcycsXG4gICAgICAgICAgICAgICAgdG9vbGJhcjogJ25vJ1xuICAgICAgICAgICAgfTtcblxuICAgICAkY29yZG92YUluQXBwQnJvd3Nlci5vcGVuKHVybCwgJ19ibGFuaycsIG9wdGlvbnMpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgLy8gZXJyb3JcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNyZWF0ZV9vbmxpbmVfbWFwID0gZnVuY3Rpb24oKXtcbiAgICAgICRzY29wZS5tYXAgPSB7XG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgdGlsZUxheWVyOiAnaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmcnLFxuICAgICAgICAgIG1pblpvb206IDEyLFxuICAgICAgICAgIG1heFpvb206IDE4LFxuICAgICAgICAgIHpvb21Db250cm9sUG9zaXRpb246ICd0b3BsZWZ0JyxcbiAgICAgICAgfSxcbiAgICAgICAgbWFya2Vyczoge30sXG4gICAgICAgIGV2ZW50czoge1xuICAgICAgICAgIG1hcDoge1xuICAgICAgICAgICAgZW5hYmxlOiBbJ2NvbnRleHQnXSxcbiAgICAgICAgICAgIGxvZ2ljOiAnZW1pdCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNlbnRlcjoge1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgJHNjb3BlLmxvYWRQaW5zTGF5ZXIoKTtcbiAgICAgICRzY29wZS5tYXAuY2VudGVyID0ge1xuICAgICAgICAgIGxhdDogLTM0LjkwMTExMyxcbiAgICAgICAgICBsbmc6IC01Ni4xNjQ1MzEsXG4gICAgICAgICAgem9vbTogMTZcbiAgICAgICAgfTtcbiAgICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XG4gICAgICAgIG1hcC5vbignbW92ZWVuZCcsICRzY29wZS5oaWRlT2ZmU2NyZWVuUGlucyk7XG4gICAgICB9KTtcbiAgICB9O1xuXG5cblxuICAkc2NvcGUubmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUubmV4dCgpO1xuICB9O1xuXG4gICRzY29wZS5wcmV2aW91cyA9IGZ1bmN0aW9uKCkge1xuICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUucHJldmlvdXMoKTtcbiAgfTtcblxuICAkc2NvcGUuYmFja190b19tYXAgPSBmdW5jdGlvbihiYWNrX3RvX21hcCl7XG4gICAgaWYoYmFja190b19tYXApe1xuICAgICAgLy9Mb2NhdGlvbnNTZXJ2aWNlLmluaXRpYWxfbGF0ID0gJHNjb3BlLnJlcG9ydC5sYXQ7XG4gICAgICAvL0xvY2F0aW9uc1NlcnZpY2UuaW5pdGlhbF9sbmcgPSAkc2NvcGUucmVwb3J0LmxvbjtcbiAgICAgIE1vZGFsU2VydmljZS5jaGVja05vTW9kYWxJc09wZW4oKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgLy8kc2NvcGUuYWRkUmVwb3J0c0xheWVyKCk7XG4gICAgfWVsc2V7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG4gIH1cblxuXG4gICRzY29wZS5pbWFnZSA9IG51bGw7XG5cbiAgJHNjb3BlLmFkZEltYWdlID0gZnVuY3Rpb24oaXNGcm9tQWxidW0sIGlzVXNlclBob3RvLCBpc0NvbW1lbnRQaG90bywgaXNOZXdVc2VyUGhvdG8pIHtcbiAgICAvL2FsZXJ0KFwiYWRkSW1hZ2VcIik7XG4gICAgJHNjb3BlLmlzVXNlclBob3RvID0gaXNVc2VyUGhvdG87XG4gICAgJHNjb3BlLmlzQ29tbWVudFBob3RvID0gaXNDb21tZW50UGhvdG87XG4gICAgJHNjb3BlLmlzTmV3VXNlclBob3RvID0gaXNOZXdVc2VyUGhvdG87XG5cbiAgICB2YXIgc291cmNlID0gQ2FtZXJhLlBpY3R1cmVTb3VyY2VUeXBlLkNBTUVSQTtcbiAgICB2YXIgZml4X29yaWVudGF0aW9uID0gdHJ1ZTtcbiAgICB2YXIgc2F2ZV90b19nYWxsZXJ5ID0gdHJ1ZTtcbiAgICBpZihpc0Zyb21BbGJ1bT09MSl7XG4gICAgICBzb3VyY2UgPSBDYW1lcmEuUGljdHVyZVNvdXJjZVR5cGUuUEhPVE9MSUJSQVJZO1xuICAgICAgZml4X29yaWVudGF0aW9uID0gZmFsc2U7XG4gICAgICBzYXZlX3RvX2dhbGxlcnkgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIHF1YWxpdHk6IDkwLFxuICAgICAgZGVzdGluYXRpb25UeXBlOiBDYW1lcmEuRGVzdGluYXRpb25UeXBlLkZJTEVfVVJJLFxuICAgICAgc291cmNlVHlwZTogc291cmNlLFxuICAgICAgYWxsb3dFZGl0OiBmYWxzZSxcbiAgICAgIGNvcnJlY3RPcmllbnRhdGlvbiA6IGZpeF9vcmllbnRhdGlvbixcbiAgICAgIGVuY29kaW5nVHlwZTogQ2FtZXJhLkVuY29kaW5nVHlwZS5KUEVHLFxuICAgICAgcG9wb3Zlck9wdGlvbnM6IENhbWVyYVBvcG92ZXJPcHRpb25zLFxuICAgICAgc2F2ZVRvUGhvdG9BbGJ1bTogc2F2ZV90b19nYWxsZXJ5LFxuICAgICAgdGFyZ2V0V2lkdGg6IDUwMCxcbiAgICAgIHRhcmdldEhlaWdodDogNTAwXG4gICAgfTtcblxuXG4gICAgJGNvcmRvdmFDYW1lcmEuZ2V0UGljdHVyZShvcHRpb25zKS50aGVuKGZ1bmN0aW9uKGltYWdlRGF0YSkge1xuICAgICAgb25JbWFnZVN1Y2Nlc3MoaW1hZ2VEYXRhKTtcblxuICAgICAgZnVuY3Rpb24gb25JbWFnZVN1Y2Nlc3MoZmlsZVVSSSkge1xuICAgICAgICB3aW5kb3cuRmlsZVBhdGgucmVzb2x2ZU5hdGl2ZVBhdGgoZmlsZVVSSSwgZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgLy8gb25TdWNjZXNzIGNvZGVcbiAgICAgICAgICAvL2FsZXJ0KHJlc3VsdCk7XG4gICAgICAgICAgZmlsZVVSSSA9ICdmaWxlOi8vJyArIHJlc3VsdDtcbiAgICAgICAgICBpZihyZXN1bHQuc3RhcnRzV2l0aChcImZpbGU6Ly9cIikpe1xuICAgICAgICAgICAgZmlsZVVSSSA9IHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoJHNjb3BlLmlzVXNlclBob3RvPT0xKXtcbiAgICAgICAgICAgIC8vVXNlclNlcnZpY2UuYWRkX3Bob3RvKGZpbGVVUkkpO1xuICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGUucGljdHVyZV91cmwgPSBmaWxlVVJJO1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgaWYoJHNjb3BlLmlzQ29tbWVudFBob3RvPT0xKXtcbiAgICAgICAgICAgICAgJHNjb3BlLmNvbW1lbnQuZmlsZSA9IGZpbGVVUkk7XG4gICAgICAgICAgICB9ZWxzZSBpZigkc2NvcGUuaXNOZXdVc2VyUGhvdG89PTEpe1xuICAgICAgICAgICAgICAkc2NvcGUubmV3dXNlci5waWN0dXJlX3VybCA9IGZpbGVVUkk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgICRzY29wZS5pbWdVUkkgPSBmaWxlVVJJO1xuICAgICAgICAgIC8vY3JlYXRlRmlsZUVudHJ5KGZpbGVVUkkpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIGFsZXJ0KFwiRXJyb3IgcmVzb2x2ZU5hdGl2ZVBhdGhcIiArIGVycm9yKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY3JlYXRlRmlsZUVudHJ5KGZpbGVVUkkpIHtcbiAgICAgICAgd2luZG93LnJlc29sdmVMb2NhbEZpbGVTeXN0ZW1VUkwoZmlsZVVSSSwgY29weUZpbGUsIGZhaWwpO1xuICAgICAgfVxuXG4gICAgICAvLyA1XG4gICAgICBmdW5jdGlvbiBjb3B5RmlsZShmaWxlRW50cnkpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBmaWxlRW50cnkuZnVsbFBhdGguc3Vic3RyKGZpbGVFbnRyeS5mdWxsUGF0aC5sYXN0SW5kZXhPZignLycpICsgMSk7XG4gICAgICAgIHZhciBuZXdOYW1lID0gbWFrZWlkKCkgKyBuYW1lO1xuXG4gICAgICAgIHdpbmRvdy5yZXNvbHZlTG9jYWxGaWxlU3lzdGVtVVJMKGNvcmRvdmEuZmlsZS5kYXRhRGlyZWN0b3J5LCBmdW5jdGlvbihmaWxlU3lzdGVtMikge1xuICAgICAgICAgICAgZmlsZUVudHJ5LmNvcHlUbyhcbiAgICAgICAgICAgICAgZmlsZVN5c3RlbTIsXG4gICAgICAgICAgICAgIG5ld05hbWUsXG4gICAgICAgICAgICAgIG9uQ29weVN1Y2Nlc3MsXG4gICAgICAgICAgICAgIGZhaWxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmYWlsKTtcbiAgICAgIH1cblxuICAgICAgLy8gNlxuICAgICAgZnVuY3Rpb24gb25Db3B5U3VjY2VzcyhlbnRyeSkge1xuICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS5pbWFnZSA9IGVudHJ5Lm5hdGl2ZVVSTDtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZhaWwoZXJyb3IpIHtcblxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBtYWtlaWQoKSB7XG4gICAgICAgIHZhciB0ZXh0ID0gXCJcIjtcbiAgICAgICAgdmFyIHBvc3NpYmxlID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgICAgdGV4dCArPSBwb3NzaWJsZS5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zc2libGUubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICB9XG5cbiAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgIC8vY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUudXJsRm9ySW1hZ2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW1hZ2VVUkwgPSBcImh0dHA6Ly9wbGFjZWhvbGQuaXQvMjAweDIwMFwiO1xuICAgIGlmICgkc2NvcGUuaW1hZ2UpIHtcbiAgICAgIHZhciBuYW1lID0gJHNjb3BlLmltYWdlLnN1YnN0cigkc2NvcGUuaW1hZ2UubGFzdEluZGV4T2YoJy8nKSArIDEpO1xuICAgICAgaW1hZ2VVUkwgPSBjb3Jkb3ZhLmZpbGUuZGF0YURpcmVjdG9yeSArIG5hbWU7XG4gICAgfVxuICAgIC8vY29uc29sZS5sb2coXCJJbWFnZVVSTCA9IFwiICsgaW1hZ2VVUkwpO1xuICAgIHJldHVybiBpbWFnZVVSTDtcbiAgfTtcblxuXG4gICAgJHNjb3BlLnNjcm9sbE1lID0gZnVuY3Rpb24oYW5jaG9yX2lkKXtcbiAgICAgICRsb2NhdGlvbi5oYXNoKGFuY2hvcl9pZCk7XG4gICAgICB2YXIgaGFuZGxlICA9ICRpb25pY1Njcm9sbERlbGVnYXRlLiRnZXRCeUhhbmRsZSgnY29udGVudCcpO1xuICAgICAgaGFuZGxlLmFuY2hvclNjcm9sbCgpO1xuICAgIH1cblxuICAgICRzY29wZS5zZXRfYWN0aXZlX29wdGlvbiA9IGZ1bmN0aW9uKGJ1dHRvbmlkKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25pZCkuY2xhc3NOYW1lID0gXCJvcHRpb24tYWN0aXZlXCI7XG4gICAgfVxuXG4gICAgJHNjb3BlLmhpZGVfc3BlY2lhbF9kaXZzID0gZnVuY3Rpb24oKXtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlci1vcHRpb25zLW1lbnVcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcbiAgICB9XG5cbiAgICAkc2NvcGUuY2xvc2VfcmVwb3J0X2RldGFpbF9tb2RhbCA9IGZ1bmN0aW9uKCl7XG4gICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgICAkc2NvcGUucmVwb3J0X2RldGFpbF9pZCA9IG51bGw7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBDZW50ZXIgbWFwIG9uIHVzZXIncyBjdXJyZW50IHBvc2l0aW9uXG4gICAgICovXG4gICAgJHNjb3BlLmxvY2F0ZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAkY29yZG92YUdlb2xvY2F0aW9uXG4gICAgICAgIC5nZXRDdXJyZW50UG9zaXRpb24oKVxuICAgICAgICAudGhlbihmdW5jdGlvbihwb3NpdGlvbikge1xuICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLmxhdCA9IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZTtcbiAgICAgICAgICAkc2NvcGUubWFwLmNlbnRlci5sbmcgPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlO1xuICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLnpvb20gPSAxNTtcblxuICAgICAgICAgICRzY29wZS5tYXAubWFya2Vycy5ub3cgPSB7XG4gICAgICAgICAgICBsYXQ6IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSxcbiAgICAgICAgICAgIGxuZzogcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiWW91IEFyZSBIZXJlXCIsXG4gICAgICAgICAgICBmb2N1czogdHJ1ZSxcbiAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2VcbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIC8vIGVycm9yXG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkxvY2F0aW9uIGVycm9yIVwiKTtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuXG5cbiAgICAkc2NvcGUuYWRkTWFwQ29udHJvbHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcF9jcm9zc2hhaXInKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcF9jcm9zc2hhaXJfYnV0dG9uJykuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgIH07XG5cblxuICAgICRzY29wZS5jaGFuZ2VVc2VyTG9jYXRpb25QaW4gPSBmdW5jdGlvbihsYXQsbG9uLHVpZCl7XG4gICAgICBpZigkc2NvcGUub25saW5lX3VzZXJfZ2VvX2FycmF5W3VpZF0pe1xuICAgICAgICBsYXllciA9ICRzY29wZS5vbmxpbmVfdXNlcl9nZW9fYXJyYXlbdWlkXTtcbiAgICAgICAgdmFyIG5ld0xhdExuZyA9IG5ldyBMLkxhdExuZyhsYXQsIGxvbik7XG4gICAgICAgIGxheWVyLnNldExhdExuZyhuZXdMYXRMbmcpO1xuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5oaWRlT2ZmU2NyZWVuUGlucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcbiAgICAgICAgdmFyIG1hcEJvdW5kcyA9IG1hcC5nZXRCb3VuZHMoKTtcbiAgICAgICAgJHNjb3BlLnVzZXJzVmlzaWJsZSA9IFtdO1xuICAgICAgICAgICRzY29wZS5vbmxpbmVfdXNlcl9nZW9fYXJyYXkuZm9yRWFjaChmdW5jdGlvbihsYXllcixrZXkpe1xuICAgICAgICAgICAgdmFyIHNob3VsZEJlVmlzaWJsZSA9IG1hcEJvdW5kcy5jb250YWlucyhsYXllci5nZXRMYXRMbmcoKSk7XG4gICAgICAgICAgICBpZiAoIXNob3VsZEJlVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNob3VsZEJlVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIG1hcC5hZGRMYXllcihsYXllcik7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzVmlzaWJsZS5wdXNoKGxheWVyLmZlYXR1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUucmVtb3ZlQWxsUGlucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcbiAgICAgICAgJHNjb3BlLnVzZXJzVmlzaWJsZSA9IFtdO1xuICAgICAgICBpZigkc2NvcGUub25saW5lX3VzZXJfZ2VvX2FycmF5KXtcbiAgICAgICAgICAkc2NvcGUub25saW5lX3VzZXJfZ2VvX2FycmF5LmZvckVhY2goZnVuY3Rpb24obGF5ZXIsa2V5KXtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJyZW1vdmluZ1wiKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2cobGF5ZXIpO1xuICAgICAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyKTtcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUubG9hZFBpbnNMYXllciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uKG1hcCkge1xuICAgICAgICAgIFBpblNlcnZpY2UuZ2V0QWxsKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmKFBpblNlcnZpY2UubGFzdFBpbnNSZXNwb25zZT09bnVsbCB8fCAoUGluU2VydmljZS5sYXN0UGluc1Jlc3BvbnNlICYmIFBpblNlcnZpY2UubGFzdFBpbnNSZXNwb25zZSE9cmVzcG9uc2UpKXtcbiAgICAgICAgICAgICAgaWYoJHNjb3BlLm9ubGluZV91c2VyX2dlb19hcnJheSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzVmlzaWJsZSA9IFtdO1xuICAgICAgICAgICAgICAgICRzY29wZS5vbmxpbmVfdXNlcl9nZW9fYXJyYXkuZm9yRWFjaChmdW5jdGlvbihsYXllcixrZXkpe1xuICAgICAgICAgICAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFBpblNlcnZpY2UubGFzdFBpbnNSZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAkc2NvcGUucmVwb3J0c0J5U3RhdGUgPSB7fTtcbiAgICAgICAgICAgICAgdmFyIHBpbnNBcnJheSA9IHJlc3BvbnNlLmRhdGEuZmVhdHVyZXM7XG4gICAgICAgICAgICAgICRzY29wZS5vbmxpbmVfdXNlcnNfZ2VvID0gcmVzcG9uc2UuZGF0YS5mZWF0dXJlcztcbiAgICAgICAgICAgICAgcGluc0FycmF5LmZvckVhY2goZnVuY3Rpb24oZmVhdHVyZSl7XG4gICAgICAgICAgICAgICAgaWYgKGZlYXR1cmUucHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9uID0gZmVhdHVyZS5nZW9tZXRyeS5jb29yZGluYXRlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhdCA9IGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV07XG4gICAgICAgICAgICAgICAgICAgIGlmKGxvbiYmbGF0KXtcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgb25saW5lU3RhdHVzID0gZmVhdHVyZS5wcm9wZXJ0aWVzLk9ubGluZV9zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGljb24gPSBmZWF0dXJlLnByb3BlcnRpZXMuSWNvbjtcbiAgICAgICAgICAgICAgICAgICAgICBpZihpY29uPT1cImFub25cIil7XG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uID0gXCIuL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbl9zaGFkb3cgPSAnLi9pbWcvZ2VuZXJpY19waW5fcmVkLnBuZyc7XG4gICAgICAgICAgICAgICAgICAgICAgaWYob25saW5lU3RhdHVzPT1cIk9ubGluZVwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25fc2hhZG93ID0gJy4vaW1nL2dlbmVyaWNfcGluX2dyZWVuLnBuZyc7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXJJY29uID0gTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd1VybDogaWNvbl9zaGFkb3csXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dTaXplOiAgIFsxMDAsIDEzOF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dBbmNob3I6IFs0NCwgMTM4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25Vcmw6IGljb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogWzQ2LCA0Nl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uQW5jaG9yOiBbMjQsIDEyMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cEFuY2hvcjogWzAsIC0xMzhdXG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGxheWVyID0gTC5tYXJrZXIoW2xhdCwgbG9uXSwge2ljb246IG1hcmtlckljb259KTtcbiAgICAgICAgICAgICAgICAgICAgICBsYXllci5mZWF0dXJlID0gZmVhdHVyZTtcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUub25saW5lX3VzZXJfZ2VvX2FycmF5W2xheWVyLmZlYXR1cmUucHJvcGVydGllcy5VaWRdID0gbGF5ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmUucHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVpZCA9IGZlYXR1cmUucHJvcGVydGllcy5VaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGZlYXR1cmUucHJvcGVydGllcy5OYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludGVyZXN0ZWQgPSBmZWF0dXJlLnByb3BlcnRpZXMuSW50ZXJlc3RlZEluO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9IGZlYXR1cmUucHJvcGVydGllcy5TdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VuZGVyID0gZmVhdHVyZS5wcm9wZXJ0aWVzLkdlbmRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIG9ubGluZVN0YXR1cyA9IGZlYXR1cmUucHJvcGVydGllcy5PbmxpbmVfc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9mZWF0dXJlLnByb3BlcnRpZXMuQ2FudGFsayA9ICRzY29wZS5jYW5UYWxrVG9Vc2VyKGZlYXR1cmUucHJvcGVydGllcy5VaWQsMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL01lc3NhZ2VTZXJ2aWNlLmNhblRhbGtUb1VzZXJzW3VpZF09PTA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihVc2VyU2VydmljZS51aWQgJiYgVXNlclNlcnZpY2UudWlkPT11aWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gXCJUw7o6IFwiK25hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFVwZGF0ZSA9ICRzY29wZS50aW1lQ29udmVydGVyKGZlYXR1cmUucHJvcGVydGllcy5Mb2NhdGlvblRpbWVTdGFtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gJzxhIGNsYXNzPVwibmFtZV9pbnNpZGVfbWFya2VyX3BvcHVwXCI+PHA+JyArIG5hbWUgKyAnPC9wPic7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArJzxwIGNsYXNzPVwiZ2VuZGVyX2luc2lkZV9tYXJrZXJfcG9wdXBcIj4nK2dlbmRlcisnPC9wPic7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArJzxwPjxpbWcgY2xhc3M9XCJpbWdfaW5zaWRlX21hcmtlcl9wb3B1cFwiIHNyYz1cIicraWNvbisnXCIvPjwvcD4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyc8cCBjbGFzcz1cInN0YXR1c19pbnNpZGVfbWFya2VyX3BvcHVwXCI+XCInK3N0YXR1cysnXCI8L3A+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sICsnPHAgY2xhc3M9XCJpbnRlcmVzdGVkX2luc2lkZV9tYXJrZXJfcG9wdXBcIj5JbnRlcmVzYWRAIGVuICcraW50ZXJlc3RlZCsnPC9wPic7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArJzxwIGNsYXNzPVwibGFzdHVwZGF0ZV9pbnNpZGVfbWFya2VyX3BvcHVwXCI+JytvbmxpbmVTdGF0dXMrJzwvcD4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyc8cCBjbGFzcz1cImxhc3R1cGRhdGVfaW5zaWRlX21hcmtlcl9wb3B1cFwiPicrbGFzdFVwZGF0ZSsnPC9wPic7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZighVXNlclNlcnZpY2UudWlkIHx8IFVzZXJTZXJ2aWNlLnVpZCE9dWlkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyc8cCBjbGFzcz1cIm1lc3NhZ2VfaWNvbl9pbnNpZGVfbWFya2VyX3BvcHVwXCI+PGltZyBuZy1jbGljaz1cInNlbmRfbWVzc2FnZV90bygnK3VpZCsnKTtcIiBzcmM9XCIuL2ltZy9tZXNzYWdlX2ljb24ucG5nXCIgLz4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArJzxpbWcgbmctY2xpY2s9XCJvcGVuSW52aXRhdGlvbnNNb2RhbCgnK3VpZCsnKTtcIiBzcmM9XCIuL2ltZy9kcmlua19pY29uLnBuZ1wiIC8+PC9wPic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArJzwvYT4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXBpbGVkID0gJGNvbXBpbGUoaHRtbCkoJHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyLmJpbmRQb3B1cChjb21waWxlZFswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAkc2NvcGUuaGlkZU9mZlNjcmVlblBpbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRzY29wZS5jaGVja1RhbGtTdGF0dXMoKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUuY2hlY2tUYWxrU3RhdHVzID0gZnVuY3Rpb24oKXtcbiAgICAgIC8vJHNjb3BlLm15SW50ZXJ2YWxzWydjYW5UYWxrJ10gPSAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwiY2FuX3RhbGtcIikpe1xuICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmNoZWNrV2hvQ2FuVGFsayhVc2VyU2VydmljZS5uYW1lLFVzZXJTZXJ2aWNlLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgICAgLy9TZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKTtcbiAgICAgICAgICAgIGlmKCEoZGF0YS5TdGF0dXMgJiYgZGF0YS5TdGF0dXM9PVwiZXJyb3JcIikpe1xuICAgICAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24odWlkKXtcbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5jYW5UYWxrVG9Vc2Vyc1sndWlkLScrdWlkXSA9IDE7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcImNhbl90YWxrXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAvL30sIDIwMDApO1xuICAgIH07XG5cbiAgICAkc2NvcGUua2V5X3ByZXNzID0gZnVuY3Rpb24oZXZlbnQsc3RhZ2Upe1xuICAgICAgdmFyIGtleUNvZGUgPSBldmVudC5rZXlDb2RlO1xuICAgICAgaWYoc3RhZ2U9PSdwcml2YXRlX2NoYXQnKXtcbiAgICAgICAgaWYoa2V5Q29kZT09MTMpe1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZihjb3Jkb3ZhPT09bnVsbCl7XG5cbiAgICAgICAgICAgIH1lbHNlIGlmKGNvcmRvdmEmJmNvcmRvdmEucGx1Z2lucy5LZXlib2FyZCl7XG4gICAgICAgICAgICAgIGNvcmRvdmEucGx1Z2lucy5LZXlib2FyZC5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjYXRjaChlcnIpIHtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5zZW5kX21lc3NhZ2VfdG8gPSBmdW5jdGlvbih1aWQpe1xuICAgICAgICBpZihTZW1hcGhvcmVTZXJ2aWNlLnRha2VJZkF2YWlsYWJsZShcIm9wZW4tbW9kYWxcIikpe1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgIGlmKFVzZXJTZXJ2aWNlLnVpZCl7XG4gICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmNoZWNrV2hvQ2FuVGFsayhVc2VyU2VydmljZS5uYW1lLFVzZXJTZXJ2aWNlLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgICAgICAgIC8vU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApO1xuICAgICAgICAgICAgICAgIGlmKCEoZGF0YS5TdGF0dXMgJiYgZGF0YS5TdGF0dXM9PVwiZXJyb3JcIikpe1xuICAgICAgICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHVpZCl7XG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmNhblRhbGtUb1VzZXJzWyd1aWQtJyt1aWRdID0gMTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgaWYoISRzY29wZS5jYW5UYWxrVG9Vc2VyKHVpZCkpe1xuICAgICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcIm9wZW4tbW9kYWxcIik7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhbGVydFBvcHVwID0gJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiSW52aXRhIGFsZ28gZGUgdG9tYXJcIixcbiAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIkRlYmUgdGVuZXIgYWwgbWVub3MgdW5hIGludml0YWNpw7NuIGEgdW4gdHJhZ28gYWNlcHRhZGEgZW50cmUgdXN0ZWQgeSBlc3RhIHBlcnNvbmEgcGFyYSBwb2RlciBoYWJsYXIuXCJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAvL3JldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYXQgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYXQub3RoZXJfdXNlciA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhdC5vdGhlcl91c2VyLnVpZCA9IHVpZDtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYXQubWVzc2FnZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYXQubmV3X3RleHRfbWVzc2FnZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmdldFVzZXJJbmZvKHVpZCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5QaG90byl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhdC5vdGhlcl91c2VyLnBpY3R1cmVfdXJsID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuUGhvdG87XG4gICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhdC5vdGhlcl91c2VyLnBpY3R1cmVfdXJsID0gXCIuL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhdC5vdGhlcl91c2VyLnVzZXJuYW1lID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgYXV0aG9yX3VpZCA9IFVzZXJTZXJ2aWNlLnVpZDtcbiAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5nZXRBbGxNZXNzYWdlc1RvVXNlcihVc2VyU2VydmljZS5uYW1lLCBVc2VyU2VydmljZS5wYXNzd29yZCx1aWQsYXV0aG9yX3VpZCkudGhlbihmdW5jdGlvbihyZXNwMil7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3AyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEoZGF0YS5TdGF0dXMgJiYgZGF0YS5TdGF0dXM9PVwiZXJyb3JcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhdC5tZXNzYWdlcyA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3AyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5teUludGVydmFsc1sncHJpdmF0ZU1lc3NhZ2UnXSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoJHNjb3BlLm15SW50ZXJ2YWxzWydwcml2YXRlTWVzc2FnZSddKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5teUludGVydmFsc1sncHJpdmF0ZU1lc3NhZ2UnXSA9ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5nZXRBbGxNZXNzYWdlc1RvVXNlcihVc2VyU2VydmljZS5uYW1lLCBVc2VyU2VydmljZS5wYXNzd29yZCwkc2NvcGUuY2hhdC5vdGhlcl91c2VyLnVpZCxVc2VyU2VydmljZS51aWQpLnRoZW4oZnVuY3Rpb24ocmVzcDMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEyID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcDMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIShkYXRhMi5TdGF0dXMgJiYgZGF0YTIuU3RhdHVzPT1cImVycm9yXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYXQubWVzc2FnZXMgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShkYXRhMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtbmlkID0gJHNjb3BlLmNoYXQubWVzc2FnZXNbJHNjb3BlLmNoYXQubWVzc2FnZXMubGVuZ3RoLTFdLm5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNjcm9sbE1lKFwibWVzc2FnZS1cIittbmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwoJ3RlbXBsYXRlcy9wcml2YXRlX2NoYXQuaHRtbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhcmR3YXJlQmFja0J1dHRvbkNsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9mb2N1c0ZpcnN0SW5wdXQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihtb2RhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlci1vcHRpb25zLW1lbnVcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5jaGVja05vTW9kYWxJc09wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbCA9IG1vZGFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJvcGVuLW1vZGFsXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1uaWQgPSAkc2NvcGUuY2hhdC5tZXNzYWdlc1skc2NvcGUuY2hhdC5tZXNzYWdlcy5sZW5ndGgtMV0ubmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNjcm9sbE1lKFwibWVzc2FnZS1cIittbmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgLy9TZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcImNhbl90YWxrXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJvcGVuLW1vZGFsXCIpO1xuICAgICAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICAgICAgICAgIHRpdGxlOiBcIkluaWNpZSBzZXNpw7NuIG8gY3JlZSB1bmEgbnVldmEgY3VlbnRhXCIsXG4gICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIkRlYmUgZXN0YXIgbG9ndWVhZG8gcGFyYSBwb2RlciBlbnZpYXIgeSByZWNpYmlyIG1lbnNhamVzLlwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYWxlcnRQb3B1cC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgICAgICAgLy9yZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAvL1NFTUFGT1JPIE9DVVBBRE9cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgJHNjb3BlLmNoZWNrSWZDYW5SZXBseUludml0YXRpb24gPSBmdW5jdGlvbihpbnZpdGF0aW9uKXtcbiAgICAgIGlmKFVzZXJTZXJ2aWNlLnVpZCl7XG4gICAgICAgIGlmKFVzZXJTZXJ2aWNlLnVpZCE9aW52aXRhdGlvbi51aWQpe1xuICAgICAgICAgIGlmKGludml0YXRpb24uc3RhdHVzPT1cIkVudmlhZGFcInx8aW52aXRhdGlvbi5zdGF0dXM9PVwiUmVjaWJpZGFcIil7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAkc2NvcGUuY2hlY2tJZldhaXRpbmdSZXBseUZyb21JbnZpdGF0aW9uID0gZnVuY3Rpb24oaW52aXRhdGlvbil7XG4gICAgICBpZihVc2VyU2VydmljZS51aWQpe1xuICAgICAgICBpZihVc2VyU2VydmljZS51aWQ9PWludml0YXRpb24udWlkKXtcbiAgICAgICAgICBpZihpbnZpdGF0aW9uLnN0YXR1cz09XCJFbnZpYWRhXCJ8fGludml0YXRpb24uc3RhdHVzPT1cIlJlY2liaWRhXCIpe1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgJHNjb3BlLmdldERyaW5rQ29zdEJ5TmlkID0gZnVuY3Rpb24obmlkKXtcbiAgICAgIHZhciByZXN1bHQgPSAwO1xuICAgICAgaWYoJHNjb3BlLmludml0YXRpb24uYXZhaWxhYmxlX2RyaW5rcyl7XG4gICAgICAgICRzY29wZS5pbnZpdGF0aW9uLmF2YWlsYWJsZV9kcmlua3MuZm9yRWFjaChmdW5jdGlvbihkcmluaykge1xuICAgICAgICAgIGlmKGRyaW5rLk5pZD09bmlkKXtcbiAgICAgICAgICAgIHJlc3VsdCA9IGRyaW5rLkNyZWRpdHM7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgJHNjb3BlLmFjY2VwdEludml0YXRpb24gPSBmdW5jdGlvbihuaWQpe1xuICAgICAgJHNjb3BlLnNlbmRfaW52aXRhdGlvbl9yZXNwb25zZShcIkFjZXB0YWRhXCIsbmlkKTtcbiAgICAgICRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIudGFsayA9IHRydWU7XG4gICAgfVxuXG4gICAgJHNjb3BlLnJlZnVzZUludml0YXRpb24gPSBmdW5jdGlvbihuaWQpe1xuICAgICAgJHNjb3BlLnNlbmRfaW52aXRhdGlvbl9yZXNwb25zZShcIlJlY2hhemFkYVwiLG5pZCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNhblRhbGtUb1VzZXIgPSBmdW5jdGlvbih1aWQpe1xuICAgICAgaWYoVXNlclNlcnZpY2UudWlkKXtcbiAgICAgICAgICBpZihNZXNzYWdlU2VydmljZS5jYW5UYWxrVG9Vc2Vyc1sndWlkLScrdWlkXSE9bnVsbCl7XG4gICAgICAgICAgICBpZihNZXNzYWdlU2VydmljZS5jYW5UYWxrVG9Vc2Vyc1sndWlkLScrdWlkXT09MSl7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAkc2NvcGUuc2VuZF9pbnZpdGF0aW9uX3Jlc3BvbnNlID0gZnVuY3Rpb24ocmVzcG9uc2UsbmlkKXtcbiAgICAgIHZhciBlcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXJyb3JfY29udGFpbmVyXCIpO1xuICAgICAgZXJyb3Iuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICBpZihuaWQgPT0gbnVsbCl7XG4gICAgICAgIGVycm9yLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIGVycm9yLmlubmVySFRNTCA9IFwiSHVibyB1biBlcnJvci4gTm8gc2UgZW5jdWVudHJhIGVsIElEIGRlIGludml0YWNpw7NuXCI7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdmFyIGNvc3QgPSAkc2NvcGUuZ2V0RHJpbmtDb3N0QnlOaWQoJHNjb3BlLmludml0YXRpb24uc2VsZWN0ZWRfZHJpbmspO1xuICAgICAgICB2YXIgY3JlZGl0cyA9ICRzY29wZS5pbnZpdGF0aW9uLnVzZXJfY3JlZGl0cztcbiAgICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJzdWJtaXQtZm9ybVwiKSl7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgIERyaW5rU2VydmljZS5zZW5kRHJpbmtJbnZpdGF0aW9uUmVzcG9uc2UocmVzcG9uc2UsVXNlclNlcnZpY2UubmFtZSxVc2VyU2VydmljZS5wYXNzd29yZCxuaWQsVXNlclNlcnZpY2UudWlkKS50aGVuKGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKTtcbiAgICAgICAgICAgIGlmKCEoZGF0YS5TdGF0dXMgJiYgZGF0YS5TdGF0dXM9PVwiZXJyb3JcIikpe1xuICAgICAgICAgICAgICAvL01lc3NhZ2VTZXJ2aWNlLmNhblRhbGtUb1VzZXJzWyd1aWQtJyskc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVpZF0gPSBudWxsO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgIGVycm9yLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgIGVycm9yLmlubmVySFRNTCA9IGRhdGEuTWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5zZW5kX2ludml0YXRpb24gPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIGVycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlcnJvcl9jb250YWluZXJcIik7XG4gICAgICBpZigkc2NvcGUuaW52aXRhdGlvbi5zZWxlY3RlZF9kcmluayA9PSBudWxsKXtcbiAgICAgICAgZXJyb3Iuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgZXJyb3IuaW5uZXJIVE1MID0gXCJEZWJlIHNlbGVjY2lvbmFyIHVuYSBiZWJpZGEgYSBpbnZpdGFyXCI7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdmFyIGNvc3QgPSAkc2NvcGUuZ2V0RHJpbmtDb3N0QnlOaWQoJHNjb3BlLmludml0YXRpb24uc2VsZWN0ZWRfZHJpbmspO1xuICAgICAgICB2YXIgY3JlZGl0cyA9ICRzY29wZS5pbnZpdGF0aW9uLnVzZXJfY3JlZGl0cztcbiAgICAgICAgaWYocGFyc2VGbG9hdChjb3N0KT5wYXJzZUZsb2F0KGNyZWRpdHMpKXtcbiAgICAgICAgICBlcnJvci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgIGVycm9yLmlubmVySFRNTCA9IFwiQ3LDqWRpdG9zIGluc3VmaWNpZW50ZXMuIFBhcmEgcG9kZXIgaW52aXRhciBlc3RhIGJlYmlkYSBkZWJlIGNvbXByYXIgbcOhcyBjcsOpZGl0b3NcIjtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJzdWJtaXQtZm9ybVwiKSl7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICBEcmlua1NlcnZpY2Uuc2VuZERyaW5rSW52aXRhdGlvblRvVXNlcigkc2NvcGUuaW52aXRhdGlvbi5zZWxlY3RlZF9kcmluaywkc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVpZCxVc2VyU2VydmljZS51aWQsVXNlclNlcnZpY2UubmFtZSxVc2VyU2VydmljZS5wYXNzd29yZCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgIHZhciBkYXRhID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCk7XG4gICAgICAgICAgICAgIGlmKCEoZGF0YS5TdGF0dXMgJiYgZGF0YS5TdGF0dXM9PVwiZXJyb3JcIikpe1xuICAgICAgICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLnVzZXJfY3JlZGl0cyA9IGRhdGEuTmV3Q3JlZGl0cztcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi5zZWxlY3RlZF9kcmluayA9IG51bGw7XG4gICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2UuY2FuVGFsa1RvVXNlcnNbJ3VpZC0nKyRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIudWlkXSA9IG51bGw7XG4gICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGVycm9yLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgZXJyb3IuaW5uZXJIVE1MID0gZGF0YS5NZXNzYWdlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUub3Blbkludml0YXRpb25zTW9kYWwgPSBmdW5jdGlvbih1aWQpe1xuICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJvcGVuLW1vZGFsXCIpKXtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIGlmKFVzZXJTZXJ2aWNlLnVpZCl7XG4gICAgICAgICAgJHNjb3BlLmludml0YXRpb24gPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi5yZXNwb25zZSA9IG51bGw7XG4gICAgICAgICAgJHNjb3BlLmludml0YXRpb24ub3RoZXJfdXNlciA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIudWlkID0gdWlkO1xuICAgICAgICAgIC8vTWVzc2FnZVNlcnZpY2UuY2FuVGFsa1RvVXNlcnNbJ3VpZC0nKyRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIudWlkXSA9IG51bGw7XG4gICAgICAgICAgJHNjb3BlLmludml0YXRpb24uaW52aXRhdGlvbnMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi5hdmFpbGFibGVfZHJpbmtzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgJHNjb3BlLmludml0YXRpb24uc2VsZWN0ZWRfZHJpbmsgPSBudWxsO1xuICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmdldFVzZXJJbmZvKHVpZCkudGhlbihmdW5jdGlvbihkYXRhX3Jlc3Ape1xuICAgICAgICAgIGlmKCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKGRhdGFfcmVzcCkuUGhvdG8pe1xuICAgICAgICAgICAgJHNjb3BlLmludml0YXRpb24ub3RoZXJfdXNlci5waWN0dXJlX3VybCA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKGRhdGFfcmVzcCkuUGhvdG87XG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnBpY3R1cmVfdXJsID0gXCIuL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZ1wiO1xuICAgICAgICAgIH1cbiAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVzZXJuYW1lID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UoZGF0YV9yZXNwKS5OYW1lO1xuICAgICAgICAgICAgRHJpbmtTZXJ2aWNlLmdldEFsbERyaW5rc0F2YWlsYWJsZShVc2VyU2VydmljZS5uYW1lLCBVc2VyU2VydmljZS5wYXNzd29yZCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKTtcbiAgICAgICAgICAgICAgaWYoIShkYXRhLlN0YXR1cyAmJiBkYXRhLlN0YXR1cz09XCJlcnJvclwiKSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmludml0YXRpb24uYXZhaWxhYmxlX2RyaW5rcyA9IGRhdGEuRHJpbmtzO1xuICAgICAgICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLnVzZXJfY3JlZGl0cyA9IGRhdGEuVXNlckNyZWRpdHM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgRHJpbmtTZXJ2aWNlLmdldEFsbEludml0YXRpb25zV2l0aFVzZXIoVXNlclNlcnZpY2UubmFtZSwgVXNlclNlcnZpY2UucGFzc3dvcmQsJHNjb3BlLmludml0YXRpb24ub3RoZXJfdXNlci51aWQsVXNlclNlcnZpY2UudWlkKS50aGVuKGZ1bmN0aW9uKHJlc3AyKXtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YTIgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwMik7XG4gICAgICAgICAgICAgICAgaWYoIShkYXRhMi5TdGF0dXMgJiYgZGF0YTIuU3RhdHVzPT1cImVycm9yXCIpKXtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLmludml0YXRpb25zID0gZGF0YTI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmNoZWNrV2hvQ2FuVGFsayhVc2VyU2VydmljZS5uYW1lLFVzZXJTZXJ2aWNlLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKTtcbiAgICAgICAgICAgICAgICAgIGlmKCEoZGF0YS5TdGF0dXMgJiYgZGF0YS5TdGF0dXM9PVwiZXJyb3JcIikpe1xuICAgICAgICAgICAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24odWlkKXtcbiAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5jYW5UYWxrVG9Vc2Vyc1sndWlkLScrdWlkXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmKCRzY29wZS5teUludGVydmFsc1snZHJpbmtJbnZpdGF0aW9uJ10pe1xuICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbCgkc2NvcGUubXlJbnRlcnZhbHNbJ2RyaW5rSW52aXRhdGlvbiddKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLm15SW50ZXJ2YWxzWydkcmlua0ludml0YXRpb24nXSA9ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIERyaW5rU2VydmljZS5nZXRBbGxJbnZpdGF0aW9uc1dpdGhVc2VyKFVzZXJTZXJ2aWNlLm5hbWUsIFVzZXJTZXJ2aWNlLnBhc3N3b3JkLCRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIudWlkLFVzZXJTZXJ2aWNlLnVpZCkudGhlbihmdW5jdGlvbihyZXNwMyl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhMyA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3AzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoIShkYXRhMy5TdGF0dXMgJiYgZGF0YTMuU3RhdHVzPT1cImVycm9yXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi5pbnZpdGF0aW9ucyA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKGRhdGEzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5jaGVja1dob0NhblRhbGsoVXNlclNlcnZpY2UubmFtZSxVc2VyU2VydmljZS5wYXNzd29yZCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApO1xuICAgICAgICAgICAgICAgICAgICAgIGlmKCEoZGF0YS5TdGF0dXMgJiYgZGF0YS5TdGF0dXM9PVwiZXJyb3JcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHVpZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmNhblRhbGtUb1VzZXJzWyd1aWQtJyt1aWRdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICAgICAgICAgICRpb25pY01vZGFsLmZyb21UZW1wbGF0ZVVybCgndGVtcGxhdGVzL2RyaW5rX2ludml0YXRpb24uaHRtbCcsIHtcbiAgICAgICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICAgICAgICBoYXJkd2FyZUJhY2tCdXR0b25DbG9zZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCcsXG4gICAgICAgICAgICAgICAgICAvL2ZvY3VzRmlyc3RJbnB1dDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obW9kYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLW9wdGlvbnMtbWVudVwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbCA9IG1vZGFsO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJvcGVuLW1vZGFsXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwib3Blbi1tb2RhbFwiKTtcbiAgICAgICAgICB2YXIgYWxlcnRQb3B1cCA9ICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgICAgICAgIHRpdGxlOiBcIkluaWNpZSBzZXNpw7NuIG8gY3JlZSB1bmEgbnVldmEgY3VlbnRhXCIsXG4gICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJEZWJlIGVzdGFyIGxvZ3VlYWRvIHBhcmEgcG9kZXIgZW52aWFyIHkgcmVjaWJpciBpbnZpdGFjaW9uZXMuXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAvL3JldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1lbHNle1xuICAgICAgICAvL1NFTUFGT1JPIE9DVVBBRE9cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuY2xvc2VfbWVzc2FnZV9tb2RhbCA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZigkc2NvcGUubXlJbnRlcnZhbHNbJ3ByaXZhdGVNZXNzYWdlJ10pe1xuICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKCRzY29wZS5teUludGVydmFsc1sncHJpdmF0ZU1lc3NhZ2UnXSk7XG4gICAgICB9XG4gICAgICBpZigkc2NvcGUubXlJbnRlcnZhbHNbJ2RyaW5rSW52aXRhdGlvbiddKXtcbiAgICAgICAgJGludGVydmFsLmNhbmNlbCgkc2NvcGUubXlJbnRlcnZhbHNbJ2RyaW5rSW52aXRhdGlvbiddKTtcbiAgICAgIH1cbiAgICAgIC8vQ2FyZ2FyIGVsIG1vZGFsIGNvbiBsYSBpbmZvIGRlbCB1c3VhcmlvIGxvZ3VlYWRvIHkgY29uIGVsIHN1Ym1pdCBhIHVwZGF0ZV91c2VyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNsb3NlX2ludml0YXRpb25fbW9kYWwgPSBmdW5jdGlvbigpe1xuICAgICAgaWYoJHNjb3BlLm15SW50ZXJ2YWxzWydwcml2YXRlTWVzc2FnZSddKXtcbiAgICAgICAgJGludGVydmFsLmNhbmNlbCgkc2NvcGUubXlJbnRlcnZhbHNbJ3ByaXZhdGVNZXNzYWdlJ10pO1xuICAgICAgfVxuICAgICAgaWYoJHNjb3BlLm15SW50ZXJ2YWxzWydkcmlua0ludml0YXRpb24nXSl7XG4gICAgICAgICRpbnRlcnZhbC5jYW5jZWwoJHNjb3BlLm15SW50ZXJ2YWxzWydkcmlua0ludml0YXRpb24nXSk7XG4gICAgICB9XG4gICAgICAvL0NhcmdhciBlbCBtb2RhbCBjb24gbGEgaW5mbyBkZWwgdXN1YXJpbyBsb2d1ZWFkbyB5IGNvbiBlbCBzdWJtaXQgYSB1cGRhdGVfdXNlclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgIH1cblxuICAgICRzY29wZS5zZW5kX21lc3NhZ2Vfb2sgPSBmdW5jdGlvbigpe1xuICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJzdWJtaXQtZm9ybVwiKSl7XG4gICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBpZigkc2NvcGUuY2hhdC5uZXdfdGV4dF9tZXNzYWdlKXtcbiAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZW5kVGV4dE1lc3NhZ2VUb1VzZXIoJHNjb3BlLmNoYXQubmV3X3RleHRfbWVzc2FnZSwkc2NvcGUuY2hhdC5vdGhlcl91c2VyLnVpZCxVc2VyU2VydmljZS51aWQsVXNlclNlcnZpY2UubmFtZSxVc2VyU2VydmljZS5wYXNzd29yZCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZV90ZXh0X2FyZWFcIikuaW5uZXJIVE1MPVwiXCI7XG4gICAgICAgICAgICAkc2NvcGUuY2hhdC5uZXdfdGV4dF9tZXNzYWdlID0gXCJcIjtcbiAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmdldEFsbE1lc3NhZ2VzVG9Vc2VyKFVzZXJTZXJ2aWNlLm5hbWUsIFVzZXJTZXJ2aWNlLnBhc3N3b3JkLCRzY29wZS5jaGF0Lm90aGVyX3VzZXIudWlkLFVzZXJTZXJ2aWNlLnVpZCkudGhlbihmdW5jdGlvbihyZXNwMil7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNoYXQubWVzc2FnZXMgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwMik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmdldE5hbWVGcm9tVWlkID1mdW5jdGlvbih1aWQpe1xuICAgICAgaWYoVXNlclNlcnZpY2UudWlkPT11aWQpe1xuICAgICAgICByZXR1cm4gVXNlclNlcnZpY2UubmFtZTtcbiAgICAgIH1lbHNle1xuICAgICAgICBpZigkc2NvcGUuY2hhdC5vdGhlcl91c2VyLnVpZD09dWlkKXtcbiAgICAgICAgICByZXR1cm4gJHNjb3BlLmNoYXQub3RoZXJfdXNlci51c2VybmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5nZXROYW1lRnJvbVVpZEludml0YXRpb24gPWZ1bmN0aW9uKHVpZCl7XG4gICAgICBpZihVc2VyU2VydmljZS51aWQ9PXVpZCl7XG4gICAgICAgIHJldHVybiBVc2VyU2VydmljZS5uYW1lO1xuICAgICAgfWVsc2V7XG4gICAgICAgIGlmKCRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIudWlkPT11aWQpe1xuICAgICAgICAgIHJldHVybiAkc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVzZXJuYW1lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLnRpbWVDb252ZXJ0ZXIgPSBmdW5jdGlvbihVTklYX3RpbWVzdGFtcCl7XG4gICAgICB2YXIgYSA9IG5ldyBEYXRlKFVOSVhfdGltZXN0YW1wICogMTAwMCk7XG4gICAgICB2YXIgbW9udGhzID0gWydFbmVybycsJ0ZlYnJlcm8nLCdNYXJ6bycsJ0FicmlsJywnTWF5bycsJ0p1bmlvJywnSnVsaW8nLCdBZ29zdG8nLCdTZXRpZW1icmUnLCdPY3R1YnJlJywnTm92aWVtYnJlJywnRGljaWVtYnJlJ107XG4gICAgICB2YXIgeWVhciA9IGEuZ2V0RnVsbFllYXIoKTtcbiAgICAgIC8vdmFyIG1vbnRoID0gbW9udGhzW2EuZ2V0TW9udGgoKV07XG4gICAgICB2YXIgbW9udGggPSBhLmdldE1vbnRoKCk7XG4gICAgICBpZihtb250aDwxMCl7XG4gICAgICAgIG1vbnRoID0gXCIwXCIrbW9udGg7XG4gICAgICB9XG4gICAgICB2YXIgZGF5ID0gYS5nZXREYXRlKCk7XG4gICAgICBpZihkYXk8MTApe1xuICAgICAgICBkYXkgPSBcIjBcIitkYXk7XG4gICAgICB9XG4gICAgICB2YXIgaG91ciA9IGEuZ2V0SG91cnMoKTtcbiAgICAgIGlmKGhvdXI8MTApe1xuICAgICAgICBob3VyID0gXCIwXCIraG91cjtcbiAgICAgIH1cbiAgICAgIHZhciBtaW4gPSBhLmdldE1pbnV0ZXMoKTtcbiAgICAgIGlmKG1pbjwxMCl7XG4gICAgICAgIG1pbiA9IFwiMFwiK21pbjtcbiAgICAgIH1cbiAgICAgIHZhciBzZWMgPSBhLmdldFNlY29uZHMoKTtcbiAgICAgIHZhciB0aW1lID0gZGF5ICsgJy8nICsgbW9udGggKyAnLycgKyB5ZWFyICsgJyAnICsgaG91ciArICc6JyArIG1pbjtcbiAgICAgIHJldHVybiB0aW1lO1xuICAgIH1cblxuXG5cbiAgICAvLyBTdWdnZXN0aW9uXG4gICAgJHNjb3BlLm1vZGVsID0gW107XG4gICAgJHNjb3BlLmV4dGVybmFsTW9kZWwgPSBbXTtcbiAgICAkc2NvcGUuc2VsZWN0ZWRJdGVtcyA9IFtdO1xuICAgICRzY29wZS5wcmVzZWxlY3RlZFNlYXJjaEl0ZW1zID0gW107XG4gICAgJHNjb3BlLmNsaWNrZWRWYWx1ZU1vZGVsID0gXCJcIjtcbiAgICAkc2NvcGUucmVtb3ZlZFZhbHVlTW9kZWwgPSBcIlwiO1xuXG5cbiAgICAkc2NvcGUuaXRlbXNSZW1vdmVkID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICRzY29wZS5yZW1vdmVkVmFsdWVNb2RlbCA9IGNhbGxiYWNrO1xuICAgIH07XG5cbiAgICAkc2NvcGUudXNlcl9vcHRpb25zID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLW9wdGlvbnMtbWVudVwiKTtcbiAgICAgIGlmKG1lbnUuc3R5bGUuZGlzcGxheT09XCJibG9ja1wiKXtcbiAgICAgICAgbWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhVc2VyU2VydmljZS5uYW1lKTtcbiAgICAgICAgdmFyIG5hbWUgPSBVc2VyU2VydmljZS5uYW1lO1xuICAgICAgICBpZihuYW1lPT1udWxsKXtcbiAgICAgICAgICAvL05vIGVzdGEgbG9ndWVhZG9cbiAgICAgICAgICAkc2NvcGUuc2hvd19hbm9ueW1vdXNfbWVudSgpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAvL0VzdMOhIGxvZ3VlYWRvXG4gICAgICAgICAgJHNjb3BlLnNob3dfdXNlcl9tZW51KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuc2hvd19hbm9ueW1vdXNfbWVudSA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgbWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlci1vcHRpb25zLW1lbnVcIik7XG4gICAgICB2YXIgaHRtbCA9IFwiPGRpdiBpZD0nYXV0aF9vcHRpb25zJz48ZGl2IGNsYXNzPSdub25hdXRoLWxpbmsnIG5nLWNsaWNrPSdzaG93X2xvZ2luX21vZGFsKCknPkluaWNpYXIgc2VzacOzbjwvZGl2PlwiO1xuICAgICAgaHRtbCA9IGh0bWwgKyBcIjxkaXYgY2xhc3M9J25vbmF1dGgtbGluaycgbmctY2xpY2s9J3Nob3dfc2lnbl91cF9tb2RhbCgpJz5SZWdpc3RyYXJzZTwvZGl2PjwvZGl2PlwiO1xuICAgICAgbWVudS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgJGNvbXBpbGUobWVudSkoJHNjb3BlKTsgLy88LS0tLSByZWNvbXBpbGF0aW9uXG4gICAgICBtZW51LnN0eWxlLmhlaWdodCA9ICcxMjBweCc7XG4gICAgICBtZW51LnN0eWxlLndpZHRoID0gJzE1MHB4JztcbiAgICAgIG1lbnUuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2hvd191c2VyX21lbnUgPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXItb3B0aW9ucy1tZW51XCIpO1xuICAgICAgdmFyIGh0bWwgPSBVc2VyU2VydmljZS5uYW1lICsgXCI8ZGl2IGlkPSdhdXRoX29wdGlvbnMnPjxkaXYgY2xhc3M9J3VzZXItbG9nZ2VkLWxpbmsnIG5nLWNsaWNrPSdzaG93X2VkaXRfcHJvZmlsZV9tb2RhbCgpJz5NaSBwZXJmaWw8L2Rpdj5cIjtcbiAgICAgIC8vaHRtbCA9IGh0bWwgKyBcIjxkaXYgY2xhc3M9J3VzZXItbG9nZ2VkLWxpbmsnIG5nLWNsaWNrPSdjaGFuZ2VfcGFzc3dvcmQoKSc+Q2FtYmlhciBjb250cmFzZcOxYTwvZGl2PlwiO1xuICAgICAgaHRtbCA9IGh0bWwgKyBcIjxkaXYgY2xhc3M9J3VzZXItbG9nZ2VkLWxpbmsnIG5nLWNsaWNrPSdzaWduX291dCgpJz5DZXJyYXIgc2VzacOzbjwvZGl2PjwvZGl2PlwiO1xuICAgICAgbWVudS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgJGNvbXBpbGUobWVudSkoJHNjb3BlKTsgLy88LS0tLSByZWNvbXBpbGF0aW9uXG4gICAgICBtZW51LnN0eWxlLmhlaWdodCA9ICcyMjBweCc7XG4gICAgICBtZW51LnN0eWxlLndpZHRoID0gJzIwMHB4JztcbiAgICAgIG1lbnUuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheSA9IGZ1bmN0aW9uKG5hbWUsdHlwZSx2YWx1ZSl7XG4gICAgICB2YXIgZmllbGQgPSBuZXcgQXJyYXkoKTtcbiAgICAgIGZpZWxkLm5hbWUgPSBuYW1lO1xuICAgICAgZmllbGQudHlwZSA9IHR5cGU7XG4gICAgICBmaWVsZC52YWx1ZSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIGZpZWxkO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5X3dpdGhfdHdvRmllbGRzID0gZnVuY3Rpb24obmFtZSx0eXBlLHZhbHVlLHNlY29uZFZhbHVlKXtcbiAgICAgIHZhciBmaWVsZCA9IG5ldyBBcnJheSgpO1xuICAgICAgZmllbGQubmFtZSA9IG5hbWU7XG4gICAgICBmaWVsZC50eXBlID0gdHlwZTtcbiAgICAgIGZpZWxkLnZhbHVlID0gdmFsdWU7XG4gICAgICBmaWVsZC5zZWNvbmRWYWx1ZSA9IHNlY29uZFZhbHVlO1xuICAgICAgcmV0dXJuIGZpZWxkO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZml4X2ZiX2ltYWdlX2xpbmsgPSBmdW5jdGlvbih1cmwpe1xuICAgICAgaWYodXJsLmluZGV4T2YoXCJodHRwOi8vZ3JhcGguZmFjZWJvb2suY29tXCIpID49IDApe1xuICAgICAgICB2YXIgcGFydHMgPSB1cmwuc3BsaXQoXCJodHRwOi8vZ3JhcGguZmFjZWJvb2suY29tXCIpO1xuICAgICAgICB2YXIgbmV3VXJsID0gXCJodHRwOi8vZ3JhcGguZmFjZWJvb2suY29tXCIrcGFydHNbMV07XG4gICAgICAgIHJldHVybiBuZXdVcmw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH07XG5cbiAgICAkc2NvcGUubG9nX2luID0gZnVuY3Rpb24odXNlciwgcGFzc3dvcmQpe1xuICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJzdWJtaXQtZm9ybVwiKSl7XG4gICAgICAgIGlmKENvbm5lY3Rpdml0eVNlcnZpY2UuaXNPbmxpbmUoKSl7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgIHZhciBmaWVsZHMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiVXN1YXJpb1wiLFwibm90TnVsbFwiLHVzZXIpKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiQ29udHJhc2XDsWFcIixcIm5vdE51bGxcIixwYXNzd29yZCkpO1xuICAgICAgICAgIGlmKEVycm9yU2VydmljZS5jaGVja19maWVsZHMoZmllbGRzLFwiZXJyb3JfY29udGFpbmVyXCIpKXtcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmxvZ19pbih1c2VyLHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICAgICAgaWYoRXJyb3JTZXJ2aWNlLmh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bChyZXNwLFwiZXJyb3JfY29udGFpbmVyXCIpKXtcbiAgICAgICAgICAgICAgICBwaG90byA9ICRzY29wZS5maXhfZmJfaW1hZ2VfbGluaygkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5QaG90byk7XG4gICAgICAgICAgICAgICAgaWYocGhvdG89PVwiYW5vblwiKXtcbiAgICAgICAgICAgICAgICAgIHBob3RvPVwidXJsKC4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nKVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBVc2VyU2VydmljZS5zYXZlX3VzZXJfZGF0YSgkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5OYW1lLCAkc2NvcGUubm9uYXV0aC5wYXNzd29yZCwgcGhvdG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlNob3dMb2NhdGlvbiwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuVWlkLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5Fc3RhZG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkdlbmRlciwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICAgICAgICBEQlNlcnZpY2Uuc2F2ZVVzZXIoJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuTmFtZSwkc2NvcGUubm9uYXV0aC5wYXNzd29yZCxwaG90bywkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5TaG93TG9jYXRpb24sJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuVWlkLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkVzdGFkbywgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuR2VuZGVyLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5JbnRlcmVzdGVkSW4pO1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDEpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlX2xvZ2luX21vZGFsKCk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbmRVc2VyTG9jYXRpb24oKTtcbiAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgIC8vYWxlcnQoXCJFcnJvciBlbiBzaWduX2luXCIpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgRXJyb3JTZXJ2aWNlLnNob3dfZXJyb3JfbWVzc2FnZShcImVycm9yX2NvbnRhaW5lclwiLHJlc3Auc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICBQb3BVcFNlcnZpY2Uuc2hvd19hbGVydChcIlNpbiBjb25leGnDs24gYSBpbnRlcm5ldFwiLFwiUGFyYSBpbmljaWFyIHNlc2nDs24gZGViZSBlc3RhciBjb25lY3RhZG8gYSBpbnRlcm5ldFwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5sb2dfaW5fYmFja2dyb3VuZCA9IGZ1bmN0aW9uKHVzZXIsIHBhc3N3b3JkKXtcbiAgICAgIEF1dGhTZXJ2aWNlLmxvZ19pbih1c2VyLHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgaWYoRXJyb3JTZXJ2aWNlLmh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bF9hamF4KHJlc3ApKXtcbiAgICAgICAgICBwaG90byA9ICRzY29wZS5maXhfZmJfaW1hZ2VfbGluaygkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5QaG90byk7XG4gICAgICAgICAgaWYocGhvdG89PVwiYW5vblwiKXtcbiAgICAgICAgICAgIHBob3RvPVwidXJsKC4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nKVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBVc2VyU2VydmljZS5zYXZlX3VzZXJfZGF0YSgkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5OYW1lLCBwYXNzd29yZCwgcGhvdG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlNob3dMb2NhdGlvbiwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuVWlkLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5Fc3RhZG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkdlbmRlciwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICBEQlNlcnZpY2Uuc2F2ZVVzZXIoJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuTmFtZSxwYXNzd29yZCxwaG90bywkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5TaG93TG9jYXRpb24sJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuVWlkLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkVzdGFkbywgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuR2VuZGVyLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5JbnRlcmVzdGVkSW4pO1xuXG4gICAgICAgICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMSk7XG4gICAgICAgICAgJHNjb3BlLnNlbmRVc2VyTG9jYXRpb24oKTtcbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgfSwgZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKGVycik7XG4gICAgICAgIC8vRXJyb3JTZXJ2aWNlLnNob3dfZXJyb3JfbWVzc2FnZV9wb3B1cChyZXNwLnN0YXR1c1RleHQpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgICRzY29wZS5zZW5kVXNlckxvY2F0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwic3VibWl0LWxvY2F0aW9uXCIpKXtcbiAgICAgICAgaWYoVXNlclNlcnZpY2Uuc2hvd19sb2NhdGlvbj09MSl7XG4gICAgICAgICAgdmFyIHBvc09wdGlvbnMgPSB7dGltZW91dDogMTAwMDAsIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZX07XG4gICAgICAgICAgJGNvcmRvdmFHZW9sb2NhdGlvblxuICAgICAgICAgICAgLmdldEN1cnJlbnRQb3NpdGlvbihwb3NPcHRpb25zKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgIFBpblNlcnZpY2Uuc2VuZFVzZXJMb2NhdGlvbihwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUscG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSxVc2VyU2VydmljZS5uYW1lLFVzZXJTZXJ2aWNlLnBhc3N3b3JkLFVzZXJTZXJ2aWNlLnVpZCkudGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgICAgICAgaWYoRXJyb3JTZXJ2aWNlLmh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bF9hamF4KHJlc3ApKXtcbiAgICAgICAgICAgICAgICAgIExvY2F0aW9uc1NlcnZpY2Uuc2F2ZV9sYXN0X3VzZXJfcG9zaXRpb24ocG9zaXRpb24uY29vcmRzLmxhdGl0dWRlLHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUpO1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLmxvYWRQaW5zTGF5ZXIoKTtcbiAgICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWxvY2F0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1sb2NhdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtbG9jYXRpb25cIik7XG4gICAgICAgICAgICAgICRzY29wZS5sb2FkUGluc0xheWVyKCk7XG4gICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1sb2NhdGlvblwiKTtcbiAgICAgICAgICAkc2NvcGUubG9hZFBpbnNMYXllcigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cblxuICAgICRzY29wZS5zaWduX291dCA9IGZ1bmN0aW9uKCl7XG4gICAgICBVc2VyU2VydmljZS5lcmFzZV91c2VyX2RhdGEoKTtcbiAgICAgIERCU2VydmljZS5lcmFzZVVzZXIoKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAkc2NvcGUuc2V0X3VzZXJfcGljdHVyZSgwKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlci1vcHRpb25zLW1lbnVcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2hvd19lZGl0X3Byb2ZpbGVfbW9kYWwgPSBmdW5jdGlvbigpe1xuICAgICAgLy9DYXJnYXIgZWwgbW9kYWwgY29uIGxhIGluZm8gZGVsIHVzdWFyaW8gbG9ndWVhZG8geSBjb24gZWwgc3VibWl0IGEgZWRpdF9wcm9maWxlX29rXG4gICAgICBpZihTZW1hcGhvcmVTZXJ2aWNlLnRha2VJZkF2YWlsYWJsZShcIm9wZW4tbW9kYWxcIikpe1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIuZW1haWwgPSBVc2VyU2VydmljZS5lbWFpbDtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIuZ2VuZGVyID0gVXNlclNlcnZpY2UuZ2VuZGVyO1xuICAgICAgICAkc2NvcGUubmV3dXNlci51c2VybmFtZSA9IFVzZXJTZXJ2aWNlLm5hbWU7XG4gICAgICAgICRzY29wZS5uZXd1c2VyLmludGVyZXN0ZWQgPSBVc2VyU2VydmljZS5pbnRlcmVzdGVkO1xuICAgICAgICAkc2NvcGUubmV3dXNlci5zdGF0dXMgPSBVc2VyU2VydmljZS5zdGF0dXM7XG4gICAgICAgICRzY29wZS5uZXd1c2VyLnNob3dfbG9jYXRpb24gPSBVc2VyU2VydmljZS5zaG93X2xvY2F0aW9uO1xuICAgICAgICAkc2NvcGUuYWN0dWFsX3Bob3RvID0gVXNlclNlcnZpY2UucGljdHVyZV91cmw7XG4gICAgICAgIGlmKCRzY29wZS5hY3R1YWxfcGhvdG8hPW51bGwpe1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAkc2NvcGUuYWN0dWFsX3Bob3RvID0gXCIuL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZ1wiO1xuICAgICAgICB9XG4gICAgICAgIGlmKCRzY29wZS5hY3R1YWxfcGhvdG89PVwidXJsKC4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nKVwiKXtcbiAgICAgICAgICAkc2NvcGUuYWN0dWFsX3Bob3RvID0gXCIuL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZ1wiO1xuICAgICAgICB9XG4gICAgICAgIE1vZGFsU2VydmljZS5jaGVja05vTW9kYWxJc09wZW4oKTtcbiAgICAgICAgICBpZihWYWxpZGF0aW9uU2VydmljZS5pc01vYmlsZURldmljZSgpKXtcbiAgICAgICAgICAgICRpb25pY01vZGFsLmZyb21UZW1wbGF0ZVVybCgndGVtcGxhdGVzL2VkaXRfcHJvZmlsZV93aXRoX3Bob3RvLmh0bWwnLCB7XG4gICAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgICAgICBoYXJkd2FyZUJhY2tCdXR0b25DbG9zZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUtaW4tdXAnLFxuICAgICAgICAgICAgICAgIC8vZm9jdXNGaXJzdElucHV0OiB0cnVlXG4gICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obW9kYWwpIHtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXItb3B0aW9ucy1tZW51XCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG4gICAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwgPSBtb2RhbDtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsLnNob3coKTtcbiAgICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwib3Blbi1tb2RhbFwiKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwoJ3RlbXBsYXRlcy9lZGl0X3Byb2ZpbGVfd2l0aF9waG90b19kZXNrdG9wLmh0bWwnLCB7XG4gICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICAgIGhhcmR3YXJlQmFja0J1dHRvbkNsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUtaW4tdXAnLFxuICAgICAgICAgICAgICAvL2ZvY3VzRmlyc3RJbnB1dDogdHJ1ZVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihtb2RhbCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLW9wdGlvbnMtbWVudVwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbCA9IG1vZGFsO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbC5zaG93KCk7XG4gICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJvcGVuLW1vZGFsXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAkc2NvcGUucmVhZFVSTCA9IGZ1bmN0aW9uIChpbnB1dCx0eXBlKSB7XG4gICAgICBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHtcbiAgICAgICAgaWYodHlwZT09MSl7XG4gICAgICAgICAgJHNjb3BlLm5ld3VzZXIucGljdHVyZV91cmwgPSBpbnB1dC5maWxlc1swXTtcbiAgICAgICAgICAgIH1lbHNlIGlmICh0eXBlPT0yKXtcbiAgICAgICAgICAkc2NvcGUuY29tbWVudC5waG90byA9IGlucHV0LmZpbGVzWzBdO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAkc2NvcGUucmVwb3J0LmZpbGUgPSBpbnB1dC5maWxlc1swXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15SW1hZ2VcIikuc3JjID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGlucHV0LmZpbGVzWzBdKTtcbiAgICB9XG5cbiAgICB9XG5cbiAgICAkc2NvcGUuY2xvc2VfZWRpdF9wcm9maWxlX21vZGFsID0gZnVuY3Rpb24oKXtcbiAgICAgIC8vQ2FyZ2FyIGVsIG1vZGFsIGNvbiBsYSBpbmZvIGRlbCB1c3VhcmlvIGxvZ3VlYWRvIHkgY29uIGVsIHN1Ym1pdCBhIHVwZGF0ZV91c2VyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmVkaXRfcHJvZmlsZV9vayA9IGZ1bmN0aW9uKCl7XG4gICAgICAkc2NvcGUuZWRpdF9wcm9maWxlKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UgPSBmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICBpZihyZXNwb25zZS5kYXRhKXtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5lZGl0X3Byb2ZpbGUgPSBmdW5jdGlvbigpe1xuICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJzdWJtaXQtZm9ybVwiKSl7XG4gICAgICAgIGlmKENvbm5lY3Rpdml0eVNlcnZpY2UuaXNPbmxpbmUoKSl7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgIC8qdmFyIGZpZWxkcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgIGZpZWxkcy5wdXNoKCRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXkoXCJDb3JyZW8gZWxlY3Ryw7NuaWNvXCIsXCJlbWFpbFwiLG5ld19lbWFpbCkpO1xuICAgICAgICAgIC8vZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIkNvbnRyYXNlw7FhXCIsXCJub3ROdWxsXCIscGFzc3dvcmQpKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiQ8OpZHVsYSBkZSBJZGVudGlkYWRcIixcImlkZG9jX3V5XCIsaWRfZG9jKSk7XG4gICAgICAgICAgZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIk5vbWJyZSB5IGFwZWxsaWRvXCIsXCJ0d29fd29yZHNcIixmdWxsbmFtZSkpOyovXG4gICAgICAgICAgLyppZihFcnJvclNlcnZpY2UuY2hlY2tfZmllbGRzKGZpZWxkcyxcImVycm9yX2NvbnRhaW5lclwiKSl7Ki9cbiAgICAgICAgICAkc2NvcGUubmV3dXNlci5wYXNzd29yZCA9IFVzZXJTZXJ2aWNlLnBhc3N3b3JkO1xuICAgICAgICAgICAgdmFyIGVkaXRfcmVxdWVzdCA9IEF1dGhTZXJ2aWNlLmVkaXRfdXNlcigkc2NvcGUubmV3dXNlcik7XG4gICAgICAgICAgICBpZigkc2NvcGUubmV3dXNlci5waWN0dXJlX3VybD09bnVsbCB8fCAkc2NvcGUubmV3dXNlci5waWN0dXJlX3VybD09XCJcIiB8fCAhVmFsaWRhdGlvblNlcnZpY2UuaXNNb2JpbGVEZXZpY2UoKSl7XG4gICAgICAgICAgICAgIGVkaXRfcmVxdWVzdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VudF9sYWJlbFwiKS5pbm5lckhUTUwgPSBcIkVudmlhZG86IDEwMCVcIjtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3ApO1xuICAgICAgICAgICAgICAgIGlmKEVycm9yU2VydmljZS5odHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWwocmVzcCxcImVycm9yX2NvbnRhaW5lclwiKSl7XG4gICAgICAgICAgICAgICAgICBVc2VyU2VydmljZS5zYXZlX3VzZXJfZGF0YSgkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5OYW1lLCAkc2NvcGUubmV3dXNlci5wYXNzd29yZCwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuUGhvdG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlNob3dMb2NhdGlvbiwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuVWlkLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5Fc3RhZG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkdlbmRlciwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICAgICAgICAgIERCU2VydmljZS5zYXZlVXNlcigkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5OYW1lLCRzY29wZS5uZXd1c2VyLnBhc3N3b3JkLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlBob3RvLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlNob3dMb2NhdGlvbiwkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5VaWQsJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuRXN0YWRvLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5HZW5kZXIsICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkludGVyZXN0ZWRJbik7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY2xvc2VfZWRpdF9wcm9maWxlX21vZGFsKCk7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tfdXNlcl9sb2dnZWQoKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsY29uZmlnKXtcbiAgICAgICAgICAgICAgICBFcnJvclNlcnZpY2Uuc2hvd19lcnJvcl9tZXNzYWdlKFwiZXJyb3JfY29udGFpbmVyXCIsc3RhdHVzKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgIGVkaXRfcmVxdWVzdC50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShyZXN1bHQucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGlmKEVycm9yU2VydmljZS5odHRwX2RhdGFfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bChkYXRhLFwiZXJyb3JfY29udGFpbmVyXCIpKXtcbiAgICAgICAgICAgICAgICAgIGRhdGEgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLnNhdmVfdXNlcl9kYXRhKGRhdGEuTmFtZSwgJHNjb3BlLm5ld3VzZXIucGFzc3dvcmQsIGRhdGEuUGhvdG8sIGRhdGEuU2hvd0xvY2F0aW9uLCBkYXRhLlVpZCwgZGF0YS5Fc3RhZG8sIGRhdGEuR2VuZGVyLCBkYXRhLkludGVyZXN0ZWRJbik7XG4gICAgICAgICAgICAgICAgICBEQlNlcnZpY2Uuc2F2ZVVzZXIoZGF0YS5OYW1lLCRzY29wZS5uZXd1c2VyLnBhc3N3b3JkLGRhdGEuUGhvdG8sZGF0YS5TaG93TG9jYXRpb24sZGF0YS5VaWQsZGF0YS5Fc3RhZG8sIGRhdGEuR2VuZGVyLCBkYXRhLkludGVyZXN0ZWRJbik7XG4gICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY2xvc2VfZWRpdF9wcm9maWxlX21vZGFsKCk7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tfdXNlcl9sb2dnZWQoKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsZXJ0ID0gXCJDw7NkaWdvOiBcIiArIGVycm9yLmNvZGU7XG4gICAgICAgICAgICAgICAgYWxlcnQgPSBhbGVydCArIFwiIE9yaWdlbjogXCIgKyBlcnJvci5zb3VyY2U7XG4gICAgICAgICAgICAgICAgYWxlcnQgPSBhbGVydCArIFwiIERlc3Rpbm86IFwiICsgZXJyb3IudGFyZ2V0O1xuICAgICAgICAgICAgICAgIGFsZXJ0ID0gYWxlcnQgKyBcIiBodHRwX3N0YXR1czogXCIgKyBlcnJvci5odHRwX3N0YXR1cztcbiAgICAgICAgICAgICAgICBhbGVydCA9IGFsZXJ0ICsgXCIgQm9keTogXCIgKyBlcnJvci5ib2R5O1xuICAgICAgICAgICAgICAgIGFsZXJ0ID0gYWxlcnQgKyBcIiBFeGNlcHRpb246IFwiICsgZXJyb3IuZXhjZXB0aW9uO1xuICAgICAgICAgICAgICAgIEVycm9yU2VydmljZS5zaG93X2Vycm9yX21lc3NhZ2UoXCJlcnJvcl9jb250YWluZXJcIixcIkh1Ym8gdW4gZXJyb3IgZW4gZWwgZW52w61vOiBcIiArIGFsZXJ0KTtcbiAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICB9LCBmdW5jdGlvbihwcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51cGxvYWRQcm9ncmVzcyA9IChwcm9ncmVzcy5sb2FkZWQgLyBwcm9ncmVzcy50b3RhbCkgKiAxMDA7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VudF9sYWJlbFwiKS5pbm5lckhUTUwgPSBcIkVudmlhZG86IFwiICsgTWF0aC5yb3VuZCgkc2NvcGUudXBsb2FkUHJvZ3Jlc3MpICsgXCIlXCI7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgLyp9ZWxzZXtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgIH0qL1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgIFBvcFVwU2VydmljZS5zaG93X2FsZXJ0KFwiU2luIGNvbmV4acOzbiBhIGludGVybmV0XCIsXCJQYXJhIGVkaXRhciBzdSBwZXJmaWwgZGViZSBlc3RhciBjb25lY3RhZG8gYSBpbnRlcm5ldFwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG4gICAgJHNjb3BlLnNob3dfbG9naW5fbW9kYWwgPSBmdW5jdGlvbigpe1xuICAgICAgLy9DYXJnYXIgZWwgbW9kYWwgY29uIGVsIGZvcm0gZGUgbG9naW4geSBhaGkgbGxhbWEgYWwgc2lnbl9pblxuICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJvcGVuLW1vZGFsXCIpKXtcbiAgICAgICAgJHNjb3BlLm5vbmF1dGggPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgJHNjb3BlLm5vbmF1dGgudXNlciA9IFwiXCI7XG4gICAgICAgICRzY29wZS5ub25hdXRoLnBhc3N3b3JkID0gXCJcIjtcbiAgICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgICAgICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwoJ3RlbXBsYXRlcy9sb2dfaW4uaHRtbCcsIHtcbiAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICBoYXJkd2FyZUJhY2tCdXR0b25DbG9zZTogZmFsc2UsXG4gICAgICAgICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCcsXG4gICAgICAgICAgICAvL2ZvY3VzRmlyc3RJbnB1dDogdHJ1ZVxuICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obW9kYWwpIHtcbiAgICAgICAgICAgICAgJHNjb3BlLmhpZGVfc3BlY2lhbF9kaXZzKCk7XG4gICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbCA9IG1vZGFsO1xuICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcIm9wZW4tbW9kYWxcIik7XG4gICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwuc2hvdygpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5sb2dpbl9vayA9IGZ1bmN0aW9uKCl7XG4gICAgICAkc2NvcGUubG9nX2luKCRzY29wZS5ub25hdXRoLnVzZXIsJHNjb3BlLm5vbmF1dGgucGFzc3dvcmQpO1xuICAgIH1cblxuICAgICRzY29wZS5jbG9zZV9sb2dpbl9tb2RhbCA9IGZ1bmN0aW9uKCl7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgfVxuXG5cblxuICAgICRzY29wZS5zaG93X3NpZ25fdXBfbW9kYWwgPSBmdW5jdGlvbigpe1xuICAgICAgLy9jYXJnYXIgZWwgbW9kYWwgY29uIGVsIGZvcm0gZGUgc2lnbl91cCB5IGRlIGFoaSBsbGFtYXIgYWwgc2lnbl91cFxuICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJvcGVuLW1vZGFsXCIpKXtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIuZW1haWwgPSBcIlwiO1xuICAgICAgICAkc2NvcGUubmV3dXNlci5wYXNzd29yZCA9IFwiXCI7XG4gICAgICAgICRzY29wZS5uZXd1c2VyLmZ1bGxuYW1lID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIuaWRfZG9jID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIudGVsZXBob25lID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIucGhvdG8gPSBcIlwiO1xuICAgICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgICAgIGlmKFZhbGlkYXRpb25TZXJ2aWNlLmlzTW9iaWxlRGV2aWNlKCkpe1xuICAgICAgICAgICRpb25pY01vZGFsLmZyb21UZW1wbGF0ZVVybCgndGVtcGxhdGVzL3NpZ25fdXAuaHRtbCcsIHtcbiAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgICAgaGFyZHdhcmVCYWNrQnV0dG9uQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCcsXG4gICAgICAgICAgICAgIC8vZm9jdXNGaXJzdElucHV0OiB0cnVlXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmhpZGVfc3BlY2lhbF9kaXZzKCk7XG4gICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsID0gbW9kYWw7XG4gICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJvcGVuLW1vZGFsXCIpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbC5zaG93KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCd0ZW1wbGF0ZXMvc2lnbl91cF9kZXNrdG9wLmh0bWwnLCB7XG4gICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICAgIGhhcmR3YXJlQmFja0J1dHRvbkNsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUtaW4tdXAnLFxuICAgICAgICAgICAgICAvL2ZvY3VzRmlyc3RJbnB1dDogdHJ1ZVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihtb2RhbCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5oaWRlX3NwZWNpYWxfZGl2cygpO1xuICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbCA9IG1vZGFsO1xuICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwib3Blbi1tb2RhbFwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5jbG9zZV9zaWduX3VwX21vZGFsID0gZnVuY3Rpb24oKXtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIE1vZGFsU2VydmljZS5jaGVja05vTW9kYWxJc09wZW4oKTtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2lnbl91cCA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZihTZW1hcGhvcmVTZXJ2aWNlLnRha2VJZkF2YWlsYWJsZShcInN1Ym1pdC1mb3JtXCIpKXtcbiAgICAgICAgaWYoQ29ubmVjdGl2aXR5U2VydmljZS5pc09ubGluZSgpKXtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgdmFyIGZpZWxkcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgIC8qZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIkNvcnJlbyBlbGVjdHLDs25pY29cIixcImVtYWlsXCIsJHNjb3BlLm5ld3VzZXIuZW1haWwpKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiQ29udHJhc2XDsWFcIixcIm5vdE51bGxcIiwkc2NvcGUubmV3dXNlci5wYXNzd29yZCkpO1xuICAgICAgICAgIGZpZWxkcy5wdXNoKCRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXkoXCJVc3VhcmlvXCIsXCJub3ROdWxsXCIsJHNjb3BlLm5ld3VzZXIudXNlcm5hbWUpKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiR8OpbmVyb1wiLFwibm90TnVsbFwiLCRzY29wZS5uZXd1c2VyLmdlbmRlcikpO1xuICAgICAgICAgIGZpZWxkcy5wdXNoKCRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXkoXCJJbnRlcmVzYWRvIGVuXCIsXCJub3ROdWxsXCIsJHNjb3BlLm5ld3VzZXIuaW50ZXJlc3RlZCkpO1xuICAgICAgICAgIGZpZWxkcy5wdXNoKCRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXkoXCJFc3RhZG9cIixcIm5vdE51bGxcIiwkc2NvcGUubmV3dXNlci5zdGF0dXMpKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiTW9zdHJhciB1YmljYWNpw7NuXCIsXCJub3ROdWxsXCIsJHNjb3BlLm5ld3VzZXIuc2hvd19sb2NhdGlvbikpO1xuICAgICAgICAgIGZpZWxkcy5wdXNoKCRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXlfd2l0aF90d29GaWVsZHMoXCInQ29udHJhc2XDsWEnIHkgJ0NvbmZpcm1hciBjb250cmFzZcOxYSdcIixcImVxdWFsc1RvXCIsJHNjb3BlLm5ld3VzZXIucGFzc3dvcmQsICRzY29wZS5uZXd1c2VyLnJlcGFzc3dvcmQpKTsqL1xuICAgICAgICAgIC8vaWYoRXJyb3JTZXJ2aWNlLmNoZWNrX2ZpZWxkcyhmaWVsZHMsXCJlcnJvcl9jb250YWluZXJcIikpe1xuICAgICAgICAgICAgaWYoJHNjb3BlLm5ld3VzZXIucGljdHVyZV91cmwhPW51bGwgJiYgJHNjb3BlLm5ld3VzZXIucGljdHVyZV91cmwhPVwiXCIgJiYgVmFsaWRhdGlvblNlcnZpY2UuaXNNb2JpbGVEZXZpY2UoKSl7XG4gICAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmNyZWF0ZV91c2VyKCRzY29wZS5uZXd1c2VyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycyxjb25maWcpe1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VudF9sYWJlbFwiKS5pbm5lckhUTUwgPSBcIkVudmlhZG86IDEwMCVcIjtcbiAgICAgICAgICAgICAgICBpZihFcnJvclNlcnZpY2UuaHR0cF9kYXRhX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWwoZGF0YSxcImVycm9yX2NvbnRhaW5lclwiKSl7XG4gICAgICAgICAgICAgICAgICBkYXRhID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICBVc2VyU2VydmljZS5zYXZlX3VzZXJfZGF0YShkYXRhLm5hbWUsIGRhdGEuZW1haWwsICRzY29wZS5uZXd1c2VyLnBhc3N3b3JkLCBkYXRhLmlkZW50aXR5X2RvY3VtZW50LCBkYXRhLnBob25lLCBkYXRhLnBpY3R1cmVfdXJsKTtcbiAgICAgICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLnNhdmVfdXNlcl9kYXRhKGRhdGEuTmFtZSwgJHNjb3BlLm5ld3VzZXIucGFzc3dvcmQsIGRhdGEuUGhvdG8sIGRhdGEuU2hvd0xvY2F0aW9uLCBkYXRhLlVpZCwgZGF0YS5Fc3RhZG8sIGRhdGEuR2VuZGVyLCBkYXRhLkludGVyZXN0ZWRJbik7XG4gICAgICAgICAgICAgICAgICBEQlNlcnZpY2Uuc2F2ZVVzZXIoZGF0YS5OYW1lLHBhc3N3b3JkLGRhdGEuUGhvdG8sZGF0YS5TaG93TG9jYXRpb24sZGF0YS5VaWQsZGF0YS5Fc3RhZG8sIGRhdGEuR2VuZGVyLCBkYXRhLkludGVyZXN0ZWRJbik7XG4gICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY2xvc2VfZWRpdF9wcm9maWxlX21vZGFsKCk7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tfdXNlcl9sb2dnZWQoKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsY29uZmlnKXtcbiAgICAgICAgICAgICAgICBFcnJvclNlcnZpY2Uuc2hvd19lcnJvcl9tZXNzYWdlKFwiZXJyb3JfY29udGFpbmVyXCIsc3RhdHVzKTtcbiAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgQXV0aFNlcnZpY2UuY3JlYXRlX3VzZXIoJHNjb3BlLm5ld3VzZXIpLnRoZW4oZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgICAgIGlmKEVycm9yU2VydmljZS5odHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWwocmVzcCxcImVycm9yX2NvbnRhaW5lclwiKSl7XG4gICAgICAgICAgICAgICAgICBVc2VyU2VydmljZS5zYXZlX3VzZXJfZGF0YSgkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5OYW1lLCAkc2NvcGUubmV3dXNlci5wYXNzd29yZCwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuUGhvdG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlNob3dMb2NhdGlvbiwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuVWlkLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5Fc3RhZG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkdlbmRlciwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICAgICAgICAgIERCU2VydmljZS5zYXZlVXNlcigkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5OYW1lLCRzY29wZS5uZXd1c2VyLnBhc3N3b3JkLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlBob3RvLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlNob3dMb2NhdGlvbiwkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5VaWQsJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuRXN0YWRvLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5HZW5kZXIsICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkludGVyZXN0ZWRJbik7XG4gICAgICAgICAgICAgICAgICAvLyRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDEpO1xuICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlX3NpZ25fdXBfbW9kYWwoKTtcbiAgICAgICAgICAgICAgICAgIHZhciBhbGVydFBvcHVwID0gJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlVzdWFyaW8gY3JlYWRvIGNvbiDDqXhpdG9cIixcbiAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkubWVzc2FnZVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICBhbGVydFBvcHVwLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tfdXNlcl9sb2dnZWQoKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIEVycm9yU2VydmljZS5zaG93X2Vycm9yX21lc3NhZ2UoXCJlcnJvcl9jb250YWluZXJcIixyZXNwLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvKn1lbHNle1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgfSovXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgUG9wVXBTZXJ2aWNlLnNob3dfYWxlcnQoXCJTaW4gY29uZXhpw7NuIGEgaW50ZXJuZXRcIixcIlBhcmEgaW5pY2lhciByZWdpc3RyYXJzZSBkZWJlIGVzdGFyIGNvbmVjdGFkbyBhIGludGVybmV0XCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLnNpZ25fdXBfb2sgPSBmdW5jdGlvbigpe1xuICAgICAgLy9jb25zb2xlLmxvZygkc2NvcGUubmV3dXNlcik7XG4gICAgICAkc2NvcGUuc2lnbl91cCgpO1xuICAgIH1cblxuICAgICRzY29wZS5jaGVja191c2VyX2xvZ2dlZCA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgbmFtZSA9IFVzZXJTZXJ2aWNlLm5hbWU7XG4gICAgICBpZihuYW1lPT1udWxsKXtcbiAgICAgICAgICAvL1NpIEhheSB1biB1c3VhcmlvIGd1YXJkYWRvXG4gICAgICAgICAgdmFyIHVzZXIgPSBEQlNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAgIHVzZXIudGhlbihmdW5jdGlvbiAoZG9jKSB7XG4gICAgICAgICAgICBpZihkb2MubmFtZSE9bnVsbCAmJiBkb2MubmFtZSE9XCJcIiAmJiBkb2MubmFtZSE9XCJ1bmRlZmluZWRcIil7XG4gICAgICAgICAgICAgICRzY29wZS5sb2dfaW5fYmFja2dyb3VuZChkb2MubmFtZSwgZG9jLnBhc3N3b3JkKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAkc2NvcGUuc2V0X3VzZXJfcGljdHVyZSgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2V0X3VzZXJfcGljdHVyZSgwKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1lbHNle1xuICAgICAgICAvL0VzdMOhIGxvZ3VlYWRvXG4gICAgICAgIGlmKFVzZXJTZXJ2aWNlLnBpY3R1cmVfdXJsPT1udWxsIHx8IFVzZXJTZXJ2aWNlLnBpY3R1cmVfdXJsPT1cIlwiKXtcbiAgICAgICAgICAvL0VsIHVzdWFyaW8gbm8gdGllbmUgZm90byBkZWZpbmlkYVxuICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDApO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAvL0VsIHVzdWFyaW8gdGllbmUgZm90b1xuICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLnNldF9vZmZsaW5lX3VzZXIgPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIG5hbWUgPSBVc2VyU2VydmljZS5uYW1lO1xuICAgICAgaWYobmFtZT09bnVsbCl7XG4gICAgICAgICAgLy9TaSBIYXkgdW4gdXN1YXJpbyBndWFyZGFkb1xuICAgICAgICAgIHZhciB1c2VyID0gREJTZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgICB1c2VyLnRoZW4oZnVuY3Rpb24gKGRvYykge1xuICAgICAgICAgICAgaWYoZG9jLm5hbWUhPW51bGwgJiYgZG9jLm5hbWUhPVwiXCIgJiYgZG9jLm5hbWUhPVwidW5kZWZpbmVkXCIpe1xuICAgICAgICAgICAgICBVc2VyU2VydmljZS5zYXZlX3VzZXJfZGF0YShkb2MubmFtZSwgZG9jLnBhc3N3b3JkLCBkb2MucGljdHVyZV91cmwsIGRvYy5zaG93X2xvY2F0aW9uKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAkc2NvcGUuc2V0X3VzZXJfcGljdHVyZSgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2V0X3VzZXJfcGljdHVyZSgwKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1lbHNle1xuICAgICAgICAvL0VzdMOhIGxvZ3VlYWRvXG4gICAgICAgIGlmKFVzZXJTZXJ2aWNlLnBpY3R1cmVfdXJsPT1udWxsIHx8IFVzZXJTZXJ2aWNlLnBpY3R1cmVfdXJsPT1cIlwiKXtcbiAgICAgICAgICAvL0VsIHVzdWFyaW8gbm8gdGllbmUgZm90byBkZWZpbmlkYVxuICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDApO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAvL0VsIHVzdWFyaW8gdGllbmUgZm90b1xuICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cblxuICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlID0gZnVuY3Rpb24oaGFzUGhvdG8pe1xuICAgICAgdmFyIHBpY3R1cmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJfcGljdHVyZVwiKTtcbiAgICAgIGlmKGhhc1Bob3RvPT0wKXtcbiAgICAgICAgLy9waWN0dXJlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKC4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nKVwiO1xuICAgICAgICAkc2NvcGUudXNlcl9jYWNoZWRfaW1hZ2U9XCIuL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZ1wiO1xuICAgICAgfWVsc2V7XG4gICAgICAgIGlmKFVzZXJTZXJ2aWNlLnBpY3R1cmVfdXJsIT1udWxsICYmIFVzZXJTZXJ2aWNlLnBpY3R1cmVfdXJsIT1cIlwiKXtcbiAgICAgICAgICAvL2FsZXJ0KFVzZXJTZXJ2aWNlLnBpY3R1cmVfdXJsKTtcbiAgICAgICAgICAkc2NvcGUudXNlcl9jYWNoZWRfaW1hZ2U9VXNlclNlcnZpY2UucGljdHVyZV91cmw7XG4gICAgICAgICAgLy9waWN0dXJlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgVXNlclNlcnZpY2UucGljdHVyZV91cmwgKyBcIilcIjtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgLy9waWN0dXJlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKC4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nKVwiO1xuICAgICAgICAgICRzY29wZS51c2VyX2NhY2hlZF9pbWFnZT1cIi4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nXCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH1cblxuICAgICRzY29wZS5maW5kX21lID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLnNldF9hY3RpdmVfb3B0aW9uKFwiYnV0dG9uLWZpbmQtbWVcIik7XG4gICAgICAgICRzY29wZS5oaWRlX3NwZWNpYWxfZGl2cygpO1xuICAgICAgICB2YXIgcG9zT3B0aW9ucyA9IHt0aW1lb3V0OiAxMDAwMCwgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlfTtcbiAgICAgICAgJGNvcmRvdmFHZW9sb2NhdGlvblxuICAgICAgICAgIC5nZXRDdXJyZW50UG9zaXRpb24ocG9zT3B0aW9ucylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubWFwLmNlbnRlci5sYXQgID0gcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlO1xuICAgICAgICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLmxuZyA9IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGU7XG4gICAgICAgICAgICAgICAgTG9jYXRpb25zU2VydmljZS5zYXZlX25ld19yZXBvcnRfcG9zaXRpb24ocG9zaXRpb24uY29vcmRzLmxhdGl0dWRlLHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUpO1xuICAgICAgICAgICAgICAgIGlmKENvbm5lY3Rpdml0eVNlcnZpY2UuaXNPbmxpbmUoKSl7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUubWFwLmNlbnRlci56b29tID0gMTg7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUubWFwLmNlbnRlci56b29tID0gMTY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5tYXAubWFya2Vycy5ub3cgPSB7XG4gICAgICAgICAgICAgICAgICBsYXQ6cG9zaXRpb24uY29vcmRzLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgICAgbG5nOnBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIjxwIGFsaWduPSdjZW50ZXInPlRlIGVuY3VlbnRyYXMgYXF1w60gPGJyLz4gPGEgbmctY2xpY2s9J25ld19yZXBvcnQoMSk7Jz5JbmljaWFyIHJlcG9ydGUgZW4gdHUgcG9zaWNpw7NuIGFjdHVhbDwvYT48L3A+XCIsXG4gICAgICAgICAgICAgICAgICBmb2N1czogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICBnZXRNZXNzYWdlU2NvcGU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gJHNjb3BlOyB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyRzY29wZS5tYXAubWFya2Vycy5ub3cub3BlblBvcHVwKCk7XG4gICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgIC8vIGVycm9yXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkxvY2F0aW9uIGVycm9yIVwiKTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgLy9FcnJvclNlcnZpY2Uuc2hvd19lcnJvcl9tZXNzYWdlX3BvcHVwKFwiTm8gaGVtb3MgcG9kaWRvIGdlb2xvY2FsaXphcmxvLiDCv1RhbCB2ZXogb2x2aWTDsyBoYWJpbGl0YXIgbG9zIHNlcnZpY2lvcyBkZSBsb2NhbGl6YWNpw7NuIGVuIHN1IGRpc3Bvc2l0aXZvP1wiKVxuICAgICAgICAgICAgICAgICRzY29wZS5vcGVuQ291bmNpbFNlbGVjdG9yKCk7XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfTtcblxuICB9XG5cbl0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0F1dGhTZXJ2aWNlJywgWyckaHR0cCcsICckY29yZG92YUZpbGVUcmFuc2ZlcicsICdDb25maWdTZXJ2aWNlJywnVmFsaWRhdGlvblNlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgJGNvcmRvdmFGaWxlVHJhbnNmZXIsIENvbmZpZ1NlcnZpY2UsIFZhbGlkYXRpb25TZXJ2aWNlKSB7XG5cbiAgdmFyIGJhc2VVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hcGkvXCI7XG5cbiAgcmV0dXJuIHtcbiAgICBsb2dfaW46IGZ1bmN0aW9uICh1c2VyLHBhc3N3b3JkKSB7XG4gICAgICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VyKycmcGFzc3dvcmQ9JytwYXNzd29yZDtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdsb2dpbicsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICB9LFxuXG4gICAgc2lnbl9vdXQ6IGZ1bmN0aW9uIChwYXNzd29yZCwgZW1haWwpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoYmFzZVVSTCArIFwic2lnbl9vdXRcIiwgeyB3aXRoQ3JlZGVudGlhbHM6IHRydWUsIHBhcmFtczogeyBwYXNzd29yZF9zaWduX2luOiBwYXNzd29yZCwgZW1haWw6IGVtYWlsIH0gfSk7XG4gICAgfSxcblxuICAgIGNyZWF0ZV91c2VyOiBmdW5jdGlvbiAodXNlck9iaikge1xuICAgICAgaWYodXNlck9iai5waWN0dXJlX3VybCAmJiBWYWxpZGF0aW9uU2VydmljZS5pc01vYmlsZURldmljZSgpKXtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICBmaWxlS2V5OiBcInBob3RvXCIsXG4gICAgICAgICAvL2ZpbGVOYW1lOiBmaWxlbmFtZSxcbiAgICAgICAgIC8vY2h1bmtlZE1vZGU6IGZhbHNlLFxuICAgICAgICAgLy9taW1lVHlwZTogXCJpbWFnZS9qcGdcIixcbiAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgIHBhcmFtcyA6IHsgIHVzZXI6IHVzZXJPYmoudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdXNlck9iai5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyT2JqLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgZ2VuZGVyOiB1c2VyT2JqLmdlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgIGludGVyZXN0ZWQ6IHVzZXJPYmouaW50ZXJlc3RlZCxcbiAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdXNlck9iai5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICBzaG93X2xvY2F0aW9uOiB1c2VyT2JqLnNob3dfbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgdHJ1c3RBbGxIb3N0cyA9IHRydWU7XG4gICAgICAgIHJldHVybiAkY29yZG92YUZpbGVUcmFuc2Zlci51cGxvYWQoYmFzZVVSTCArIFwiY3JlYXRlX3VzZXJcIiwgdXNlck9iai5waWN0dXJlX3VybCwgb3B0aW9ucywgdHJ1c3RBbGxIb3N0cyk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgaWYodXNlck9iai5waWN0dXJlX3VybCl7XG4gICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwicGhvdG9cIiwgdXNlck9iai5waWN0dXJlX3VybCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwidXNlclwiLCB1c2VyT2JqLnVzZXJuYW1lKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJwYXNzd29yZFwiLCB1c2VyT2JqLnBhc3N3b3JkKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJlbWFpbFwiLCB1c2VyT2JqLmVtYWlsKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJnZW5kZXJcIiwgdXNlck9iai5nZW5kZXIpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcImludGVyZXN0ZWRcIiwgdXNlck9iai5pbnRlcmVzdGVkKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJzdGF0dXNcIiwgdXNlck9iai5zdGF0dXMpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInNob3dfbG9jYXRpb25cIiwgdXNlck9iai5zaG93X2xvY2F0aW9uKTtcbiAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2NyZWF0ZV91c2VyJywgZm9ybURhdGEsIHtcbiAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJPYmoudXNlcm5hbWUrJyZwYXNzd29yZD0nK3VzZXJPYmoucGFzc3dvcmQrJyZlbWFpbD0nK3VzZXJPYmouZW1haWwrJyZnZW5kZXI9Jyt1c2VyT2JqLmdlbmRlcjtcbiAgICAgICAgICBib2R5ID0gYm9keSArJyZpbnRlcmVzdGVkPScrdXNlck9iai5pbnRlcmVzdGVkKycmc3RhdHVzPScrdXNlck9iai5zdGF0dXMrJyZzaG93X2xvY2F0aW9uPScrdXNlck9iai5zaG93X2xvY2F0aW9uO1xuICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnY3JlYXRlX3VzZXInLCBib2R5LHt3aXRoQ3JlZGVudGlhbHM6IHRydWUsIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH0sXG5cbiAgICBwYXNzd29yZF9yZWNvdmVyeTogZnVuY3Rpb24gKGVtYWlsKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KGJhc2VVUkwgKyBcImZvcmdvdF9wYXNzd29yZFwiLCB7IHBhcmFtczogeyBsb2dpbl9lbWFpbDogZW1haWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHBhc3N3b3JkX2NoYW5nZTogZnVuY3Rpb24gKGVtYWlsLG9sZFBhc3N3b3JkLG5ld1Bhc3N3b3JkLGNvbmZpcm1QYXNzd29yZCkge1xuXG4gICAgICB2YXIgYm9keSA9ICdlbWFpbD0nK2VtYWlsKycmcGFzc3dvcmRfc2lnbl9pbj0nK29sZFBhc3N3b3JkKycmbmV3X3Bhc3N3b3JkPScrbmV3UGFzc3dvcmQrJyZjb25maXJtPScrY29uZmlybVBhc3N3b3JkO1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdjaGFuZ2VfcGFzc3dvcmQnLCBib2R5LHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuXG4gICAgfSxcblxuXG4gICAgZWRpdF91c2VyOiBmdW5jdGlvbiAodXNlck9iaikge1xuICAgICAgaWYodXNlck9iai5waWN0dXJlX3VybCAmJiBWYWxpZGF0aW9uU2VydmljZS5pc01vYmlsZURldmljZSgpKXtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICBmaWxlS2V5OiBcInBob3RvXCIsXG4gICAgICAgICAvL2ZpbGVOYW1lOiBmaWxlbmFtZSxcbiAgICAgICAgIC8vY2h1bmtlZE1vZGU6IGZhbHNlLFxuICAgICAgICAgLy9taW1lVHlwZTogXCJpbWFnZS9qcGdcIixcbiAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgIHBhcmFtcyA6IHsgIHVzZXI6IHVzZXJPYmoudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdXNlck9iai5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyT2JqLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgZ2VuZGVyOiB1c2VyT2JqLmdlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgIGludGVyZXN0ZWQ6IHVzZXJPYmouaW50ZXJlc3RlZCxcbiAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdXNlck9iai5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICBzaG93X2xvY2F0aW9uOiB1c2VyT2JqLnNob3dfbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgdHJ1c3RBbGxIb3N0cyA9IHRydWU7XG4gICAgICAgIHJldHVybiAkY29yZG92YUZpbGVUcmFuc2Zlci51cGxvYWQoYmFzZVVSTCArIFwiZWRpdF9wcm9maWxlXCIsIHVzZXJPYmoucGljdHVyZV91cmwsIG9wdGlvbnMsIHRydXN0QWxsSG9zdHMpO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VyT2JqLnVzZXJuYW1lKycmcGFzc3dvcmQ9Jyt1c2VyT2JqLnBhc3N3b3JkKycmZW1haWw9Jyt1c2VyT2JqLmVtYWlsKycmZ2VuZGVyPScrdXNlck9iai5nZW5kZXI7XG4gICAgICAgIGJvZHkgPSBib2R5ICsnJmludGVyZXN0ZWQ9Jyt1c2VyT2JqLmludGVyZXN0ZWQrJyZzdGF0dXM9Jyt1c2VyT2JqLnN0YXR1cysnJnNob3dfbG9jYXRpb249Jyt1c2VyT2JqLnNob3dfbG9jYXRpb247XG4gICAgICAgIGlmKHVzZXJPYmoucGljdHVyZV91cmwpe1xuICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInBob3RvXCIsIHVzZXJPYmoucGljdHVyZV91cmwpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInVzZXJcIiwgdXNlck9iai51c2VybmFtZSk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwicGFzc3dvcmRcIiwgdXNlck9iai5wYXNzd29yZCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwiZW1haWxcIiwgdXNlck9iai5lbWFpbCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwiZ2VuZGVyXCIsIHVzZXJPYmouZ2VuZGVyKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJpbnRlcmVzdGVkXCIsIHVzZXJPYmouaW50ZXJlc3RlZCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwic3RhdHVzXCIsIHVzZXJPYmouc3RhdHVzKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJzaG93X2xvY2F0aW9uXCIsIHVzZXJPYmouc2hvd19sb2NhdGlvbik7XG4gICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdlZGl0X3Byb2ZpbGUnLCBmb3JtRGF0YSwge1xuICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eVxuICAgICAgICAgIH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2VkaXRfcHJvZmlsZScsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICB9O1xufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0NvbmZpZ1NlcnZpY2UnLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApIHtcblxuICB2YXIgQ29uZmlnT2JqID0ge307XG4gIC8vQ29uZmlnT2JqLmJhc2VVUkwgPSBcImh0dHBzOi8vcG1iZGV2LmRldmVsb3BtZW50LmRhdGF1eS5vcmdcIjtcbiAgQ29uZmlnT2JqLmJhc2VVUkwgPSBcImh0dHA6Ly90b21hbW9zdW5hLmluZm9cIjtcbiAgaWYoaW9uaWMuUGxhdGZvcm0uaXNXZWJWaWV3KCkpe1xuICAgIENvbmZpZ09iai5iYXNlVVJMID0gXCJodHRwOi8vdG9tYW1vc3VuYS5pbmZvXCI7XG4gIH0gZWxzZSB7XG4gICAgQ29uZmlnT2JqLmJhc2VVUkwgPSBcIi9iYWNrZW5kXCI7XG4gIH1cbiAgQ29uZmlnT2JqLkFwcE5hbWUgPSBcIsK/VG9tYW1vcyB1bmE/XCI7XG5cbiAgQ29uZmlnT2JqLmJhc2VDb2JyYW5kID0gXCIvY29icmFuZHMvcG9ybWliYXJyaW9cIjtcblxuICByZXR1cm4gQ29uZmlnT2JqO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnQ29ubmVjdGl2aXR5U2VydmljZScsIFsnJGNvcmRvdmFOZXR3b3JrJywgZnVuY3Rpb24oJGNvcmRvdmFOZXR3b3JrKXtcblxuICByZXR1cm4ge1xuICAgIGlzT25saW5lOiBmdW5jdGlvbigpe1xuICAgICAgLyppZihpb25pYy5QbGF0Zm9ybS5pc1dlYlZpZXcoKSl7XG4gICAgICAgIHJldHVybiAkY29yZG92YU5ldHdvcmsuaXNPbmxpbmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3Iub25MaW5lO1xuICAgICAgICAvL3JldHVybiBmYWxzZTtcbiAgICAgIH0qL1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBpc09mZmxpbmU6IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAvKmlmKGlvbmljLlBsYXRmb3JtLmlzV2ViVmlldygpKXtcbiAgICAgICAgcmV0dXJuICEkY29yZG92YU5ldHdvcmsuaXNPbmxpbmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAhbmF2aWdhdG9yLm9uTGluZTtcbiAgICAgIH0qL1xuICAgIH1cbiAgfVxufV0pXG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnREJTZXJ2aWNlJywgWyckcScsIGZ1bmN0aW9uKCRxKSB7XG4gICB2YXIgX2RiO1xuXG4gICByZXR1cm4ge1xuICAgICAgIGluaXREQjogaW5pdERCLFxuICAgICAgIHNhdmVVc2VyOiBzYXZlVXNlcixcbiAgICAgICBnZXRVc2VyOiBnZXRVc2VyLFxuICAgICAgIGVyYXNlVXNlcjogZXJhc2VVc2VyLFxuICAgICAgIHNhdmVSZXBvcnQ6IHNhdmVSZXBvcnQsXG4gICAgICAgZ2V0UmVwb3J0OiBnZXRSZXBvcnQsXG4gICAgICAgZ2V0QWxsUmVwb3J0czogZ2V0QWxsUmVwb3J0cyxcbiAgICAgICB1cGRhdGVSZXBvcnQ6IHVwZGF0ZVJlcG9ydCxcbiAgICAgICBkZWxldGVSZXBvcnQ6IGRlbGV0ZVJlcG9ydCxcbiAgICAgICBkZWxldGVHaXZlblJlcG9ydDogZGVsZXRlR2l2ZW5SZXBvcnQsXG4gICAgICAgZ2V0Q2F0ZWdvcmllczogZ2V0Q2F0ZWdvcmllcyxcbiAgICAgICBzYXZlQ2F0ZWdvcmllczogc2F2ZUNhdGVnb3JpZXNcbiAgIH07XG5cbiAgIGZ1bmN0aW9uIHNhdmVVc2VyKHVzZXJfbmFtZSwgdXNlcl9wYXNzd29yZCwgdXNlcl9waWN0dXJlX3VybCxzaG93X2xvY2F0aW9uLCB1aWQsIHN0YXR1cywgZ2VuZGVyLCBpbnRlcmVzdGVkKSB7XG4gICAgICAgICB2YXIgdXNlciA9IHtcbiAgICAgICAgICAgIF9pZDogJ3VzZXItbG9nZ2VkJyxcbiAgICAgICAgICAgIG5hbWU6IHVzZXJfbmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiB1c2VyX3Bhc3N3b3JkLFxuICAgICAgICAgICAgcGljdHVyZV91cmw6IHVzZXJfcGljdHVyZV91cmwsXG4gICAgICAgICAgICBzaG93X2xvY2F0aW9uOiBzaG93X2xvY2F0aW9uLFxuICAgICAgICAgICAgdWlkOiB1aWQsXG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cyxcbiAgICAgICAgICAgIGdlbmRlcjogZ2VuZGVyLFxuICAgICAgICAgICAgaW50ZXJlc3RlZDogaW50ZXJlc3RlZFxuICAgICAgICAgfTtcbiAgICAgICAgIGdldFVzZXIoKS50aGVuKGZ1bmN0aW9uIChkb2MpIHtcbiAgICAgICAgICAgdXNlci5fcmV2ID0gZG9jLl9yZXY7XG4gICAgICAgICAgIHJldHVybiBfZGIucHV0KHVzZXIpO1xuICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICByZXR1cm4gX2RiLnB1dCh1c2VyKTtcbiAgICAgICAgIH0pXG4gICB9O1xuXG4gIGZ1bmN0aW9uIGdldFVzZXIoKSB7XG4gICAgIHJldHVybiBfZGIuZ2V0KCd1c2VyLWxvZ2dlZCcpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGVyYXNlVXNlcigpIHtcbiAgICBfZGIuZ2V0KCd1c2VyLWxvZ2dlZCcpLnRoZW4oZnVuY3Rpb24oZG9jKSB7XG4gICAgICByZXR1cm4gX2RiLnJlbW92ZShkb2MpO1xuICAgIH0pO1xuICB9XG5cbiAgIGZ1bmN0aW9uIGluaXREQigpIHtcbiAgICAgICAvLyBDcmVhdGVzIHRoZSBkYXRhYmFzZSBvciBvcGVucyBpZiBpdCBhbHJlYWR5IGV4aXN0c1xuICAgICAgIF9kYiA9IG5ldyBQb3VjaERCKCd0b21hbW9zdW5hX2xvY2FsX2RiJyk7XG4gICAgICAgcmV0dXJuIF9kYjtcbiAgIH07XG5cbiAgIGZ1bmN0aW9uIHNhdmVSZXBvcnQocmVwb3J0KSB7XG4gICAgICAvL25ld19yZXBvcnRfaWQgPSBcInJlcG9ydF9cIiArIHBvdWNoQ29sbGF0ZS50b0luZGV4YWJsZVN0cmluZyhbcmVwb3J0XSk7XG4gICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICB2YXIgbmV3X3JlcG9ydF9pZCA9IFwicmVwb3J0X1wiICsgZGF0ZS5nZXRGdWxsWWVhcigpICsgKGRhdGUuZ2V0TW9udGgoKSArIDEpICsgZGF0ZS5nZXREYXRlKCkgKyBkYXRlLmdldE1pbGxpc2Vjb25kcygpO1xuICAgICAgcmVwb3J0Ll9pZCA9IG5ld19yZXBvcnRfaWQ7XG4gICAgICByZXR1cm4gX2RiLnB1dChyZXBvcnQpO1xuICAgfTtcblxuICAgZnVuY3Rpb24gdXBkYXRlUmVwb3J0KHJlcG9ydCkge1xuICAgICByZXR1cm4gX2RiLnB1dChyZXBvcnQpO1xuICB9O1xuXG4gICBmdW5jdGlvbiBnZXRDYXRlZ29yaWVzKCkge1xuICAgICByZXR1cm4gX2RiLmdldCgnY2F0ZWdvcmllcy1saXN0Jyk7XG4gICB9O1xuXG4gICBmdW5jdGlvbiBzYXZlQ2F0ZWdvcmllcyhjYXRlZ29yaWVzKSB7XG4gICAgIGdldENhdGVnb3JpZXMoKS50aGVuKGZ1bmN0aW9uIChkb2MpIHtcbiAgICAgICBjYXRlZ29yaWVzLl9yZXYgPSBkb2MuX3JldjtcbiAgICAgICByZXR1cm4gX2RiLnB1dChjYXRlZ29yaWVzKTtcbiAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgIGNhdGVnb3JpZXMuX2lkID0gXCJjYXRlZ29yaWVzLWxpc3RcIjtcbiAgICAgICByZXR1cm4gX2RiLnB1dChjYXRlZ29yaWVzKTtcbiAgICAgfSlcbiAgIH07XG5cbiAgZnVuY3Rpb24gZ2V0UmVwb3J0KHJlcG9ydElkKSB7XG4gICAgIHJldHVybiBfZGIuZ2V0KHJlcG9ydElkKTtcbiAgfTtcblxuICAgZnVuY3Rpb24gZ2V0QWxsUmVwb3J0cygpIHtcbiAgICAgcmV0dXJuIF9kYi5hbGxEb2NzKHtcbiAgICAgIGluY2x1ZGVfZG9jczogdHJ1ZSxcbiAgICAgIGF0dGFjaG1lbnRzOiBmYWxzZSxcbiAgICAgIHN0YXJ0a2V5OiAncmVwb3J0XycsXG4gICAgICBlbmRrZXk6ICdyZXBvcnRfXFx1ZmZmZidcbiAgICAgfSk7LyoudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAvLyBoYW5kbGUgcmVzdWx0XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTsqL1xuICB9O1xuXG4gIGZ1bmN0aW9uIGRlbGV0ZVJlcG9ydChyZXBvcnRfaWQpIHtcbiAgICBfZGIuZ2V0KHJlcG9ydF9pZCkudGhlbihmdW5jdGlvbihkb2MpIHtcbiAgICAgIHJldHVybiBfZGIucmVtb3ZlKGRvYyk7XG4gICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gZGVsZXRlR2l2ZW5SZXBvcnQocmVwb3J0KSB7XG4gICAgcmV0dXJuIF9kYi5yZW1vdmUocmVwb3J0KTtcbiAgfTtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0RyaW5rU2VydmljZScsIFsnJGh0dHAnLCAnQ29uZmlnU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCBDb25maWdTZXJ2aWNlKSB7XG5cbiAgdmFyIGJhc2VVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hcGkvXCI7XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRBbGxEcmlua3NBdmFpbGFibGU6IGZ1bmN0aW9uICh1c2VybmFtZSxwYXNzd29yZCkge1xuICAgICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZCsnJmhhc2hfaWQ9JytNYXRoLnJhbmRvbSgpO1xuICAgICAgLy9ib2R5ID0gYm9keSArJyZpbnRlcmVzdGVkPScrdXNlck9iai5pbnRlcmVzdGVkKycmc3RhdHVzPScrdXNlck9iai5zdGF0dXMrJyZzaG93X2xvY2F0aW9uPScrdXNlck9iai5zaG93X2xvY2F0aW9uO1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdnZXRfcG9zc2libGVfZHJpbmtzJywgYm9keSx7aGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICB9LFxuXG4gICAgZ2V0QWxsSW52aXRhdGlvbnNXaXRoVXNlcjogZnVuY3Rpb24gKHVzZXJuYW1lLHBhc3N3b3JkLGRlc3RpbmF0aW9uX3VpZCxhdXRob3JfdWlkKSB7XG4gICAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkKycmaGFzaF9pZD0nK01hdGgucmFuZG9tKCk7XG4gICAgICBib2R5ID0gYm9keSArJyZ1aWQ9JytkZXN0aW5hdGlvbl91aWQrJyZhdXRob3JfdWlkPScrYXV0aG9yX3VpZDtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnZ2V0X2ludml0YXRpb25zX2JldHdlZW5fdXNlcnMnLCBib2R5LHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICAgIH0sXG5cbiAgICBzZW5kRHJpbmtJbnZpdGF0aW9uVG9Vc2VyOiBmdW5jdGlvbihkcmlua19uaWQsZGVzdGluYXRpb25fdWlkLGF1dGhvcl91aWQsdXNlcm5hbWUscGFzc3dvcmQpe1xuICAgICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZCsnJmRyaW5rX25pZD0nK2RyaW5rX25pZCsnJmRlc3RpbmF0aW9uX3VpZD0nK2Rlc3RpbmF0aW9uX3VpZCsnJmF1dGhvcl91aWQ9JythdXRob3JfdWlkKycmaGFzaF9pZD0nK01hdGgucmFuZG9tKCk7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ3NlbmRfZHJpbmtfaW52aXRhdGlvbicsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICB9LFxuXG4gICAgc2VuZERyaW5rSW52aXRhdGlvblJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSx1c2VybmFtZSxwYXNzd29yZCxpbnZpdGF0aW9uX25pZCxkZXN0aW5hdGlvbl91aWQpe1xuICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2U9JytyZXNwb25zZSsnJnVzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQrJyZpbnZpdGF0aW9uX25pZD0nK2ludml0YXRpb25fbmlkKycmZGVzdGluYXRpb25fdWlkPScrZGVzdGluYXRpb25fdWlkKycmaGFzaF9pZD0nK01hdGgucmFuZG9tKCk7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2ludml0YXRpb25fcmVzcG9uc2UnLCBib2R5LHt3aXRoQ3JlZGVudGlhbHM6IHRydWUsIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gICAgfVxuXG4gIH07XG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnRXJyb3JTZXJ2aWNlJywgWyckaHR0cCcsJyRpb25pY1BvcHVwJywgJ1ZhbGlkYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsJGlvbmljUG9wdXAsVmFsaWRhdGlvblNlcnZpY2UpIHtcblxuICByZXR1cm4ge1xuICAgIGh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bDogZnVuY3Rpb24gKGpzb25SZXN1bHQsIGVycm9yQ29udGFpbmVySWQpIHtcbiAgICAgIHZhciBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yQ29udGFpbmVySWQpO1xuICAgICAgaWYoanNvblJlc3VsdC5kYXRhICYmIGpzb25SZXN1bHQuZGF0YS5TdGF0dXM9PVwic3VjY2Vzc1wiIHx8IGpzb25SZXN1bHQuU3RhdHVzPT1cInN1Y2Nlc3NcIil7XG4gICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgaWYoanNvblJlc3VsdC5kYXRhKXtcbiAgICAgICAgICBlcnJvckRpdi5pbm5lckhUTUw9XCI8aDM+XCIgKyBqc29uUmVzdWx0LmRhdGEuTWVzc2FnZSArIFwiPC9oMz5cIjtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgZXJyb3JEaXYuaW5uZXJIVE1MPVwiPGgzPlwiICsganNvblJlc3VsdC5NZXNzYWdlICsgXCI8L2gzPlwiO1xuICAgICAgICB9XG4gICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaHR0cF9yZXNwb25zZV9pc19zdWNjZXNzZnVsX2FqYXg6IGZ1bmN0aW9uIChqc29uUmVzdWx0KSB7XG4gICAgICBpZihqc29uUmVzdWx0LmRhdGEucmVzdWx0PT0wKXtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBodHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfcG9wdXA6IGZ1bmN0aW9uIChqc29uUmVzdWx0KSB7XG4gICAgICBpZihqc29uUmVzdWx0LmRhdGEucmVzdWx0PT0wKXtcbiAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICB0aXRsZTogXCJFcnJvclwiLFxuICAgICAgICAgdGVtcGxhdGU6IGpzb25SZXN1bHQuZGF0YS5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgICBhbGVydFBvcHVwLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBodHRwX2RhdGFfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bDogZnVuY3Rpb24gKGRhdGEsIGVycm9yQ29udGFpbmVySWQpIHtcbiAgICAgIHZhciBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yQ29udGFpbmVySWQpO1xuICAgICAgaWYoZGF0YS5TdGF0dXMhPSdzdWNjZXNzJyl7XG4gICAgICAgIGVycm9yRGl2LmlubmVySFRNTD1cIjxoMz5cIiArIGRhdGEuTWVzc2FnZSArIFwiPC9oMz5cIjtcbiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGh0dHBfZGF0YV9yZXNwb25zZV9pc19zdWNjZXNzZnVsX2FqYXg6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBpZihkYXRhLnJlc3VsdD09MCl7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc2hvd19lcnJvcl9tZXNzYWdlOiBmdW5jdGlvbiAoZXJyb3JDb250YWluZXJJZCwgbWVzc2FnZSkge1xuICAgICAgICB2YXIgZXJyb3JEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlcnJvckNvbnRhaW5lcklkKTtcbiAgICAgICAgZXJyb3JEaXYuaW5uZXJIVE1MPVwiPGgzPlwiICsgbWVzc2FnZSArIFwiPC9oMz5cIjtcbiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICBzaG93X2Vycm9yX21lc3NhZ2VfcG9wdXA6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIHZhciBhbGVydFBvcHVwID0gJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgdGl0bGU6IFwiRXJyb3JcIixcbiAgICAgICAgIHRlbXBsYXRlOiBtZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgICBhbGVydFBvcHVwLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICBjaGVja19maWVsZHM6IGZ1bmN0aW9uIChmaWVsZHMsIGVycm9yQ29udGFpbmVySWQpIHtcbiAgICAgIHZhciBlcnJvcnMgPSBcIlwiO1xuICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24oZmllbGQpIHtcbiAgICAgICAgaWYoZmllbGQudHlwZT09XCJub3ROdWxsXCIpe1xuICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9ub3RfZW1wdHkoZmllbGQudmFsdWUpKXtcbiAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZC5uYW1lICsgJ1wiIG5vIHB1ZWRlIGVzdGFyIHZhY8Otby48L2gzPic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGZpZWxkLnR5cGU9PVwiZW1haWxcIil7XG4gICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX2VtYWlsKGZpZWxkLnZhbHVlKSl7XG4gICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gRWwgY2FtcG8gXCInICsgZmllbGQubmFtZSArICdcIiBubyBlcyB1bmEgZGlyZWNjacOzbiBkZSBjb3JyZW8gdsOhbGlkYS48L2gzPic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGZpZWxkLnR5cGU9PVwiaWRkb2NfdXlcIil7XG4gICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX2lkZG9jX3V5KGZpZWxkLnZhbHVlKSl7XG4gICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gRWwgY2FtcG8gXCInICsgZmllbGQubmFtZSArICdcIiBubyBlcyB1bmEgY8OpZHVsYSB1cnVndWF5YSB2w6FsaWRhLjwvaDM+JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoZmllbGQudHlwZT09XCJ0d29fd29yZHNcIil7XG4gICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX3R3b193b3JkcyhmaWVsZC52YWx1ZSkpe1xuICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkLm5hbWUgKyAnXCIgZGViZSBjb250ZW5lciBhbCBtZW5vcyBkb3MgcGFsYWJyYXMuPC9oMz4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihmaWVsZC50eXBlPT1cImVxdWFsc1RvXCIpe1xuICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9lcXVhbHNUbyhmaWVsZC52YWx1ZSwgZmllbGQuc2Vjb25kVmFsdWUpKXtcbiAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBMb3MgY2FtcG9zIFwiJyArIGZpZWxkLm5hbWUgKyAnXCIgbm8gY29pbmNpZGVuLjwvaDM+JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYoZXJyb3JzID09XCJcIil7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHZhciBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yQ29udGFpbmVySWQpO1xuICAgICAgICBlcnJvckRpdi5pbm5lckhUTUw9IGVycm9ycztcbiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuXG4gIH07XG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnTG9hZGVyJywgWyckaW9uaWNMb2FkaW5nJywgJyR0aW1lb3V0JywnJGlvbmljUG9wdXAnLGZ1bmN0aW9uKCRpb25pY0xvYWRpbmcsJHRpbWVvdXQsJGlvbmljUG9wdXApIHtcblxuICB2YXIgTE9BREVSQVBJID0ge1xuXG4gICAgc2hvd0xvYWRpbmc6IGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgIHRleHQgPSB0ZXh0IHx8ICdMb2FkaW5nLi4uJztcbiAgICAgICRpb25pY0xvYWRpbmcuc2hvdyh7XG4gICAgICAgIHRlbXBsYXRlOiB0ZXh0XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgaGlkZUxvYWRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgfSxcblxuICAgIHRvZ2dsZUxvYWRpbmdXaXRoTWVzc2FnZTogZnVuY3Rpb24odGV4dCwgdGltZW91dCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBzZWxmLnNob3dMb2FkaW5nKHRleHQpO1xuXG4gICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5oaWRlTG9hZGluZygpO1xuICAgICAgfSwgdGltZW91dCB8fCAzMDAwKTtcbiAgICB9LFxuXG4gICAgY29uZmlybVBvcHVwOmZ1bmN0aW9uKHRpdGxlLHRleHQpe1xuICAgICAgdmFyIGNvbmZpcm1Qb3B1cCA9ICRpb25pY1BvcHVwLmNvbmZpcm0oe1xuICAgICB0aXRsZTogdGl0bGUsXG4gICAgIHRlbXBsYXRlOiB0ZXh0XG4gICB9KTtcbiAgIHJldHVybiBjb25maXJtUG9wdXA7XG4gfSxcblxuXG4gICAgc2hvd0FsZXJ0OmZ1bmN0aW9uKF90aXRsZSxfdGVtcGxhdGUpIHtcbiAgICAgIHZhciBhbGVydFBvcHVwID0gJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICB0aXRsZTogX3RpdGxlLFxuICAgICAgICB0ZW1wbGF0ZTogX3RlbXBsYXRlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhbGVydFBvcHVwO1xuIH1cblxuICB9O1xuICByZXR1cm4gTE9BREVSQVBJO1xufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0xvY2F0aW9uc1NlcnZpY2UnLCBbIGZ1bmN0aW9uKCkge1xuXG4gIHZhciBsb2NhdGlvbnNPYmogPSB7fTtcbiAgbG9jYXRpb25zT2JqLmluaXRpYWxfbGF0ID0gXCJcIjtcbiAgbG9jYXRpb25zT2JqLmluaXRpYWxfbG5nID0gXCJcIjtcbiAgbG9jYXRpb25zT2JqLmxhc3RfdXNlcl9sYXQgPSBcIlwiO1xuICBsb2NhdGlvbnNPYmoubGFzdF91c2VyX2xuZyA9IFwiXCI7XG4gIGxvY2F0aW9uc09iai5jb3VuY2lsX21vZGFsID0gbnVsbDtcbiAgbG9jYXRpb25zT2JqLnNlbGVjdGVkX2NvdW5jaWwgPSBudWxsO1xuXG4gIGxvY2F0aW9uc09iai5zZWxlY3RDb3VuY2lsID0gZnVuY3Rpb24oY291bmNpbE5hbWUpIHtcbiAgICBsb2NhdGlvbnNPYmouc2VsZWN0ZWRfY291bmNpbCA9ICBjb3VuY2lsTmFtZTtcbiAgfVxuXG4gIGxvY2F0aW9uc09iai5zYXZlX2luaXRpYWxfcG9zaXRpb24gPSBmdW5jdGlvbihwb3NpdGlvbikge1xuICAgIGxvY2F0aW9uc09iai5pbml0aWFsX2xhdCA9ICBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7XG4gICAgbG9jYXRpb25zT2JqLmluaXRpYWxfbG5nID0gIHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGU7XG4gIH1cblxuICBsb2NhdGlvbnNPYmouc2F2ZV9sYXN0X3VzZXJfcG9zaXRpb24gPSBmdW5jdGlvbihsYXQsbG5nKXtcbiAgICBsb2NhdGlvbnNPYmoubGFzdF91c2VyX2xhdCA9IGxhdDtcbiAgICBsb2NhdGlvbnNPYmoubGFzdF91c2VyX2xuZyA9IGxuZztcbiAgfVxuXG4gIGxvY2F0aW9uc09iai5zYXZlZExvY2F0aW9ucyA9IFtdO1xuXG4gIHJldHVybiBsb2NhdGlvbnNPYmo7XG5cbn1dKTtcbiIsIiAvL3BtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdNYXBTZXJ2aWNlJywgWyBmdW5jdGlvbigpIHtcbiBwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnTWFwU2VydmljZScsIFsnbGVhZmxldERhdGEnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbihsZWFmbGV0RGF0YSwgJGNvbXBpbGUpIHtcblxuICAgLy9EZWZpbmljaW9uIGRlIGxhIHByb3llY2NjaW9uIFVUTSAyMSBzXG4gICBwcm9qNC5kZWZzKCdFUFNHOjMyNzIxJywgJytwcm9qPXV0bSArem9uZT0yMSArc291dGggK2VsbHBzPVdHUzg0ICtkYXR1bT1XR1M4NCArdW5pdHM9bSArbm9fZGVmcycpO1xuXG5cbiAgIHZhciBtYXBTZXJ2aWNlID0ge307XG5cbiAgIG1hcFNlcnZpY2UuZ29Ub1BsYWNlID0gZnVuY3Rpb24obmFtZSxsYXQsbG9uLHNjb3BlKSB7XG4gICAgdmFyIF9nZW9Kc29uID0ge1xuICAgICAgICAgICAgICBcInR5cGVcIjogXCJGZWF0dXJlQ29sbGVjdGlvblwiLFxuICAgICAgICAgICAgICBcImNyc1wiOiB7IFwidHlwZVwiOiBcIm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICBcInByb3BlcnRpZXNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6ICd1cm46b2djOmRlZjpjcnM6RVBTRzo6MzI3MjEnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFwiZmVhdHVyZXNcIjogW1xuICAgICAgICAgICAgICAgIHsgXCJ0eXBlXCI6IFwiRmVhdHVyZVwiLFxuICAgICAgICAgICAgICAgIFwiZ2VvbWV0cnlcIjp7XG4gICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOlwiUG9pbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgXCJjb29yZGluYXRlc1wiOltsYXQsbG9uXVxuICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJwcm9wZXJ0aWVzXCI6e1xuICAgICAgICAgICAgICAgICAgICAgIFwibm9tYnJlXCI6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfTtcbiAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcbiAgICAgIHZhciBfbGF0bG5nO1xuICAgICAgIHZhciBsYXllciA9IEwuUHJvai5nZW9Kc29uKF9nZW9Kc29uLCB7XG4gICAgICAgICAncG9pbnRUb0xheWVyJzogZnVuY3Rpb24oZmVhdHVyZSwgbGF0bG5nKSB7XG4gICAgICAgICAgIF9sYXRsbmcgPSBsYXRsbmc7XG4gICAgICAgICAgIHZhciBodG1sUG9wVXAgPSBcIjxwIGFsaWduPSdjZW50ZXInPlwiK2ZlYXR1cmUucHJvcGVydGllcy5ub21icmUrXCIgPGJyLz4gPGEgbmctY2xpY2s9J25ld19yZXBvcnRfZnJvbV9sYXRsb24oXCIrX2xhdGxuZy5sYXQrXCIsXCIrX2xhdGxuZy5sbmcrXCIpOyc+SW5pY2lhciByZXBvcnRlIGFxdcOtPC9hPjwvcD5cIjtcbiAgICAgICAgICAgdmFyIGNvbXBpbGVkID0gJGNvbXBpbGUoaHRtbFBvcFVwKShzY29wZSk7XG4gICAgICAgICAgIHJldHVybiBMLm1hcmtlcihsYXRsbmcpLmJpbmRQb3B1cChjb21waWxlZFswXSk7XG4gICAgICAgICB9XG4gICAgICAgfSk7XG5cbiAgICAgICBsYXllci5hZGRUbyhtYXApO1xuICAgICAgIG1hcC5zZXRWaWV3KF9sYXRsbmcsIDE4KTtcbiAgICAgICBsYXllci5vcGVuUG9wdXAoKTtcbiAgICAgfSk7XG4gICB9O1xuXG4gIG1hcFNlcnZpY2UuY2VudGVyTWFwT25Db29yZHMgPSBmdW5jdGlvbihsYXQsbG5nLHpvb20pIHtcbiAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcbiAgICAgICAgbWFwLnNldFZpZXcobmV3IEwuTGF0TG5nKGxhdCwgbG5nKSx6b29tKTtcbiAgICAgICB9KTtcbiAgICAgfVxuXG4gICByZXR1cm4gbWFwU2VydmljZTtcblxuIH1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdNZXNzYWdlU2VydmljZScsIFsnJGh0dHAnLCAnbGVhZmxldERhdGEnLCdDb25maWdTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsIGxlYWZsZXREYXRhLCBDb25maWdTZXJ2aWNlKSB7XG5cbiAgdmFyIHBpbnNVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9zaXRlcy90b21hbW9zX3VuYS9maWxlcy9qc29uL29ubGluZV91c2Vyc19nZW8uanNvblwiO1xuICB2YXIgYXBpVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYXBpL1wiXG4vKipcbiAgICogQ29uc3RydWN0b3IsIHdpdGggY2xhc3MgbmFtZVxuICAgKi9cbiAgZnVuY3Rpb24gTWVzc2FnZShfZGF0YSkge1xuICAgIGFuZ3VsYXIuZXh0ZW5kKHRoaXMsIF9kYXRhKTtcbiAgfVxuXG5cbiAgTWVzc2FnZS5nZXRBbGxNZXNzYWdlc1RvVXNlciA9IGZ1bmN0aW9uKHVzZXJuYW1lLHBhc3N3b3JkLHVpZCxhdXRob3JfdWlkKXtcbiAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkKycmYXV0aG9yX3VpZD0nK2F1dGhvcl91aWQrJyZ1aWQ9Jyt1aWQrJyZoYXNoX2lkPScrTWF0aC5yYW5kb20oKTtcbiAgICByZXR1cm4gJGh0dHAucG9zdChhcGlVUkwgKyAnZ2V0X2FsbF9tZXNzYWdlc190b191c2VyJywgYm9keSx7aGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgfVxuXG4gIE1lc3NhZ2UuZ2V0VXNlckluZm8gPSBmdW5jdGlvbih1aWQpe1xuICAgIHJldHVybiAkaHR0cC5nZXQoYXBpVVJMICsgJ2dldF91c2VyX2luZm8nLCB7Y2FjaGU6IGZhbHNlLCBwYXJhbXM6IHt1aWQ6dWlkLCBoYXNoX2lkOk1hdGgucmFuZG9tKCl9fSk7XG4gIH1cblxuICBNZXNzYWdlLnNlbmRUZXh0TWVzc2FnZVRvVXNlciA9IGZ1bmN0aW9uKHRleHQsZGVzdGluYXRpb25fdWlkLGF1dGhvcl91aWQsdXNlcm5hbWUscGFzc3dvcmQpe1xuICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQrJyZ0ZXh0PScrdGV4dCsnJmRlc3RpbmF0aW9uX3VpZD0nK2Rlc3RpbmF0aW9uX3VpZCsnJmF1dGhvcl91aWQ9JythdXRob3JfdWlkO1xuICAgIHJldHVybiAkaHR0cC5wb3N0KGFwaVVSTCArICdzZW5kX3RleHRfbWVzc2FnZScsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgfVxuXG4gIE1lc3NhZ2UuY2hlY2tXaG9DYW5UYWxrID0gZnVuY3Rpb24odXNlcm5hbWUscGFzc3dvcmQpe1xuICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQ7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoYXBpVVJMICsgJ2NoZWNrX3VzZXJfdGFsaycsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgfVxuXG5cbiAgICBNZXNzYWdlLmNhblRhbGtUb1VzZXJzID0gbmV3IEFycmF5KCk7XG4gICAgTWVzc2FnZS5jdXJyZW50ID0ge307XG5cblxuICAgIC8qKlxuICAgICAqIFN0YXRpYyBtZXRob2QsIGFzc2lnbmVkIHRvIGNsYXNzXG4gICAgICogSW5zdGFuY2UgKCd0aGlzJykgaXMgbm90IGF2YWlsYWJsZSBpbiBzdGF0aWMgY29udGV4dFxuICAgICAqL1xuICAgIE1lc3NhZ2UuYnVpbGQgPSBmdW5jdGlvbihfZGF0YSkge1xuXG4gICAgICByZXR1cm4gbmV3IE1lc3NhZ2UoXG4gICAgICAgIF9kYXRhXG4gICAgICApO1xuICAgIH07XG5cblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb25cbiAgICAgKi9cbiAgICByZXR1cm4gTWVzc2FnZTtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ01vZGFsU2VydmljZScsIFsgZnVuY3Rpb24oKSB7XG5cbiAgdmFyIG1vZGFsT0JKID0ge307XG4gIG1vZGFsT0JKLmFjdGl2ZU1vZGFsID0gbnVsbDtcblxuICBtb2RhbE9CSi5jaGVja05vTW9kYWxJc09wZW4gPSBmdW5jdGlvbigpIHtcbiAgICBpZihtb2RhbE9CSi5hY3RpdmVNb2RhbCl7XG4gICAgICBtb2RhbE9CSi5hY3RpdmVNb2RhbC5oaWRlKCk7XG4gICAgICBtb2RhbE9CSi5hY3RpdmVNb2RhbC5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbW9kYWxPQko7XG5cbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdOb3RpZmljYXRpb25TZXJ2aWNlJywgWyckaHR0cCcsICdDb25maWdTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsIENvbmZpZ1NlcnZpY2UpIHtcblxuICB2YXIgYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL2FwaS9cIjtcblxuICByZXR1cm4ge1xuICAgIGdldFVucmVjaXZlZE5vdGlmaWNhdGlvbnM6IGZ1bmN0aW9uICh1c2VybmFtZSxwYXNzd29yZCkge1xuICAgICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZCsnJmhhc2hfaWQ9JytNYXRoLnJhbmRvbSgpO1xuICAgICAgLy9ib2R5ID0gYm9keSArJyZpbnRlcmVzdGVkPScrdXNlck9iai5pbnRlcmVzdGVkKycmc3RhdHVzPScrdXNlck9iai5zdGF0dXMrJyZzaG93X2xvY2F0aW9uPScrdXNlck9iai5zaG93X2xvY2F0aW9uO1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdnZXRfdW5yZWNpdmVkX25vdGlmaWNhdGlvbnMnLCBib2R5LHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICAgIH0sXG5cbiAgICBkb250U2hvd05vdGlmaWNhdGlvbkFnYWluOiBmdW5jdGlvbiAodXNlcm5hbWUscGFzc3dvcmQsbmlkKSB7XG4gICAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkKycmbmlkPScrbmlkKycmaGFzaF9pZD0nK01hdGgucmFuZG9tKCk7XG4gICAgICAvL2JvZHkgPSBib2R5ICsnJmludGVyZXN0ZWQ9Jyt1c2VyT2JqLmludGVyZXN0ZWQrJyZzdGF0dXM9Jyt1c2VyT2JqLnN0YXR1cysnJnNob3dfbG9jYXRpb249Jyt1c2VyT2JqLnNob3dfbG9jYXRpb247XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2RvbnRfc2hvd19ub3RpZmljYXRpb25fYWdhaW4nLCBib2R5LHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICAgIH1cblxuICB9O1xufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ1BpblNlcnZpY2UnLCBbJyRodHRwJywgJ2xlYWZsZXREYXRhJywnQ29uZmlnU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCBsZWFmbGV0RGF0YSwgQ29uZmlnU2VydmljZSkge1xuXG4gIHZhciBwaW5zVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvc2l0ZXMvdG9tYW1vc191bmEvZmlsZXMvanNvbi91c2Vyc19nZW8uanNvblwiO1xuICB2YXIgYXBpVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYXBpL1wiXG4vKipcbiAgICogQ29uc3RydWN0b3IsIHdpdGggY2xhc3MgbmFtZVxuICAgKi9cbiAgZnVuY3Rpb24gUGluKF9kYXRhKSB7XG4gICAgYW5ndWxhci5leHRlbmQodGhpcywgX2RhdGEpO1xuICB9XG5cblxuICBQaW4uZ2V0QWxsID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KHBpbnNVUkwsIHtjYWNoZTogZmFsc2UsIHBhcmFtczoge2hhc2hfaWQ6TWF0aC5yYW5kb20oKX19KTtcbiAgfVxuXG4gIFBpbi5zZW5kVXNlckxvY2F0aW9uID0gZnVuY3Rpb24obGF0aXR1ZGUsbG9uZ2l0dWRlLHVzZXJuYW1lLHBhc3N3b3JkLHVpZCl7XG4gICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZCsnJmxhdD0nK2xhdGl0dWRlKycmbG9uPScrbG9uZ2l0dWRlK1wiJnVpZD1cIit1aWQ7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoYXBpVVJMICsgJ3NlbmRfdXNlcl9wb3NpdGlvbicsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcblxuICB9XG5cblxuICAgIFBpbi5fYWxsID0gW107XG4gICAgUGluLmN1cnJlbnQgPSB7fTtcbiAgICBQaW4ubGFzdFBpbnNSZXNwb25zZSA9IG51bGw7XG5cblxuXG5cbiAgICAvKipcbiAgICAgKiBTdGF0aWMgbWV0aG9kLCBhc3NpZ25lZCB0byBjbGFzc1xuICAgICAqIEluc3RhbmNlICgndGhpcycpIGlzIG5vdCBhdmFpbGFibGUgaW4gc3RhdGljIGNvbnRleHRcbiAgICAgKi9cbiAgICBQaW4uYnVpbGQgPSBmdW5jdGlvbihfZGF0YSkge1xuXG4gICAgICByZXR1cm4gbmV3IFBpbihcbiAgICAgICAgX2RhdGFcbiAgICAgICk7XG4gICAgfTtcblxuICAgIFBpbi5wcm90b3R5cGUuc2V0TGF0TG5nID0gZnVuY3Rpb24gKGxhdGxuZykge1xuXG4gICAgICB0aGlzLmxhdCA9IGxhdGxuZy5sYXQ7XG4gICAgICB0aGlzLmxvbiA9IGxhdGxuZy5sbmc7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb25cbiAgICAgKi9cbiAgICByZXR1cm4gUGluO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnUG9wVXBTZXJ2aWNlJywgWyckaW9uaWNQb3B1cCcsJ1ZhbGlkYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oJGlvbmljUG9wdXAsVmFsaWRhdGlvblNlcnZpY2UpIHtcblxuICByZXR1cm4ge1xuICAgIHNob3dfYWxlcnQ6IGZ1bmN0aW9uIChhbGVydF90aXRsZSxhbGVydF9tZXNzYWdlKSB7XG4gICAgICAgIHZhciBhbGVydFBvcHVwID0gJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgdGl0bGU6IGFsZXJ0X3RpdGxlLFxuICAgICAgICAgdGVtcGxhdGU6IGFsZXJ0X21lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgIGNvbmZpcm1Qb3B1cDogZnVuY3Rpb24odGl0bGUsdGV4dCl7XG4gICAgIHZhciBjb25maXJtUG9wdXAgPSAkaW9uaWNQb3B1cC5jb25maXJtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgIHJldHVybiBjb25maXJtUG9wdXA7XG4gICB9LFxuXG4gICBhc2tGb3JPbmVWYWx1ZVBvcFVwOiBmdW5jdGlvbihzY29wZSx0aXRsZSx0ZXh0LGZpZWxkX25hbWUsdmFsaWRhdGlvblR5cGUpe1xuICAgICAgJHNjb3BlID0gc2NvcGU7XG4gICAgICB2YXIgbXlQb3B1cCA9ICRpb25pY1BvcHVwLnNob3coe1xuICAgICAgdGVtcGxhdGU6IGZpZWxkX25hbWUgKyAnOiA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cIm9uZV92YWx1ZV9wb3B1cFwiPjxkaXYgaWQ9XCJlcnJvcl9jb250YWluZXJfaW5zaWRlXCI+PC9kaXY+JyxcbiAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgIHN1YlRpdGxlOiB0ZXh0LFxuICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgIGJ1dHRvbnM6IFtcbiAgICAgICAgeyB0ZXh0OiAnQ2FuY2VsYXInIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXh0OiAnPGI+RW52aWFyPC9iPicsXG4gICAgICAgICAgdHlwZTogJ2J1dHRvbi1wb3NpdGl2ZScsXG4gICAgICAgICAgb25UYXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBlcnJvcnMgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvbmVfdmFsdWVfcG9wdXBcIikudmFsdWU7XG4gICAgICAgICAgICBpZih2YWxpZGF0aW9uVHlwZT09XCJub3ROdWxsXCIpe1xuICAgICAgICAgICAgICBpZighVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVfbm90X2VtcHR5KHZhbHVlKSl7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkX25hbWUgKyAnXCIgbm8gcHVlZGUgZXN0YXIgdmFjw61vLjwvaDM+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodmFsaWRhdGlvblR5cGU9PVwiZW1haWxcIil7XG4gICAgICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9lbWFpbCh2YWx1ZSkpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZF9uYW1lICsgJ1wiIG5vIGVzIHVuYSBkaXJlY2Npw7NuIGRlIGNvcnJlbyB2w6FsaWRhLjwvaDM+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodmFsaWRhdGlvblR5cGU9PVwiaWRkb2NfdXlcIil7XG4gICAgICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9pZGRvY191eSh2YWx1ZSkpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZF9uYW1lICsgJ1wiIG5vIGVzIHVuYSBjw6lkdWxhIHVydWd1YXlhIHbDoWxpZGEuPC9oMz4nO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih2YWxpZGF0aW9uVHlwZT09XCJ0d29fd29yZHNcIil7XG4gICAgICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV90d29fd29yZHModmFsdWUpKXtcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gRWwgY2FtcG8gXCInICsgZmllbGRfbmFtZSArICdcIiBkZWJlIGNvbnRlbmVyIGFsIG1lbm9zIGRvcyBwYWxhYnJhcy48L2gzPic7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGVycm9ycyE9XCJcIil7XG4gICAgICAgICAgICAgIHZhciBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXJyb3JfY29udGFpbmVyX2luc2lkZVwiKTtcbiAgICAgICAgICAgICAgZXJyb3JEaXYuaW5uZXJIVE1MPSBlcnJvcnM7XG4gICAgICAgICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgIC8vZG9uJ3QgYWxsb3cgdGhlIHVzZXIgdG8gY2xvc2UgdW5sZXNzIGhlIGVudGVycyB3aWZpIHBhc3N3b3JkXG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KTtcbiAgICByZXR1cm4gbXlQb3B1cDtcbiAgIH1cblxuXG4gIH07XG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnU2VtYXBob3JlU2VydmljZScsIFtmdW5jdGlvbigpIHtcblxuICB2YXIgc2VtYXBob3JlT2JqID0ge307XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzID0gbmV3IEFycmF5KCk7XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzWydvcGVuLW1vZGFsJ10gPSBcImF2YWlsYWJsZVwiO1xuICBzZW1hcGhvcmVPYmouc2VtYXBob3Jlc1snc3VibWl0LWZvcm0nXSA9IFwiYXZhaWxhYmxlXCI7XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzWydzdWJtaXQtbG9jYXRpb24nXSA9IFwiYXZhaWxhYmxlXCI7XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzWydjYW5fdGFsayddID0gXCJhdmFpbGFibGVcIjtcblxuXG5cblxuICBzZW1hcGhvcmVPYmoudGFrZUlmQXZhaWxhYmxlID0gZnVuY3Rpb24oc2VtYXBob3JlSWQpIHtcbiAgICAvL2NvbnNvbGUubG9nKHNlbWFwaG9yZUlkICsgXCI6XCIgKyBzZW1hcGhvcmVPYmouc2VtYXBob3Jlc1tzZW1hcGhvcmVJZF0pO1xuICAgIGlmKHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzW3NlbWFwaG9yZUlkXT09XCJhdmFpbGFibGVcIil7XG4gICAgICAgIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzW3NlbWFwaG9yZUlkXSA9IFwib2NjdXBpZWRcIjtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfWVsc2V7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc2VtYXBob3JlT2JqLm1ha2VBdmFpbGFibGVBZ2FpbiA9IGZ1bmN0aW9uKHNlbWFwaG9yZUlkKSB7XG4gICAgaWYoc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbc2VtYXBob3JlSWRdPT1cIm9jY3VwaWVkXCIpe1xuICAgICAgICBzZW1hcGhvcmVPYmouc2VtYXBob3Jlc1tzZW1hcGhvcmVJZF0gPSBcImF2YWlsYWJsZVwiO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9ZWxzZXtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc2VtYXBob3JlT2JqO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnbG9jYXRpb25BUEknLCBbJyRodHRwJywgJyRxJywgJ0FwaUltRW5kcG9pbnQnLCAnQXBpRGF0YUVuZHBvaW50JywgJ0NvbmZpZ1NlcnZpY2UnLCAnTG9jYXRpb25zU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCAkcSwgQXBpSW1FbmRwb2ludCwgQXBpRGF0YUVuZHBvaW50LCBDb25maWdTZXJ2aWNlLCBMb2NhdGlvbnNTZXJ2aWNlKSB7XG5cbiAgdmFyIHJlc3RQcmVmZml4ID0gXCJ1YmljYWNpb25lc1Jlc3RQcm9kXCI7XG5cblxuICB2YXIgbG9jYXRpb25BUEkgPSB7fTtcblxuICBsb2NhdGlvbkFQSS5zZWFyY2hMb2NhdGlvbkJ5U3RyID0gZnVuY3Rpb24oX2xvY2F0aW9uKSB7XG4gICAgLypyZXR1cm4gJGh0dHAuZ2V0KEFwaUltRW5kcG9pbnQudXJsICsgJy8nICsgcmVzdFByZWZmaXggKyAnL2NhbGxlcycsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgbm9tYnJlOiBfbG9jYXRpb25cbiAgICAgIH1cbiAgICB9KTsqL1xuICAgIHZhciBiYXNlVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYWpheC9nZW9jb2RlP3Rlcm09XCIgKyBMb2NhdGlvbnNTZXJ2aWNlLnNlbGVjdGVkX2NvdW5jaWwgKyBcIixcIiArIF9sb2NhdGlvbjtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KGJhc2VVUkwsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXJhbXM6IHt9XG4gICAgfSk7XG4gIH07XG5cblxuICBsb2NhdGlvbkFQSS5zZWFyY2hFc3F1aW5hQnlTdHIgPSBmdW5jdGlvbihfbG9jYXRpb24pIHtcbiAgICAvL2NvbnNvbGUubG9nKFwic2VhcmNoRXNxdWluYUJ5U3RyID0gXCIgKyBKU09OLnN0cmluZ2lmeShfbG9jYXRpb24pKTtcbiAgICAvL3JldHVybiAkaHR0cC5nZXQoQXBpSW1FbmRwb2ludC51cmwgKyAnLycgKyByZXN0UHJlZmZpeCArICcvZXNxdWluYS8nICsgX2xvY2F0aW9uLmNhbGxlICsgJy8nICsgX2xvY2F0aW9uLmVzcXVpbmEsIHtcbiAgICAgIC8qcmV0dXJuICRodHRwLmdldChBcGlJbUVuZHBvaW50LnVybCArICcvJyArIHJlc3RQcmVmZml4ICsgJy9jcnVjZXMvJyArIF9sb2NhdGlvbi5jYWxsZSArICcvJyxcbiAgICAgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgbm9tYnJlOiBfbG9jYXRpb24uZXNxdWluYVxuICAgICAgICB9XG4gICAgICB9KTsqL1xuXG4gICAgICB2YXIgYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL2FqYXgvZ2VvY29kZT90ZXJtPVwiICsgTG9jYXRpb25zU2VydmljZS5zZWxlY3RlZF9jb3VuY2lsICsgXCIsXCJcbiAgICAgICAgICAgICAgICAgICAgKyBfbG9jYXRpb24uY2FsbGUgKyBcIixcIiArIF9sb2NhdGlvbi5lc3F1aW5hO1xuICAgICAgcmV0dXJuICRodHRwLmdldChiYXNlVVJMLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHBhcmFtczoge31cbiAgICAgIH0pO1xuICB9O1xuXG4gIGxvY2F0aW9uQVBJLmdldExvY2F0aW9uR2VvbSA9IGZ1bmN0aW9uKF9sb2NhdGlvbikge1xuICAgIHZhciB1cmwgPSBBcGlJbUVuZHBvaW50LnVybCArICcvJyArIHJlc3RQcmVmZml4ICsgbG9jYXRpb25BUEkuZ2V0UGFyYW1QYXRoQnlUaXBvKF9sb2NhdGlvbi50aXBvKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9sb2NhdGlvbi5wYXRoUGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB1cmwgKz0gJy8nICsgX2xvY2F0aW9uLnBhdGhQYXJhbXNbaV07XG4gICAgfVxuICAgIHJldHVybiAkaHR0cC5nZXQoYmFzZVVSTCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9KTtcbiAgfTtcblxuICBsb2NhdGlvbkFQSS5nZXRMb2NhdGlvbkdlb21QTUIgPSBmdW5jdGlvbihjYWxsZSxlc3F1aW5hX251bWVybyx0aXBvKSB7XG4gICAgdmFyIGJhc2VVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hamF4L2dlb2NvZGU/dGVybT1cIiArIExvY2F0aW9uc1NlcnZpY2Uuc2VsZWN0ZWRfY291bmNpbCArIFwiLFwiXG4gICAgICAgICAgICAgICsgY2FsbGUgKyBcIixcIiArIGVzcXVpbmFfbnVtZXJvICsgXCIsXCIgKyB0aXBvO1xuXG4gICAgcmV0dXJuICRodHRwLmdldChiYXNlVVJMKTtcblxuICB9O1xuXG4gIGxvY2F0aW9uQVBJLmdldFBhcmFtUGF0aEJ5VGlwbyA9IGZ1bmN0aW9uKF90aXBvKSB7XG5cbiAgICB2YXIgcmVzdEdlb0RhdGFTZXJ2aWNlUGF0aCA9IHtcbiAgICAgICdFU1FVSU5BJzpcIi9lc3F1aW5hXCIsXG4gICAgICAnRElSRUNDSU9OJzpcIi9kaXJlY2Npb25cIlxuICAgIH07XG5cbiAgICByZXR1cm4gcmVzdEdlb0RhdGFTZXJ2aWNlUGF0aFtfdGlwb107XG5cblxuICB9O1xuXG4gIHJldHVybiBsb2NhdGlvbkFQSTtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ18nLCBbZnVuY3Rpb24oKSB7XG4gIHJldHVybiB3aW5kb3cuXzsgLy9VbmRlcnNjb3JlIG11c3QgYWxyZWFkeSBiZSBsb2FkZWQgb24gdGhlIHBhZ2Vcbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdVc2VyU2VydmljZScsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xuXG4gIC8vdmFyIGJhc2VVUkwgPSBcImh0dHA6Ly9wbWJ1eS5kZXZlbG9wbWVudC5kYXRhdXkub3JnL2F1dGgvYWpheC9cIjtcbiAgdmFyIFVzZXJPYmogPSB7fTtcbiAgVXNlck9iai51aWQgPSBudWxsO1xuICBVc2VyT2JqLm5hbWUgPSBudWxsO1xuICBVc2VyT2JqLmVtYWlsID0gbnVsbDtcbiAgVXNlck9iai5wYXNzd29yZCA9IG51bGw7XG4gIFVzZXJPYmoucGljdHVyZV91cmwgPSBcInVybCguL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZylcIjtcbiAgVXNlck9iai5zaG93X2xvY2F0aW9uID0gbnVsbDtcblxuXG4gIFVzZXJPYmouc2F2ZV91c2VyX2RhdGEgPSBmdW5jdGlvbiAodXNlcl9uYW1lLCB1c2VyX3Bhc3N3b3JkLCB1c2VyX3BpY3R1cmVfdXJsLCBzaG93X2xvY2F0aW9uLCB1aWQsIHN0YXR1cywgZ2VuZGVyLCBpbnRlcmVzdGVkKSB7XG4gICAgICBVc2VyT2JqLnVpZCA9IHVpZDtcbiAgICAgIFVzZXJPYmoubmFtZSA9IHVzZXJfbmFtZTtcbiAgICAgIFVzZXJPYmoucGFzc3dvcmQgPSB1c2VyX3Bhc3N3b3JkO1xuICAgICAgVXNlck9iai5waWN0dXJlX3VybCA9IHVzZXJfcGljdHVyZV91cmw7XG4gICAgICBVc2VyT2JqLnNob3dfbG9jYXRpb24gPSBzaG93X2xvY2F0aW9uO1xuICAgICAgVXNlck9iai5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICBVc2VyT2JqLmdlbmRlciA9IGdlbmRlcjtcbiAgICAgIFVzZXJPYmouaW50ZXJlc3RlZCA9IGludGVyZXN0ZWQ7XG5cbiAgICAgIC8vU0FWRSBJTiBQT1VDSERCXG4gIH1cblxuICBVc2VyT2JqLmVyYXNlX3VzZXJfZGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICBVc2VyT2JqLm5hbWUgPSBudWxsO1xuICAgIFVzZXJPYmouZW1haWwgPSBudWxsO1xuICAgIFVzZXJPYmoucGFzc3dvcmQgPSBudWxsO1xuICAgIFVzZXJPYmouaWRlbnRpdHlfZG9jdW1lbnQgPSBudWxsO1xuICAgIFVzZXJPYmoucGhvbmUgPSBudWxsO1xuICAgIFVzZXJPYmoucGljdHVyZV91cmwgPSBudWxsO1xuICAgIC8vREVMRVRFIElOIFBPVUNIREJcbiAgfVxuXG4gIFVzZXJPYmouZ2V0X3VzZXJfZGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL0xFVkFOVEEgREUgUE9VQ0hEQiBMT1MgREFUT1MgREVMIFVTVUFSSU8uIFNJIEhBWSBMT1MgUE9ORSBFTiBMQVMgVkFSSUFCTEVTIERFTCBTRVJWSUNJTy4gU0kgTk8gSEFZIFBPTkUgVE9ETyBOVUxMXG4gIH1cblxuICBVc2VyT2JqLmFkZF9waG90byA9IGZ1bmN0aW9uICh1c2VyX3BpY3R1cmVfdXJsKSB7XG4gICAgVXNlck9iai5waWN0dXJlX3VybCA9IHVzZXJfcGljdHVyZV91cmw7XG4gIH1cblxuICBVc2VyT2JqLmlzTG9nZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmKFVzZXJPYmoubmFtZSE9bnVsbCAmJiBVc2VyT2JqLm5hbWUhPVwiXCIpe1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfWVsc2V7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cblxuICByZXR1cm4gVXNlck9iajtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ1ZhbGlkYXRpb25TZXJ2aWNlJywgWyckaHR0cCcsJyRpb25pY1BvcHVwJywgZnVuY3Rpb24oJGh0dHAsJGlvbmljUG9wdXApIHtcblxuICByZXR1cm4ge1xuICAgIGlzTW9iaWxlRGV2aWNlOiBmdW5jdGlvbigpe1xuICAgICAgaWYod2luZG93LmNvcmRvdmEpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgIH0sXG5cbiAgICB2YWxpZGF0ZV9ub3RfZW1wdHk6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZih2YWx1ZSE9bnVsbCAmJiB2YWx1ZSE9XCJ1bmRlZmluZWRcIiAmJiB2YWx1ZSE9XCJcIil7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB2YWxpZGF0ZV90d29fd29yZHM6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZih2YWx1ZSE9bnVsbCAmJiB2YWx1ZSE9XCJ1bmRlZmluZWRcIiAmJiB2YWx1ZSE9XCJcIil7XG4gICAgICAgICAgdmFyIHZhbHVlcyA9IHZhbHVlLnNwbGl0KCcgJykuZmlsdGVyKGZ1bmN0aW9uKHYpe3JldHVybiB2IT09Jyd9KTtcbiAgICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgLy90d28gb3IgbW9yZSB3b3Jkc1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvL25vdCBlbm91Z2ggd29yZHNcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHZhbGlkYXRlX2VxdWFsc1RvOiBmdW5jdGlvbiAodmFsdWUsc2Vjb25kVmFsdWUpIHtcbiAgICAgIGlmKHZhbHVlPT1zZWNvbmRWYWx1ZSl7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdmFsaWRhdGVfZW1haWw6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZih2YWx1ZSE9bnVsbCAmJiB2YWx1ZSE9XCJ1bmRlZmluZWRcIiAmJiB2YWx1ZSE9XCJcIil7XG4gICAgICAgICAgdmFyIHJlID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG4gICAgICAgICAgcmV0dXJuIHJlLnRlc3QodmFsdWUpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdmFsaWRhdGVfaWRkb2NfdXk6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYodmFsdWUhPW51bGwgJiYgdmFsdWUhPVwidW5kZWZpbmVkXCIgJiYgdmFsdWUhPVwiXCIpe1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxEL2csICcnKTtcbiAgICAgICAgICB2YXIgZGlnID0gdmFsdWVbdmFsdWUubGVuZ3RoIC0gMV07XG4gICAgICAgICAgdmFyIGEgPSAwOyB2YXIgaSA9IDA7XG4gICAgICAgICAgaWYodmFsdWUubGVuZ3RoIDw9IDYpe1xuICAgICAgICAgICAgZm9yKGkgPSB2YWx1ZS5sZW5ndGg7IGkgPCA3OyBpKyspe1xuICAgICAgICAgICAgICB2YWx1ZSA9ICcwJyArIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IoaSA9IDA7IGkgPCA3OyBpKyspe1xuICAgICAgICAgICAgYSArPSAocGFyc2VJbnQoXCIyOTg3NjM0XCJbaV0pICogcGFyc2VJbnQodmFsdWVbaV0pKSAlIDEwO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIGlmKGElMTAgPT09IDApe1xuICAgICAgICAgICAgcmVzdWx0ID0gMDtcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJlc3VsdCA9IDEwIC0gYSAlIDEwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihkaWcgPT0gcmVzdWx0KXtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9O1xufV0pO1xuIl19
